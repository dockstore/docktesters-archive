From miguel.vazquez at cnio.es  Tue Oct  4 03:22:43 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Tue, 4 Oct 2016 09:22:43 +0200
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <8212A167-228D-4184-A707-F5DC39F8FA27@oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mauP2sbM7d+Z79Y0dn94M80NXFXP5DKh0a7AD0bE1BG4g@mail.gmail.com>
 <6DDD0535-6E45-413E-8E93-60E22F6C3510@oicr.on.ca>
 <8231F9BE-D796-4F7C-9F61-8BAEA336F038@ohsu.edu>
 <8212A167-228D-4184-A707-F5DC39F8FA27@oicr.on.ca>
Message-ID: <CA+dx8mYXwd30eX3en5Wj8if5CmAaXhFqaZD2hhmz8axLEG_UNw@mail.gmail.com>

Hi all,

I'm sorry to have missed the call yesterday, I got hung up with
administrative things. What did I miss?

Best

Miguel

On Fri, Sep 30, 2016 at 6:19 PM, Francis Ouellette <francis at oicr.on.ca>
wrote:

>
>
> Adam,
>
> Can you complete table on wiki:
>
> https://wiki.oicr.on.ca/pages/editpage.action?pageId=66309629
>
> Actually: Miguel and Junjun, can you also somplete that table?
>
> Thank you.
>
> Adam: can you try and make workflow work on one platform with the same
> data that Miguel and Junjun tried?
>
> Thank you,
>
> @bffo
>
>
>
> --
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette
>
>
>
>
> On Sep 30, 2016, at 12:02 PM, Adam Struck <strucka at ohsu.edu> wrote:
>
> I thought I should add that I've run the Sanger pipeline on the test data
> in three separate environments using both CWL and WDL descriptors.
>
> Feel free to email me the errors you are seeing and I'll try and debug.
>
> Adam Struck
> Scientific Programmer
> Computational Biology
> Oregon Health and Science University
>
>
> On Sep 30, 2016, at 7:52 AM, Francis Ouellette <francis at oicr.on.ca> wrote:
>
> yes, good plan.
>
> @bffo
>
> --
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette
>
>
>
>
> On Sep 30, 2016, at 10:46 AM, Miguel Vazquez <miguel.vazquez at cnio.es>
> wrote:
>
> Dear Francis,
>
> I haven't had a chance to go at it again since the meeting, I got a new
> position in Norway, but next week I will try to find some time. I think I
> might just try another pipeline, since it seems like the Sanger pipeline
> needs fixing. Although perhaps I will first try Denis test data again and
> see if I can reproduce the error, after which we probably should contact
> the person in charge.
>
> Best
>
> M
>
> On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca>
> wrote:
>
>> Dear Miguel and Junjun,
>>
>> Any more attempts on testing the PCAWG sanger docker container?
>>
>> If you reproduce the same error, we will need to involve Bryan and
>> Keiran Raine <kr2 at sanger.ac.uk> (author of the container).
>>
>> Let?s get this one figured out.
>>
>> I am going to assume that the making of the docker container is what
>> needs resolving.
>>
>> Brian: We may need your input here.
>>
>> Details of our current experiment should continue to be posted here:
>>
>> https://goo.gl/XX5BG9
>>
>> Thank you all,
>>
>> francis
>>
>> PS would be good for others on list to follow directions on above google
>> doc and also see if they can succeed on this workflow.
>>
>> Junjun and Miguel have tried different clouds, but used the sanger
>> workflow, on the same data set.
>>
>> Thank you for trying to do this.
>>
>> Would be good if I heard back from anybody before Monday AM (tech call).
>>
>> @bffo
>>
>> PS I CCed Keiran, but waiting to hear back from Brian before we need to
>> involve him some more.
>> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the
>> same data set).
>>
>>
>> --
>> B.F. Francis Ouellette          http://oicr.on.ca/person/fran
>> cis-ouellette
>>
>>
>>
>> Begin forwarded message:
>>
>> *From: *Christina Yung <Christina.Yung at oicr.on.ca>
>> *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH teleconference*
>> *Date: *September 30, 2016 at 9:19:39 AM EDT
>> *To: *"pawg-tech (pawg-tech at lists.icgc.org)" <pawg-tech at lists.icgc.org>
>>
>> Hi Everyone,
>>
>>
>>
>> Below is a draft agenda for Monday?s tech call.  Please let me know if
>> you have any agenda items for discussion.
>>
>> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-
>> TECH+Teleconference
>>
>>
>>
>> Have a great weekend!
>>
>> Christina
>>
>>
>> Call Info
>>
>> *Usual Time            9 AM Eastern Time, Mondays*
>>
>> *UK                          0208 322 2500*
>>
>> *Canada                  1-866-220-6419*
>>
>> *United States        **1-877-420-0272*
>>
>> *All Others              Please see attached PDF file
>> <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with
>> a list of numbers for other countries.*
>>
>> *Participant Code  5910819#*
>> Agenda
>>
>>
>> *Time*
>>
>> *Item*
>>
>> *Who*
>>
>> *Attachments/Links*
>>
>> 5min
>>
>> Welcome. Wait for group members to log on
>>
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>>
>> 10min
>>
>> Overall status
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>>
>> ?         Linkouts to Most Current PCAWG Data
>> <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>>
>> ?         Report data issues to pcawg-data at icgc.org, GNOS issue to:
>> Help at annaisystems.com
>>
>> ?         From Boston F2F: PCAWG datasets & dependencies
>> <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>>
>> *Action Items*
>>
>> 1.       [Joachim] Consensus SV - final?
>>
>> 2.       [Jakob] Consensus SNVs - changes to "SNV near indels"
>> annotation?
>>
>> 3.       [Junjun] Specimen ID mapping for miRNA and methylation
>>
>> 4.       [Jonathan & Joachim] Consensus calls for cell lines, followed
>> by filtering
>>
>> 5.       [Matthias & Gordon] Docker containers for filtering methods
>>
>> 6.       [Christina] Run alignment & variant workflows on
>> medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to
>> estimate false negative rate
>>
>> 7.       [Christina] Follow up with institutes interested in hosting
>> PCAWG data long-term
>>
>> 8.       [All] As per Jennifer's email on Sept 16, please provide
>> authorship information again or for the first time using PCAWG Author Form (
>> http://goo.gl/forms/5Wq5x5X1DK). Save the link "Edit your response" so
>> you can go back later to provide updates, for example about your evolving
>> role in writing specific papers.
>>
>> 9.       [All] Contribute to the manuscripts on
>>
>> a.       infrastructure: https://docs.google.com/docume
>> nt/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
>>
>> b.       variants: Paper ( https://goo.gl/g9CLsu ), Supplement (
>> https://goo.gl/EWYh7e )
>>
>> c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline
>> <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2>
>> )
>>
>> 10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13
>> conference
>>
>> 10min
>>
>> Status of dockerizing workflows
>> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>>
>> Gordon Saksena
>> <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>>
>> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
>> *Status of PCAWG Workflow ports to Dockstore*:
>>
>> Denis has been porting the Dockstore entries to CWL version 1.0 which is
>> part of our effort to publish Dockstore (this doesn't affect the content of
>> the pipelines, simply their "descriptors" which allow them to be runnable
>> via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL
>> (which all work with CWL 1.0 and Kerian's test dataset) and has fixed
>> issues with DKFZ and is testing the latter with a real sample shortly.
>>
>> 1.       BWA-Mem - Ready for testing by Francis' team
>>
>> 2.       Sanger - Ready for testing by Francis' team.
>>
>> 3.       EMBL - Ready for testing by Francis' team.
>>
>> 4.       DKFZ - Ready for testing by Francis' team. I've exchanged
>> emails with Manuel Ballesteros who has been testing this pipeline.
>>
>> 5.       Broad - Variant calling (MuTect, dRanger, snowman), need some
>> work, Gordan sent details previously
>>
>> 6.       OxoG - Waiting for Dimitri to provide OxoG docker
>>
>> 7.       Variantbam
>>
>> 8.       Consensus algorithm
>>
>> PCAWG Docker (Dockstore) Testing Working Group
>> <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>>
>> 5min
>>
>> Other business?
>>
>> Group
>>
>>
>>
>>
>>
>>
>>
>> *Christina K. Yung, PhD*
>> Project Manager, Cancer Genome Collaboratory
>>
>> *Ontario Institute for Cancer Research*
>> MaRS Centre
>>
>> 661 University Avenue, Suite 510
>> Toronto, Ontario, Canada M5G 0A3
>> Tel: 416-673-8578
>>
>> www.oicr.on.ca
>>
>>
>> This message and any attachments may contain confidential and/or
>> privileged information for the sole use of the intended recipient. Any
>> review or distribution by anyone other than the person for whom it was
>> originally intended is strictly prohibited. If you have received this
>> message in error, please contact the sender and delete all copies.
>> Opinions, conclusions or other information contained in this message may
>> not be that of the organization.
>>
>>
>> _______________________________________________
>> PAWG-TECH mailing list
>> PAWG-TECH at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/pawg-tech
>>
>>
>>
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters
>>
>>
>
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters
>
>
>
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161004/d12a72c8/attachment-0001.html>

From francis at oicr.on.ca  Tue Oct  4 10:24:26 2016
From: francis at oicr.on.ca (Francis Ouellette)
Date: Tue, 4 Oct 2016 14:24:26 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
 teleconference
In-Reply-To: <CA+dx8mYXwd30eX3en5Wj8if5CmAaXhFqaZD2hhmz8axLEG_UNw@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mauP2sbM7d+Z79Y0dn94M80NXFXP5DKh0a7AD0bE1BG4g@mail.gmail.com>
 <6DDD0535-6E45-413E-8E93-60E22F6C3510@oicr.on.ca>
 <8231F9BE-D796-4F7C-9F61-8BAEA336F038@ohsu.edu>
 <8212A167-228D-4184-A707-F5DC39F8FA27@oicr.on.ca>
 <CA+dx8mYXwd30eX3en5Wj8if5CmAaXhFqaZD2hhmz8axLEG_UNw@mail.gmail.com>
Message-ID: <8ECBAF05-EACF-4D5F-8C0A-36C69EAE9F99@oicr.on.ca>

Hi Miguel,

I think it will be important for all to update this table:

https://wiki.oicr.on.ca/pages/editpage.action?pageId=66309629

(in particular, Adam S, Miguel, Junjun and Christina).

Other important message from Lincoln: We need to test BWA-mem workflow.

Christina: do we need to ?undo? a BAM file for that?

We have a lot of testing to do, and next call is in 13 days (skipping next
week because of thanksgiving holiday in Canada next Monday).

Brian/Dennis: apparently there is a problem with the Sanger workflow
                docker container because it didn?t work for Miguel and Junjun,
                but worked on test data for Adam.

Please advise what you would like tested. (I asked Adam to test ?standard?
dataset for Sanger workflow.

thank you,

@bffo


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette








On Oct 4, 2016, at 3:22 AM, Miguel Vazquez <miguel.vazquez at cnio.es<mailto:miguel.vazquez at cnio.es>> wrote:

Hi all,

I'm sorry to have missed the call yesterday, I got hung up with administrative things. What did I miss?

Best

Miguel

On Fri, Sep 30, 2016 at 6:19 PM, Francis Ouellette <francis at oicr.on.ca<mailto:francis at oicr.on.ca>> wrote:


Adam,

Can you complete table on wiki:

https://wiki.oicr.on.ca/pages/editpage.action?pageId=66309629

Actually: Miguel and Junjun, can you also somplete that table?

Thank you.

Adam: can you try and make workflow work on one platform with the same data that Miguel and Junjun tried?

Thank you,

@bffo



--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette



On Sep 30, 2016, at 12:02 PM, Adam Struck <strucka at ohsu.edu<mailto:strucka at ohsu.edu>> wrote:

I thought I should add that I've run the Sanger pipeline on the test data in three separate environments using both CWL and WDL descriptors.

Feel free to email me the errors you are seeing and I'll try and debug.

Adam Struck
Scientific Programmer
Computational Biology
Oregon Health and Science University


On Sep 30, 2016, at 7:52 AM, Francis Ouellette <francis at oicr.on.ca<mailto:francis at oicr.on.ca>> wrote:

yes, good plan.

@bffo

--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette



On Sep 30, 2016, at 10:46 AM, Miguel Vazquez <miguel.vazquez at cnio.es<mailto:miguel.vazquez at cnio.es>> wrote:

Dear Francis,

I haven't had a chance to go at it again since the meeting, I got a new position in Norway, but next week I will try to find some time. I think I might just try another pipeline, since it seems like the Sanger pipeline needs fixing. Although perhaps I will first try Denis test data again and see if I can reproduce the error, after which we probably should contact the person in charge.

Best

M

On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca<mailto:francis at oicr.on.ca>> wrote:
Dear Miguel and Junjun,

Any more attempts on testing the PCAWG sanger docker container?

If you reproduce the same error, we will need to involve Bryan and
Keiran Raine <kr2 at sanger.ac.uk<mailto:kr2 at sanger.ac.uk>> (author of the container).

Let?s get this one figured out.

I am going to assume that the making of the docker container is what
needs resolving.

Brian: We may need your input here.

Details of our current experiment should continue to be posted here:

https://goo.gl/XX5BG9

Thank you all,

francis

PS would be good for others on list to follow directions on above google
doc and also see if they can succeed on this workflow.

Junjun and Miguel have tried different clouds, but used the sanger
workflow, on the same data set.

Thank you for trying to do this.

Would be good if I heard back from anybody before Monday AM (tech call).

@bffo

PS I CCed Keiran, but waiting to hear back from Brian before we need to involve him some more.
PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same data set).


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette



Begin forwarded message:

From: Christina Yung <Christina.Yung at oicr.on.ca<mailto:Christina.Yung at oicr.on.ca>>
Subject: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Date: September 30, 2016 at 9:19:39 AM EDT
To: "pawg-tech (pawg-tech at lists.icgc.org<mailto:pawg-tech at lists.icgc.org>)" <pawg-tech at lists.icgc.org<mailto:pawg-tech at lists.icgc.org>>

Hi Everyone,

Below is a draft agenda for Monday?s tech call.  Please let me know if you have any agenda items for discussion.
https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference

Have a great weekend!
Christina

Call Info

Usual Time            9 AM Eastern Time, Mondays

UK                          0208 322 2500

Canada                  1-866-220-6419

United States        1-877-420-0272

All Others              Please see attached PDF file<https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with a list of numbers for other countries.

Participant Code  5910819#

Agenda

Time

Item

Who

Attachments/Links

5min

Welcome. Wait for group members to log on

Christina Yung<https://wiki.oicr.on.ca/display/~cyung>, OICR

10min

Overall status

Christina Yung<https://wiki.oicr.on.ca/display/~cyung>, OICR

?         Linkouts to Most Current PCAWG Data<https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
?         Report data issues to pcawg-data at icgc.org<mailto:pcawg-data at icgc.org>, GNOS issue to: Help at annaisystems.com<mailto:Help at annaisystems.com>
?         From Boston F2F: PCAWG datasets & dependencies<https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>

Action Items
1.       [Joachim] Consensus SV - final?
2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
3.       [Junjun] Specimen ID mapping for miRNA and methylation
4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by filtering
5.       [Matthias & Gordon] Docker containers for filtering methods
6.       [Christina] Run alignment & variant workflows on medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false negative rate
7.       [Christina] Follow up with institutes interested in hosting PCAWG data long-term
8.       [All] As per Jennifer's email on Sept 16, please provide authorship information again or for the first time using PCAWG Author Form (http://goo.gl/forms/5Wq5x5X1DK). Save the link "Edit your response" so you can go back later to provide updates, for example about your evolving role in writing specific papers.
9.       [All] Contribute to the manuscripts on
a.       infrastructure: https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
b.       variants: Paper ( https://goo.gl/g9CLsu ), Supplement ( https://goo.gl/EWYh7e )
c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline<https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2> )
10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13 conference

10min

Status of dockerizing workflows

Brian O'Connor<https://wiki.oicr.on.ca/display/~boconnor>, UCSC

Gordon Saksena<https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad

Francis Ouellette<https://wiki.oicr.on.ca/display/~francis>, OICR


Status of PCAWG Workflow ports to Dockstore:

Denis has been porting the Dockstore entries to CWL version 1.0 which is part of our effort to publish Dockstore (this doesn't affect the content of the pipelines, simply their "descriptors" which allow them to be runnable via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL (which all work with CWL 1.0 and Kerian's test dataset) and has fixed issues with DKFZ and is testing the latter with a real sample shortly.
1.       BWA-Mem - Ready for testing by Francis' team
2.       Sanger - Ready for testing by Francis' team.
3.       EMBL - Ready for testing by Francis' team.
4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails with Manuel Ballesteros who has been testing this pipeline.
5.       Broad - Variant calling (MuTect, dRanger, snowman), need some work, Gordan sent details previously
6.       OxoG - Waiting for Dimitri to provide OxoG docker
7.       Variantbam
8.       Consensus algorithm

PCAWG Docker (Dockstore) Testing Working Group<https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>

5min

Other business?

Group




Christina K. Yung, PhD
Project Manager, Cancer Genome Collaboratory

Ontario Institute for Cancer Research
MaRS Centre
661 University Avenue, Suite 510
Toronto, Ontario, Canada M5G 0A3
Tel: 416-673-8578
www.oicr.on.ca<http://www.oicr.on.ca/>

This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.

_______________________________________________
PAWG-TECH mailing list
PAWG-TECH at lists.icgc.org<mailto:PAWG-TECH at lists.icgc.org>
https://lists.icgc.org/mailman/listinfo/pawg-tech


_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<mailto:docktesters at lists.icgc.org>
https://lists.icgc.org/mailman/listinfo/docktesters



_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<mailto:docktesters at lists.icgc.org>
https://lists.icgc.org/mailman/listinfo/docktesters


_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<mailto:docktesters at lists.icgc.org>
https://lists.icgc.org/mailman/listinfo/docktesters



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161004/8c3b690d/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Tue Oct  4 11:04:26 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Tue, 4 Oct 2016 15:04:26 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
 teleconference
In-Reply-To: <8ECBAF05-EACF-4D5F-8C0A-36C69EAE9F99@oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mauP2sbM7d+Z79Y0dn94M80NXFXP5DKh0a7AD0bE1BG4g@mail.gmail.com>
 <6DDD0535-6E45-413E-8E93-60E22F6C3510@oicr.on.ca>
 <8231F9BE-D796-4F7C-9F61-8BAEA336F038@ohsu.edu>
 <8212A167-228D-4184-A707-F5DC39F8FA27@oicr.on.ca>
 <CA+dx8mYXwd30eX3en5Wj8if5CmAaXhFqaZD2hhmz8axLEG_UNw@mail.gmail.com>,
 <8ECBAF05-EACF-4D5F-8C0A-36C69EAE9F99@oicr.on.ca>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A05E3@exmb2.ad.oicr.on.ca>

Hi,

Brian/Dennis: apparently there is a problem with the Sanger workflow
                docker container because it didn?t work for Miguel and Junjun,
                but worked on test data for Adam.

Please advise what you would like tested. (I asked Adam to test ?standard?
dataset for Sanger workflow.

I think the first useful test would be to see if the test data ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/test1.json ) works in JunJun/Miguel's environments. That way we can diagnose whether there is a difference in environment causing the issue or an issue with the data.

bwa-mem is a good suggestion since it is also a useful test. It along with delly are the fastest workflows in this test, so running test data through them will quickly get results.


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Francis Ouellette [francis at oicr.on.ca]
Sent: October 4, 2016 10:24 AM
To: docktesters at lists.icgc.org
Cc: kr2 at sanger.ac.uk
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Miguel,

I think it will be important for all to update this table:

https://wiki.oicr.on.ca/pages/editpage.action?pageId=66309629<redir.aspx?REF=RvfbfDV5yN05OGyCIpsC9ASxL0fR2b8LXyACsFE86VQMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9wYWdlcy9lZGl0cGFnZS5hY3Rpb24_cGFnZUlkPTY2MzA5NjI5>

(in particular, Adam S, Miguel, Junjun and Christina).

Other important message from Lincoln: We need to test BWA-mem workflow.

Christina: do we need to ?undo? a BAM file for that?

We have a lot of testing to do, and next call is in 13 days (skipping next
week because of thanksgiving holiday in Canada next Monday).

Brian/Dennis: apparently there is a problem with the Sanger workflow
                docker container because it didn?t work for Miguel and Junjun,
                but worked on test data for Adam.

Please advise what you would like tested. (I asked Adam to test ?standard?
dataset for Sanger workflow.

thank you,

@bffo


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette<redir.aspx?REF=JWalCiDf1UlQYmtMReruvClox9FrnvM0b6rjIyYTE2kMEFAtZ-zTCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>








On Oct 4, 2016, at 3:22 AM, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=byg2Wac2qRTx271iVNlLbz5hO7X_wvcWc7QLZg6q0MMMEFAtZ-zTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:

Hi all,

I'm sorry to have missed the call yesterday, I got hung up with administrative things. What did I miss?

Best

Miguel

On Fri, Sep 30, 2016 at 6:19 PM, Francis Ouellette <francis at oicr.on.ca<redir.aspx?REF=b_ix-JnUsfv732eXF_BkaX4DCC3h_qsh6j4ePuMgkVcMEFAtZ-zTCAFtYWlsdG86ZnJhbmNpc0BvaWNyLm9uLmNh>> wrote:


Adam,

Can you complete table on wiki:

https://wiki.oicr.on.ca/pages/editpage.action?pageId=66309629<redir.aspx?REF=RvfbfDV5yN05OGyCIpsC9ASxL0fR2b8LXyACsFE86VQMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9wYWdlcy9lZGl0cGFnZS5hY3Rpb24_cGFnZUlkPTY2MzA5NjI5>

Actually: Miguel and Junjun, can you also somplete that table?

Thank you.

Adam: can you try and make workflow work on one platform with the same data that Miguel and Junjun tried?

Thank you,

@bffo



--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette<redir.aspx?REF=JWalCiDf1UlQYmtMReruvClox9FrnvM0b6rjIyYTE2kMEFAtZ-zTCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>



On Sep 30, 2016, at 12:02 PM, Adam Struck <strucka at ohsu.edu<redir.aspx?REF=fa1nJOFm8Vv6GFRRz7EoWYlt7TWBlZl1K3qZCe-mdIoMEFAtZ-zTCAFtYWlsdG86c3RydWNrYUBvaHN1LmVkdQ..>> wrote:

I thought I should add that I've run the Sanger pipeline on the test data in three separate environments using both CWL and WDL descriptors.

Feel free to email me the errors you are seeing and I'll try and debug.

Adam Struck
Scientific Programmer
Computational Biology
Oregon Health and Science University


On Sep 30, 2016, at 7:52 AM, Francis Ouellette <francis at oicr.on.ca<redir.aspx?REF=b_ix-JnUsfv732eXF_BkaX4DCC3h_qsh6j4ePuMgkVcMEFAtZ-zTCAFtYWlsdG86ZnJhbmNpc0BvaWNyLm9uLmNh>> wrote:

yes, good plan.

@bffo

--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette<redir.aspx?REF=JWalCiDf1UlQYmtMReruvClox9FrnvM0b6rjIyYTE2kMEFAtZ-zTCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>



On Sep 30, 2016, at 10:46 AM, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=byg2Wac2qRTx271iVNlLbz5hO7X_wvcWc7QLZg6q0MMMEFAtZ-zTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:

Dear Francis,

I haven't had a chance to go at it again since the meeting, I got a new position in Norway, but next week I will try to find some time. I think I might just try another pipeline, since it seems like the Sanger pipeline needs fixing. Although perhaps I will first try Denis test data again and see if I can reproduce the error, after which we probably should contact the person in charge.

Best

M

On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca<redir.aspx?REF=b_ix-JnUsfv732eXF_BkaX4DCC3h_qsh6j4ePuMgkVcMEFAtZ-zTCAFtYWlsdG86ZnJhbmNpc0BvaWNyLm9uLmNh>> wrote:
Dear Miguel and Junjun,

Any more attempts on testing the PCAWG sanger docker container?

If you reproduce the same error, we will need to involve Bryan and
Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=HmUOvBPmbgPQYo1PKTUi9L9rA15ty5mW0vHB1kpDyGsMEFAtZ-zTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> (author of the container).

Let?s get this one figured out.

I am going to assume that the making of the docker container is what
needs resolving.

Brian: We may need your input here.

Details of our current experiment should continue to be posted here:

https://goo.gl/XX5BG9<redir.aspx?REF=igI2BjAHq_QnGThrHZYuLFrmGAY6ELrN4zfrWPAHS6EMEFAtZ-zTCAFodHRwczovL2dvby5nbC9YWDVCRzk.>

Thank you all,

francis

PS would be good for others on list to follow directions on above google
doc and also see if they can succeed on this workflow.

Junjun and Miguel have tried different clouds, but used the sanger
workflow, on the same data set.

Thank you for trying to do this.

Would be good if I heard back from anybody before Monday AM (tech call).

@bffo

PS I CCed Keiran, but waiting to hear back from Brian before we need to involve him some more.
PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same data set).


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette<redir.aspx?REF=JWalCiDf1UlQYmtMReruvClox9FrnvM0b6rjIyYTE2kMEFAtZ-zTCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>



Begin forwarded message:

From: Christina Yung <Christina.Yung at oicr.on.ca<redir.aspx?REF=DUr_Vi0nS5bq1udzIo1XDg_xQUW7xxyULC8Jnyv6AWkMEFAtZ-zTCAFtYWlsdG86Q2hyaXN0aW5hLll1bmdAb2ljci5vbi5jYQ..>>
Subject: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Date: September 30, 2016 at 9:19:39 AM EDT
To: "pawg-tech (pawg-tech at lists.icgc.org<redir.aspx?REF=FFAyN_mjYJTwTKEsmGtlFobisO8q_YthM1MF-TnHRwQMEFAtZ-zTCAFtYWlsdG86cGF3Zy10ZWNoQGxpc3RzLmljZ2Mub3Jn>)" <pawg-tech at lists.icgc.org<redir.aspx?REF=FFAyN_mjYJTwTKEsmGtlFobisO8q_YthM1MF-TnHRwQMEFAtZ-zTCAFtYWlsdG86cGF3Zy10ZWNoQGxpc3RzLmljZ2Mub3Jn>>

Hi Everyone,

Below is a draft agenda for Monday?s tech call.  Please let me know if you have any agenda items for discussion.
https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference<redir.aspx?REF=hrZNQYyopojEt4RsxvxLpHEv17Ux_47NCqbz1tmRk14MEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi8yMDE2LTEwLTAzK1BDQVdHLVRFQ0grVGVsZWNvbmZlcmVuY2U.>

Have a great weekend!
Christina

Call Info

Usual Time            9 AM Eastern Time, Mondays

UK                          0208 322 2500

Canada                  1-866-220-6419

United States        1-877-420-0272

All Others              Please see attached PDF file<redir.aspx?REF=UaYtb5rD2emrUjcAbTAX6U4EAnm5qB2z5Vi0B1QGcSUMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kb3dubG9hZC9hdHRhY2htZW50cy81Nzc3Njk5MC9QQVdHLVRFQ0gtVGVsZWNvbi1JbnRlcm5hdGlvbmFsLU51bWJlcnMucGRmP3ZlcnNpb249MSZtb2RpZmljYXRpb25EYXRlPTE0MDE0NTYwMDMwMDAmYXBpPXYy> with a list of numbers for other countries.

Participant Code  5910819#

Agenda

Time

Item

Who

Attachments/Links

5min

Welcome. Wait for group members to log on

Christina Yung<redir.aspx?REF=kA2MQqBR7dlLy5DVjrScx3TQ4QVUChv10r2edO1MvXYMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35jeXVuZw..>, OICR

10min

Overall status

Christina Yung<redir.aspx?REF=kA2MQqBR7dlLy5DVjrScx3TQ4QVUChv10r2edO1MvXYMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35jeXVuZw..>, OICR

?         Linkouts to Most Current PCAWG Data<redir.aspx?REF=zHmEKm3hcvDkgDEOpH89c3N9M8fkzgZTpqSFWM98vu8MEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi9MaW5rb3V0cyt0bytNb3N0K0N1cnJlbnQrUENBV0crRGF0YQ..>
?         Report data issues to pcawg-data at icgc.org<redir.aspx?REF=6-Noonl4B1m_lxiF1GPGzqi6oNBDz29_v3oxy7JFtANmclItZ-zTCAFtYWlsdG86cGNhd2ctZGF0YUBpY2djLm9yZw..>, GNOS issue to: Help at annaisystems.com<redir.aspx?REF=Gzmx9ajvwghXqh5HUCcZ6v0iFM1uiYj0j7IAJUKnCUFmclItZ-zTCAFtYWlsdG86SGVscEBhbm5haXN5c3RlbXMuY29t>
?         From Boston F2F: PCAWG datasets & dependencies<redir.aspx?REF=ZtA8RU1bldwMjZYd2Jvir5vCW8Wi8SSbfwi9yy3wzGJmclItZ-zTCAFodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xVmx0TU1MTDVYRElGaXBNM3p6THFaT0dqNXotVXhJTUtMRGJzdURpRDJROC9lZGl0P3VzcD1zaGFyaW5n>

Action Items
1.       [Joachim] Consensus SV - final?
2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
3.       [Junjun] Specimen ID mapping for miRNA and methylation
4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by filtering
5.       [Matthias & Gordon] Docker containers for filtering methods
6.       [Christina] Run alignment & variant workflows on medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false negative rate
7.       [Christina] Follow up with institutes interested in hosting PCAWG data long-term
8.       [All] As per Jennifer's email on Sept 16, please provide authorship information again or for the first time using PCAWG Author Form (http://goo.gl/forms/5Wq5x5X1DK<redir.aspx?REF=fwZWD2Y3-FfW4xaNlQ8z38vmvMrRyioncvGhw7jVo4dmclItZ-zTCAFodHRwOi8vZ29vLmdsL2Zvcm1zLzVXcTV4NVgxREs.>). Save the link "Edit your response" so you can go back later to provide updates, for example about your evolving role in writing specific papers.
9.       [All] Contribute to the manuscripts on
a.       infrastructure: https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit<redir.aspx?REF=wckzbzDo_cwIfaWHwhk6MGnEP_dXmBLJSg1KanlTcztmclItZ-zTCAFodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzEwYWxBeHJXTGRMU3loY2ktcmZOdVZIMTNyRlhDSmthWV9yemYxS0puN25jL2VkaXQ.>
b.       variants: Paper ( https://goo.gl/g9CLsu<redir.aspx?REF=GgM9MIyerqil4SkbtVve9VhWq5JXhJpHHwIifHw8_rdmclItZ-zTCAFodHRwczovL2dvby5nbC9nOUNMc3U.> ), Supplement ( https://goo.gl/EWYh7e<redir.aspx?REF=GcFIDvGDgDLMy1HHSk5olANgg6_MhfTo90MrURSTe19mclItZ-zTCAFodHRwczovL2dvby5nbC9FV1loN2U.> )
c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline<redir.aspx?REF=pm7iQUvfaoQa8LpKHESdyAQ-jrtHLoaUNKWYN28xwSxmclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kb3dubG9hZC9hdHRhY2htZW50cy82Njk1ODYwOS9Sb2d1ZXMlRTIlODAlOTklMjBHYWxsZXJ5JTIwb2YlMjBDYW5jZXIlMjBHZW5vbWUlMjBTZXF1ZW5jaW5nJTIwQXJ0ZWZhY3RzLnBkZj92ZXJzaW9uPTEmbW9kaWZpY2F0aW9uRGF0ZT0xNDY5ODAyNjQzMDAwJmFwaT12Mg..> )
10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13 conference

10min

Status of dockerizing workflows

Brian O'Connor<redir.aspx?REF=lqdpknbfWMZfMIl5cuhYuFrn58RaibSr5T65i2Hp2YJmclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35ib2Nvbm5vcg..>, UCSC

Gordon Saksena<redir.aspx?REF=FATJ5aNVsyapKuZeVJP0WNfGU6lEKYWFmLTAj4FxvUZmclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35nc2Frc2VuYUBicm9hZGluc3RpdHV0ZS5vcmc.>, Broad

Francis Ouellette<redir.aspx?REF=OcbydD_0GIik6NxC9xH6JB2NCXnK5lmCvp6kdZmz361mclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35mcmFuY2lz>, OICR


Status of PCAWG Workflow ports to Dockstore:

Denis has been porting the Dockstore entries to CWL version 1.0 which is part of our effort to publish Dockstore (this doesn't affect the content of the pipelines, simply their "descriptors" which allow them to be runnable via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL (which all work with CWL 1.0 and Kerian's test dataset) and has fixed issues with DKFZ and is testing the latter with a real sample shortly.
1.       BWA-Mem - Ready for testing by Francis' team
2.       Sanger - Ready for testing by Francis' team.
3.       EMBL - Ready for testing by Francis' team.
4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails with Manuel Ballesteros who has been testing this pipeline.
5.       Broad - Variant calling (MuTect, dRanger, snowman), need some work, Gordan sent details previously
6.       OxoG - Waiting for Dimitri to provide OxoG docker
7.       Variantbam
8.       Consensus algorithm

PCAWG Docker (Dockstore) Testing Working Group<redir.aspx?REF=72e3iitmYU5QItGmgrvhVzgR7Hxyr5BWG3zera6saTlmclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi9QQ0FXRytEb2NrZXIrJTI4RG9ja3N0b3JlJTI5K1Rlc3RpbmcrV29ya2luZytHcm91cA..>

5min

Other business?

Group




Christina K. Yung, PhD
Project Manager, Cancer Genome Collaboratory

Ontario Institute for Cancer Research
MaRS Centre
661 University Avenue, Suite 510
Toronto, Ontario, Canada M5G 0A3
Tel: 416-673-8578
www.oicr.on.ca<redir.aspx?REF=Mac0X_exoVEv9Md2YRbT6uLcyJVuG-i08_WXDOQY5iNmclItZ-zTCAFodHRwOi8vd3d3Lm9pY3Iub24uY2Ev>

This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.

_______________________________________________
PAWG-TECH mailing list
PAWG-TECH at lists.icgc.org<redir.aspx?REF=UHIopAFLFWWNUzsk0WS4_7gJkHJMRvpxgfuPr2bqdtRmclItZ-zTCAFtYWlsdG86UEFXRy1URUNIQGxpc3RzLmljZ2Mub3Jn>
https://lists.icgc.org/mailman/listinfo/pawg-tech<redir.aspx?REF=KkeBLVhuCZSE1tmEWfuDQ9VAOtdsNOzpA9Ki2fu7kztmclItZ-zTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vcGF3Zy10ZWNo>


_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<redir.aspx?REF=qqg5ofwJ-ibjJSgkygYRa1h3GXP-AoL3pPy06jx62tNmclItZ-zTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
https://lists.icgc.org/mailman/listinfo/docktesters<redir.aspx?REF=lZnt34hpVuZ7gKgfrEZOWAPUZDiRyPFz1m-d1tmRGFJmclItZ-zTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>



_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<redir.aspx?REF=qqg5ofwJ-ibjJSgkygYRa1h3GXP-AoL3pPy06jx62tNmclItZ-zTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
https://lists.icgc.org/mailman/listinfo/docktesters<redir.aspx?REF=lZnt34hpVuZ7gKgfrEZOWAPUZDiRyPFz1m-d1tmRGFJmclItZ-zTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>


_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<redir.aspx?REF=qqg5ofwJ-ibjJSgkygYRa1h3GXP-AoL3pPy06jx62tNmclItZ-zTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
https://lists.icgc.org/mailman/listinfo/docktesters<redir.aspx?REF=lZnt34hpVuZ7gKgfrEZOWAPUZDiRyPFz1m-d1tmRGFJmclItZ-zTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161004/8692cbda/attachment-0001.html>

From christina.yung at oicr.on.ca  Tue Oct  4 11:22:55 2016
From: christina.yung at oicr.on.ca (Christina Yung)
Date: Tue, 4 Oct 2016 11:22:55 -0400
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
 teleconference
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A05E3@exmb2.ad.oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mauP2sbM7d+Z79Y0dn94M80NXFXP5DKh0a7AD0bE1BG4g@mail.gmail.com>
 <6DDD0535-6E45-413E-8E93-60E22F6C3510@oicr.on.ca>
 <8231F9BE-D796-4F7C-9F61-8BAEA336F038@ohsu.edu>
 <8212A167-228D-4184-A707-F5DC39F8FA27@oicr.on.ca>
 <CA+dx8mYXwd30eX3en5Wj8if5CmAaXhFqaZD2hhmz8axLEG_UNw@mail.gmail.com>
 <8ECBAF05-EACF-4D5F-8C0A-36C69EAE9F99@oicr.on.ca>
 <27512884B2D81B41AAB7BB266248F240C09A05E3@exmb2.ad.oicr.on.ca>
Message-ID: <8d125501-ff3a-b2a1-de6e-326d970bc322@oicr.on.ca>

For testing BWA-mem with real data, you'll have to follow the SOP to 
unalign the data first.

https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+%28a.k.a.+PCAP+or+PAWG%29+Sequence+Submission+SOP+-+v1.0


Christina


On 16-10-04 11:04 AM, Denis Yuen wrote:
> Hi,
>
>     Brian/Dennis: apparently there is a problem with the Sanger workflow
>                     docker container because it didn?t work for Miguel
>     and Junjun,
>                     but worked on test data for Adam.
>
>     Please advise what you would like tested. (I asked Adam to test
>     ?standard?
>     dataset for Sanger workflow.
>
> I think the first useful test would be to see if the test data ( 
> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/test1.json 
> ) works in JunJun/Miguel's environments. That way we can diagnose 
> whether there is a difference in environment causing the issue or an 
> issue with the data.
>
> bwa-mem is a good suggestion since it is also a useful test. It along 
> with delly are the fastest workflows in this test, so running test 
> data through them will quickly get results.
>
>
> ------------------------------------------------------------------------
> *From:* docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org 
> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf 
> of Francis Ouellette [francis at oicr.on.ca]
> *Sent:* October 4, 2016 10:24 AM
> *To:* docktesters at lists.icgc.org
> *Cc:* kr2 at sanger.ac.uk
> *Subject:* Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH 
> teleconference
>
> Hi Miguel,
>
> I think it will be important for all to update this table:
>
> https://wiki.oicr.on.ca/pages/editpage.action?pageId=66309629 
> <redir.aspx?REF=RvfbfDV5yN05OGyCIpsC9ASxL0fR2b8LXyACsFE86VQMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9wYWdlcy9lZGl0cGFnZS5hY3Rpb24_cGFnZUlkPTY2MzA5NjI5>
>
> (in particular, Adam S, Miguel, Junjun and Christina).
>
> Other important message from Lincoln: We need to test BWA-mem workflow.
>
> Christina: do we need to ?undo? a BAM file for that?
>
> We have a lot of testing to do, and next call is in 13 days (skipping 
> next
> week because of thanksgiving holiday in Canada next Monday).
>
> Brian/Dennis: apparently there is a problem with the Sanger workflow
>                 docker container because it didn?t work for Miguel and 
> Junjun,
>                 but worked on test data for Adam.
>
> Please advise what you would like tested. (I asked Adam to test 
> ?standard?
> dataset for Sanger workflow.
>
> thank you,
>
> @bffo
>
>
> -- 
> B.F. Francis Ouellette http://oicr.on.ca/person/francis-ouellette 
> <redir.aspx?REF=JWalCiDf1UlQYmtMReruvClox9FrnvM0b6rjIyYTE2kMEFAtZ-zTCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>
>
>
>
>
>
>
>
>
>> On Oct 4, 2016, at 3:22 AM, Miguel Vazquez <miguel.vazquez at cnio.es 
>> <redir.aspx?REF=byg2Wac2qRTx271iVNlLbz5hO7X_wvcWc7QLZg6q0MMMEFAtZ-zTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> 
>> wrote:
>>
>> Hi all,
>>
>> I'm sorry to have missed the call yesterday, I got hung up with 
>> administrative things. What did I miss?
>>
>> Best
>>
>> Miguel
>>
>> On Fri, Sep 30, 2016 at 6:19 PM, Francis Ouellette 
>> <francis at oicr.on.ca 
>> <redir.aspx?REF=b_ix-JnUsfv732eXF_BkaX4DCC3h_qsh6j4ePuMgkVcMEFAtZ-zTCAFtYWlsdG86ZnJhbmNpc0BvaWNyLm9uLmNh>> 
>> wrote:
>>
>>
>>
>>     Adam,
>>
>>     Can you complete table on wiki:
>>
>>     https://wiki.oicr.on.ca/pages/editpage.action?pageId=66309629
>>     <redir.aspx?REF=RvfbfDV5yN05OGyCIpsC9ASxL0fR2b8LXyACsFE86VQMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9wYWdlcy9lZGl0cGFnZS5hY3Rpb24_cGFnZUlkPTY2MzA5NjI5>
>>
>>     Actually: Miguel and Junjun, can you also somplete that table?
>>
>>     Thank you.
>>
>>     Adam: can you try and make workflow work on one platform with the
>>     same data that Miguel and Junjun tried?
>>
>>     Thank you,
>>
>>     @bffo
>>
>>
>>
>>     -- 
>>     B.F. Francis Ouellette http://oicr.on.ca/person/francis-ouellette
>>     <redir.aspx?REF=JWalCiDf1UlQYmtMReruvClox9FrnvM0b6rjIyYTE2kMEFAtZ-zTCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>
>>
>>
>>
>>
>>>     On Sep 30, 2016, at 12:02 PM, Adam Struck <strucka at ohsu.edu
>>>     <redir.aspx?REF=fa1nJOFm8Vv6GFRRz7EoWYlt7TWBlZl1K3qZCe-mdIoMEFAtZ-zTCAFtYWlsdG86c3RydWNrYUBvaHN1LmVkdQ..>>
>>>     wrote:
>>>
>>>     I thought I should add that I've run the Sanger pipeline on the
>>>     test data in three separate environments using both CWL and WDL
>>>     descriptors.
>>>
>>>     Feel free to email me the errors you are seeing and I'll try and
>>>     debug.
>>>
>>>     Adam Struck
>>>     Scientific Programmer
>>>     Computational Biology
>>>     Oregon Health and Science University
>>>
>>>
>>>     On Sep 30, 2016, at 7:52 AM, Francis Ouellette
>>>     <francis at oicr.on.ca
>>>     <redir.aspx?REF=b_ix-JnUsfv732eXF_BkaX4DCC3h_qsh6j4ePuMgkVcMEFAtZ-zTCAFtYWlsdG86ZnJhbmNpc0BvaWNyLm9uLmNh>>
>>>     wrote:
>>>
>>>>     yes, good plan.
>>>>
>>>>     @bffo
>>>>
>>>>     -- 
>>>>     B.F. Francis Ouellette
>>>>     http://oicr.on.ca/person/francis-ouellette
>>>>     <redir.aspx?REF=JWalCiDf1UlQYmtMReruvClox9FrnvM0b6rjIyYTE2kMEFAtZ-zTCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>
>>>>
>>>>
>>>>
>>>>
>>>>>     On Sep 30, 2016, at 10:46 AM, Miguel Vazquez
>>>>>     <miguel.vazquez at cnio.es
>>>>>     <redir.aspx?REF=byg2Wac2qRTx271iVNlLbz5hO7X_wvcWc7QLZg6q0MMMEFAtZ-zTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>>
>>>>>     wrote:
>>>>>
>>>>>     Dear Francis,
>>>>>
>>>>>     I haven't had a chance to go at it again since the meeting, I
>>>>>     got a new position in Norway, but next week I will try to find
>>>>>     some time. I think I might just try another pipeline, since it
>>>>>     seems like the Sanger pipeline needs fixing. Although perhaps
>>>>>     I will first try Denis test data again and see if I can
>>>>>     reproduce the error, after which we probably should contact
>>>>>     the person in charge.
>>>>>
>>>>>     Best
>>>>>
>>>>>     M
>>>>>
>>>>>     On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette
>>>>>     <francis at oicr.on.ca
>>>>>     <redir.aspx?REF=b_ix-JnUsfv732eXF_BkaX4DCC3h_qsh6j4ePuMgkVcMEFAtZ-zTCAFtYWlsdG86ZnJhbmNpc0BvaWNyLm9uLmNh>>
>>>>>     wrote:
>>>>>
>>>>>         Dear Miguel and Junjun,
>>>>>
>>>>>         Any more attempts on testing the PCAWG sanger docker
>>>>>         container?
>>>>>
>>>>>         If you reproduce the same error, we will need to involve
>>>>>         Bryan and
>>>>>         Keiran Raine <kr2 at sanger.ac.uk
>>>>>         <redir.aspx?REF=HmUOvBPmbgPQYo1PKTUi9L9rA15ty5mW0vHB1kpDyGsMEFAtZ-zTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>>
>>>>>         (author of the container).
>>>>>
>>>>>         Let?s get this one figured out.
>>>>>
>>>>>         I am going to assume that the making of the docker
>>>>>         container is what
>>>>>         needs resolving.
>>>>>
>>>>>         Brian: We may need your input here.
>>>>>
>>>>>         Details of our current experiment should continue to be
>>>>>         posted here:
>>>>>
>>>>>         https://goo.gl/XX5BG9
>>>>>         <redir.aspx?REF=igI2BjAHq_QnGThrHZYuLFrmGAY6ELrN4zfrWPAHS6EMEFAtZ-zTCAFodHRwczovL2dvby5nbC9YWDVCRzk.>
>>>>>
>>>>>         Thank you all,
>>>>>
>>>>>         francis
>>>>>
>>>>>         PS would be good for others on list to follow directions
>>>>>         on above google
>>>>>         doc and also see if they can succeed on this workflow.
>>>>>
>>>>>         Junjun and Miguel have tried different clouds, but used
>>>>>         the sanger
>>>>>         workflow, on the same data set.
>>>>>
>>>>>         Thank you for trying to do this.
>>>>>
>>>>>         Would be good if I heard back from anybody before Monday
>>>>>         AM (tech call).
>>>>>
>>>>>         @bffo
>>>>>
>>>>>         PS I CCed Keiran, but waiting to hear back from Brian
>>>>>         before we need to involve him some more.
>>>>>         PPS Junjun/Miguel: maybe you can try the DKFZ docker as
>>>>>         well? (on the same data set).
>>>>>
>>>>>
>>>>>         -- 
>>>>>         B.F. Francis Ouellette
>>>>>         http://oicr.on.ca/person/francis-ouellette
>>>>>         <redir.aspx?REF=JWalCiDf1UlQYmtMReruvClox9FrnvM0b6rjIyYTE2kMEFAtZ-zTCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>>         Begin forwarded message:
>>>>>>
>>>>>>         *From: *Christina Yung <Christina.Yung at oicr.on.ca
>>>>>>         <redir.aspx?REF=DUr_Vi0nS5bq1udzIo1XDg_xQUW7xxyULC8Jnyv6AWkMEFAtZ-zTCAFtYWlsdG86Q2hyaXN0aW5hLll1bmdAb2ljci5vbi5jYQ..>>
>>>>>>         *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH
>>>>>>         teleconference*
>>>>>>         *Date: *September 30, 2016 at 9:19:39 AM EDT
>>>>>>         *To: *"pawg-tech (pawg-tech at lists.icgc.org
>>>>>>         <redir.aspx?REF=FFAyN_mjYJTwTKEsmGtlFobisO8q_YthM1MF-TnHRwQMEFAtZ-zTCAFtYWlsdG86cGF3Zy10ZWNoQGxpc3RzLmljZ2Mub3Jn>)"
>>>>>>         <pawg-tech at lists.icgc.org
>>>>>>         <redir.aspx?REF=FFAyN_mjYJTwTKEsmGtlFobisO8q_YthM1MF-TnHRwQMEFAtZ-zTCAFtYWlsdG86cGF3Zy10ZWNoQGxpc3RzLmljZ2Mub3Jn>>
>>>>>>
>>>>>>         Hi Everyone,
>>>>>>
>>>>>>         Below is a draft agenda for Monday?s tech call.  Please
>>>>>>         let me know if you have any agenda items for discussion.
>>>>>>
>>>>>>         https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference
>>>>>>         <redir.aspx?REF=hrZNQYyopojEt4RsxvxLpHEv17Ux_47NCqbz1tmRk14MEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi8yMDE2LTEwLTAzK1BDQVdHLVRFQ0grVGVsZWNvbmZlcmVuY2U.>
>>>>>>
>>>>>>         Have a great weekend!
>>>>>>
>>>>>>         Christina
>>>>>>
>>>>>>
>>>>>>           Call Info
>>>>>>
>>>>>>         *Usual Time      9 AM Eastern Time, Mondays*
>>>>>>
>>>>>>         *UK 0208 322 2500*
>>>>>>
>>>>>>         *Canada  1-866-220-6419*
>>>>>>
>>>>>>         *United States **1-877-420-0272*
>>>>>>
>>>>>>         *All Others        Please see attached PDF file
>>>>>>         <redir.aspx?REF=UaYtb5rD2emrUjcAbTAX6U4EAnm5qB2z5Vi0B1QGcSUMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kb3dubG9hZC9hdHRhY2htZW50cy81Nzc3Njk5MC9QQVdHLVRFQ0gtVGVsZWNvbi1JbnRlcm5hdGlvbmFsLU51bWJlcnMucGRmP3ZlcnNpb249MSZtb2RpZmljYXRpb25EYXRlPTE0MDE0NTYwMDMwMDAmYXBpPXYy> with
>>>>>>         a list of numbers for other countries.*
>>>>>>
>>>>>>         *Participant Code 5910819#*
>>>>>>
>>>>>>
>>>>>>           Agenda
>>>>>>
>>>>>>
>>>>>>         *Time*
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         *Item*
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         *Who*
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         *Attachments/Links*
>>>>>>
>>>>>>         5min
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         Welcome. Wait for group members to log on
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         Christina Yung
>>>>>>         <redir.aspx?REF=kA2MQqBR7dlLy5DVjrScx3TQ4QVUChv10r2edO1MvXYMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35jeXVuZw..>,
>>>>>>         OICR
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         10min
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         Overall status
>>>>>>
>>>>>>         	
>>>>>>         Christina Yung
>>>>>>         <redir.aspx?REF=kA2MQqBR7dlLy5DVjrScx3TQ4QVUChv10r2edO1MvXYMEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35jeXVuZw..>,
>>>>>>         OICR
>>>>>>         	
>>>>>>
>>>>>>         ?Linkouts to Most Current PCAWG Data
>>>>>>         <redir.aspx?REF=zHmEKm3hcvDkgDEOpH89c3N9M8fkzgZTpqSFWM98vu8MEFAtZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi9MaW5rb3V0cyt0bytNb3N0K0N1cnJlbnQrUENBV0crRGF0YQ..>
>>>>>>
>>>>>>         ?Report data issues to pcawg-data at icgc.org
>>>>>>         <redir.aspx?REF=6-Noonl4B1m_lxiF1GPGzqi6oNBDz29_v3oxy7JFtANmclItZ-zTCAFtYWlsdG86cGNhd2ctZGF0YUBpY2djLm9yZw..>,
>>>>>>         GNOS issue to: Help at annaisystems.com
>>>>>>         <redir.aspx?REF=Gzmx9ajvwghXqh5HUCcZ6v0iFM1uiYj0j7IAJUKnCUFmclItZ-zTCAFtYWlsdG86SGVscEBhbm5haXN5c3RlbXMuY29t>
>>>>>>
>>>>>>         ?From Boston F2F: PCAWG datasets & dependencies
>>>>>>         <redir.aspx?REF=ZtA8RU1bldwMjZYd2Jvir5vCW8Wi8SSbfwi9yy3wzGJmclItZ-zTCAFodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xVmx0TU1MTDVYRElGaXBNM3p6THFaT0dqNXotVXhJTUtMRGJzdURpRDJROC9lZGl0P3VzcD1zaGFyaW5n>
>>>>>>
>>>>>>         *Action Items*
>>>>>>
>>>>>>         1.[Joachim] Consensus SV - final?
>>>>>>
>>>>>>         2.[Jakob] Consensus SNVs - changes to "SNV near indels"
>>>>>>         annotation?
>>>>>>
>>>>>>         3.[Junjun] Specimen ID mapping for miRNA and methylation
>>>>>>
>>>>>>         4.[Jonathan & Joachim] Consensus calls for cell lines,
>>>>>>         followed by filtering
>>>>>>
>>>>>>         5.[Matthias & Gordon] Docker containers for filtering methods
>>>>>>
>>>>>>         6.[Christina] Run alignment & variant workflows on
>>>>>>         medulloblastoma sample (tumor 40x, normal 30x) from ICGC
>>>>>>         benchmark to estimate false negative rate
>>>>>>
>>>>>>         7.[Christina] Follow up with institutes interested in
>>>>>>         hosting PCAWG data long-term
>>>>>>
>>>>>>         8.[All] As per Jennifer's email on Sept 16, please
>>>>>>         provide authorship information again or for the first
>>>>>>         time using PCAWG Author Form
>>>>>>         (http://goo.gl/forms/5Wq5x5X1DK
>>>>>>         <redir.aspx?REF=fwZWD2Y3-FfW4xaNlQ8z38vmvMrRyioncvGhw7jVo4dmclItZ-zTCAFodHRwOi8vZ29vLmdsL2Zvcm1zLzVXcTV4NVgxREs.>).
>>>>>>         Save the link "Edit your response" so you can go back
>>>>>>         later to provide updates, for example about your evolving
>>>>>>         role in writing specific papers.
>>>>>>
>>>>>>         9.[All] Contribute to the manuscripts on
>>>>>>
>>>>>>         a.infrastructure:
>>>>>>         https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
>>>>>>         <redir.aspx?REF=wckzbzDo_cwIfaWHwhk6MGnEP_dXmBLJSg1KanlTcztmclItZ-zTCAFodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzEwYWxBeHJXTGRMU3loY2ktcmZOdVZIMTNyRlhDSmthWV9yemYxS0puN25jL2VkaXQ.>
>>>>>>
>>>>>>         b.variants: Paper ( https://goo.gl/g9CLsu
>>>>>>         <redir.aspx?REF=GgM9MIyerqil4SkbtVve9VhWq5JXhJpHHwIifHw8_rdmclItZ-zTCAFodHRwczovL2dvby5nbC9nOUNMc3U.> ),
>>>>>>         Supplement ( https://goo.gl/EWYh7e
>>>>>>         <redir.aspx?REF=GcFIDvGDgDLMy1HHSk5olANgg6_MhfTo90MrURSTe19mclItZ-zTCAFodHRwczovL2dvby5nbC9FV1loN2U.> )
>>>>>>
>>>>>>         c.Rogue's Gallery of Cancer Genome Sequencing Artifacts (
>>>>>>         outline
>>>>>>         <redir.aspx?REF=pm7iQUvfaoQa8LpKHESdyAQ-jrtHLoaUNKWYN28xwSxmclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kb3dubG9hZC9hdHRhY2htZW50cy82Njk1ODYwOS9Sb2d1ZXMlRTIlODAlOTklMjBHYWxsZXJ5JTIwb2YlMjBDYW5jZXIlMjBHZW5vbWUlMjBTZXF1ZW5jaW5nJTIwQXJ0ZWZhY3RzLnBkZj92ZXJzaW9uPTEmbW9kaWZpY2F0aW9uRGF0ZT0xNDY5ODAyNjQzMDAwJmFwaT12Mg..>
>>>>>>         )
>>>>>>
>>>>>>         10.[Junjun] Discuss PCAWG vs DCC glossary terms at next
>>>>>>         PCAWG-10/13 conference
>>>>>>
>>>>>>         10min
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         Status of dockerizing workflows
>>>>>>
>>>>>>         	
>>>>>>         Brian O'Connor
>>>>>>         <redir.aspx?REF=lqdpknbfWMZfMIl5cuhYuFrn58RaibSr5T65i2Hp2YJmclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35ib2Nvbm5vcg..>,
>>>>>>         UCSC
>>>>>>
>>>>>>         Gordon Saksena
>>>>>>         <redir.aspx?REF=FATJ5aNVsyapKuZeVJP0WNfGU6lEKYWFmLTAj4FxvUZmclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35nc2Frc2VuYUBicm9hZGluc3RpdHV0ZS5vcmc.>,
>>>>>>         Broad
>>>>>>
>>>>>>         Francis Ouellette
>>>>>>         <redir.aspx?REF=OcbydD_0GIik6NxC9xH6JB2NCXnK5lmCvp6kdZmz361mclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35mcmFuY2lz>,
>>>>>>         OICR
>>>>>>
>>>>>>         	
>>>>>>         *Status of PCAWG Workflow ports to Dockstore*:
>>>>>>
>>>>>>         Denis has been porting the Dockstore entries to CWL
>>>>>>         version 1.0 which is part of our effort to publish
>>>>>>         Dockstore (this doesn't affect the content of the
>>>>>>         pipelines, simply their "descriptors" which allow them to
>>>>>>         be runnable via Dockstore). Denis has also worked on
>>>>>>         testing BWA-Mem, Sanger, EMBL (which all work with CWL
>>>>>>         1.0 and Kerian's test dataset) and has fixed issues with
>>>>>>         DKFZ and is testing the latter with a real sample shortly.
>>>>>>
>>>>>>         1.BWA-Mem - Ready for testing by Francis' team
>>>>>>
>>>>>>         2.Sanger - Ready for testing by Francis' team.
>>>>>>
>>>>>>         3.EMBL - Ready for testing by Francis' team.
>>>>>>
>>>>>>         4.DKFZ - Ready for testing by Francis' team. I've
>>>>>>         exchanged emails with Manuel Ballesteros who has been
>>>>>>         testing this pipeline.
>>>>>>
>>>>>>         5.Broad - Variant calling (MuTect, dRanger,
>>>>>>         snowman), need some work, Gordan sent details previously
>>>>>>
>>>>>>         6.OxoG - Waiting for Dimitri to provide OxoG docker
>>>>>>
>>>>>>         7.Variantbam
>>>>>>
>>>>>>         8.Consensus algorithm
>>>>>>
>>>>>>         PCAWG Docker (Dockstore) Testing Working Group
>>>>>>         <redir.aspx?REF=72e3iitmYU5QItGmgrvhVzgR7Hxyr5BWG3zera6saTlmclItZ-zTCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi9QQ0FXRytEb2NrZXIrJTI4RG9ja3N0b3JlJTI5K1Rlc3RpbmcrV29ya2luZytHcm91cA..>
>>>>>>
>>>>>>         5min
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         Other business?
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         Group
>>>>>>
>>>>>>         	
>>>>>>
>>>>>>         **
>>>>>>
>>>>>>         *Christina K. Yung, PhD***Project Manager, Cancer Genome
>>>>>>         Collaboratory*Ontario Institute for Cancer Research*MaRS
>>>>>>         Centre
>>>>>>
>>>>>>         661 University Avenue, Suite 510 Toronto, Ontario,
>>>>>>         Canada M5G 0A3 Tel: 416-673-8578
>>>>>>
>>>>>>         www.oicr.on.ca
>>>>>>         <redir.aspx?REF=Mac0X_exoVEv9Md2YRbT6uLcyJVuG-i08_WXDOQY5iNmclItZ-zTCAFodHRwOi8vd3d3Lm9pY3Iub24uY2Ev>
>>>>>>
>>>>>>         This message and any attachments may contain confidential
>>>>>>         and/or privileged information for the sole use of the
>>>>>>         intended recipient. Any review or distribution by anyone
>>>>>>         other than the person for whom it was originally intended
>>>>>>         is strictly prohibited. If you have received this message
>>>>>>         in error, please contact the sender and delete all
>>>>>>         copies. Opinions, conclusions or other information
>>>>>>         contained in this message may not be that of the
>>>>>>         organization.
>>>>>>
>>>>>>         _______________________________________________ PAWG-TECH
>>>>>>         mailing list PAWG-TECH at lists.icgc.org
>>>>>>         <redir.aspx?REF=UHIopAFLFWWNUzsk0WS4_7gJkHJMRvpxgfuPr2bqdtRmclItZ-zTCAFtYWlsdG86UEFXRy1URUNIQGxpc3RzLmljZ2Mub3Jn>
>>>>>>         https://lists.icgc.org/mailman/listinfo/pawg-tech
>>>>>>         <redir.aspx?REF=KkeBLVhuCZSE1tmEWfuDQ9VAOtdsNOzpA9Ki2fu7kztmclItZ-zTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vcGF3Zy10ZWNo>
>>>>>>
>>>>>         _______________________________________________
>>>>>         docktesters mailing list docktesters at lists.icgc.org
>>>>>         <redir.aspx?REF=qqg5ofwJ-ibjJSgkygYRa1h3GXP-AoL3pPy06jx62tNmclItZ-zTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
>>>>>         https://lists.icgc.org/mailman/listinfo/docktesters
>>>>>         <redir.aspx?REF=lZnt34hpVuZ7gKgfrEZOWAPUZDiRyPFz1m-d1tmRGFJmclItZ-zTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>
>>>>>
>>>>>
>>>>     _______________________________________________ docktesters
>>>>     mailing list docktesters at lists.icgc.org
>>>>     <redir.aspx?REF=qqg5ofwJ-ibjJSgkygYRa1h3GXP-AoL3pPy06jx62tNmclItZ-zTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
>>>>     https://lists.icgc.org/mailman/listinfo/docktesters
>>>>     <redir.aspx?REF=lZnt34hpVuZ7gKgfrEZOWAPUZDiRyPFz1m-d1tmRGFJmclItZ-zTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>
>>>>
>>     _______________________________________________ docktesters
>>     mailing list docktesters at lists.icgc.org
>>     <redir.aspx?REF=qqg5ofwJ-ibjJSgkygYRa1h3GXP-AoL3pPy06jx62tNmclItZ-zTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
>>     https://lists.icgc.org/mailman/listinfo/docktesters
>>     <redir.aspx?REF=lZnt34hpVuZ7gKgfrEZOWAPUZDiRyPFz1m-d1tmRGFJmclItZ-zTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>
>>
>>
> This body part will be downloaded on demand.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161004/d111a03f/attachment-0001.html>

From miguel.vazquez at cnio.es  Tue Oct  4 11:31:19 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Tue, 4 Oct 2016 17:31:19 +0200
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A05E3@exmb2.ad.oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mauP2sbM7d+Z79Y0dn94M80NXFXP5DKh0a7AD0bE1BG4g@mail.gmail.com>
 <6DDD0535-6E45-413E-8E93-60E22F6C3510@oicr.on.ca>
 <8231F9BE-D796-4F7C-9F61-8BAEA336F038@ohsu.edu>
 <8212A167-228D-4184-A707-F5DC39F8FA27@oicr.on.ca>
 <CA+dx8mYXwd30eX3en5Wj8if5CmAaXhFqaZD2hhmz8axLEG_UNw@mail.gmail.com>
 <8ECBAF05-EACF-4D5F-8C0A-36C69EAE9F99@oicr.on.ca>
 <27512884B2D81B41AAB7BB266248F240C09A05E3@exmb2.ad.oicr.on.ca>
Message-ID: <CA+dx8mZmPNFdP5y=kKoXxoJHxt6wwUU+-DmQid8=Ti4FyViG8w@mail.gmail.com>

I'm already on it

On Tue, Oct 4, 2016 at 5:04 PM, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:

> Hi,
>
> Brian/Dennis: apparently there is a problem with the Sanger workflow
>                 docker container because it didn?t work for Miguel and
> Junjun,
>                 but worked on test data for Adam.
>
> Please advise what you would like tested. (I asked Adam to test ?standard?
> dataset for Sanger workflow.
>
> I think the first useful test would be to see if the test data (
> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/bl
> ob/develop/test1.json ) works in JunJun/Miguel's environments. That way
> we can diagnose whether there is a difference in environment causing the
> issue or an issue with the data.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161004/251113c5/attachment.html>

From miguel.vazquez at cnio.es  Wed Oct  5 04:44:10 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Wed, 5 Oct 2016 10:44:10 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
Message-ID: <CA+dx8mY9tX4gb9F4VV1PuRdvm7+XGeBwHd84sbo34_2GCheXfw@mail.gmail.com>

Hello all,

I've created a repository in

https://github.com/mikisvaz/PCAWG-Docker-Test

With scripts that can help you run the tests. They can help download
samples, prepare the Dockerstore.json files and run them. I've added an
entry in the google doc.

I've ran the Sanger on the HCC1143 (Test) data and it seemed to have
completed correctly (I updated the table). I'm in the process now of
running the same test data in the DKFZ and sample DO50311 on the Delly
workflow.

I have two standing questions:

- What are the other workflows I need to test?
- What is the bedpe file used by DKFZ and how to produce it. Denis has
pointed me to some forum threads that I have to study a bit, but it seems
that we need to run something to produce it before we can run the workflow,
and I wonder how this fits into our testing scheme. I'll read more about it
when I have a chance.

Best regards



On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca>
wrote:

> Dear Miguel and Junjun,
>
> Any more attempts on testing the PCAWG sanger docker container?
>
> If you reproduce the same error, we will need to involve Bryan and
> Keiran Raine <kr2 at sanger.ac.uk> (author of the container).
>
> Let?s get this one figured out.
>
> I am going to assume that the making of the docker container is what
> needs resolving.
>
> Brian: We may need your input here.
>
> Details of our current experiment should continue to be posted here:
>
> https://goo.gl/XX5BG9
>
> Thank you all,
>
> francis
>
> PS would be good for others on list to follow directions on above google
> doc and also see if they can succeed on this workflow.
>
> Junjun and Miguel have tried different clouds, but used the sanger
> workflow, on the same data set.
>
> Thank you for trying to do this.
>
> Would be good if I heard back from anybody before Monday AM (tech call).
>
> @bffo
>
> PS I CCed Keiran, but waiting to hear back from Brian before we need to
> involve him some more.
> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same
> data set).
>
>
> --
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette
>
>
>
>
> Begin forwarded message:
>
> *From: *Christina Yung <Christina.Yung at oicr.on.ca>
> *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH teleconference*
> *Date: *September 30, 2016 at 9:19:39 AM EDT
> *To: *"pawg-tech (pawg-tech at lists.icgc.org)" <pawg-tech at lists.icgc.org>
>
> Hi Everyone,
>
>
>
> Below is a draft agenda for Monday?s tech call.  Please let me know if you
> have any agenda items for discussion.
>
> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+
> PCAWG-TECH+Teleconference
>
>
>
> Have a great weekend!
>
> Christina
>
>
> Call Info
>
> *Usual Time            9 AM Eastern Time, Mondays*
>
> *UK                          0208 322 2500*
>
> *Canada                  1-866-220-6419*
>
> *United States        **1-877-420-0272*
>
> *All Others              Please see attached PDF file
> <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with
> a list of numbers for other countries.*
>
> *Participant Code  5910819#*
> Agenda
>
>
>
> *Time*
>
> *Item*
>
> *Who*
>
> *Attachments/Links*
>
> 5min
>
> Welcome. Wait for group members to log on
>
> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>
> 10min
>
> Overall status
> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>
> ?         Linkouts to Most Current PCAWG Data
> <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>
> ?         Report data issues to pcawg-data at icgc.org, GNOS issue to:
> Help at annaisystems.com
>
> ?         From Boston F2F: PCAWG datasets & dependencies
> <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>
> *Action Items*
>
> 1.       [Joachim] Consensus SV - final?
>
> 2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
>
> 3.       [Junjun] Specimen ID mapping for miRNA and methylation
>
> 4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by
> filtering
>
> 5.       [Matthias & Gordon] Docker containers for filtering methods
>
> 6.       [Christina] Run alignment & variant workflows on medulloblastoma
> sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false
> negative rate
>
> 7.       [Christina] Follow up with institutes interested in hosting
> PCAWG data long-term
>
> 8.       [All] As per Jennifer's email on Sept 16, please provide
> authorship information again or for the first time using PCAWG Author Form (
> http://goo.gl/forms/5Wq5x5X1DK). Save the link "Edit your response" so
> you can go back later to provide updates, for example about your evolving
> role in writing specific papers.
>
> 9.       [All] Contribute to the manuscripts on
>
> a.       infrastructure: https://docs.google.com/
> document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
>
> b.       variants: Paper ( https://goo.gl/g9CLsu ), Supplement (
> https://goo.gl/EWYh7e )
>
> c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline
> <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2>
> )
>
> 10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13
> conference
>
> 10min
>
> Status of dockerizing workflows
> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>
> Gordon Saksena
> <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>
> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
> *Status of PCAWG Workflow ports to Dockstore*:
>
> Denis has been porting the Dockstore entries to CWL version 1.0 which is
> part of our effort to publish Dockstore (this doesn't affect the content of
> the pipelines, simply their "descriptors" which allow them to be runnable
> via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL
> (which all work with CWL 1.0 and Kerian's test dataset) and has fixed
> issues with DKFZ and is testing the latter with a real sample shortly.
>
> 1.       BWA-Mem - Ready for testing by Francis' team
>
> 2.       Sanger - Ready for testing by Francis' team.
>
> 3.       EMBL - Ready for testing by Francis' team.
>
> 4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails
> with Manuel Ballesteros who has been testing this pipeline.
>
> 5.       Broad - Variant calling (MuTect, dRanger, snowman), need some
> work, Gordan sent details previously
>
> 6.       OxoG - Waiting for Dimitri to provide OxoG docker
>
> 7.       Variantbam
>
> 8.       Consensus algorithm
>
> PCAWG Docker (Dockstore) Testing Working Group
> <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>
> 5min
>
> Other business?
>
> Group
>
>
>
>
>
>
>
> *Christina K. Yung, PhD*
> Project Manager, Cancer Genome Collaboratory
>
> *Ontario Institute for Cancer Research*
> MaRS Centre
>
> 661 University Avenue, Suite 510
> Toronto, Ontario, Canada M5G 0A3
> Tel: 416-673-8578
>
> www.oicr.on.ca
>
>
>
> This message and any attachments may contain confidential and/or
> privileged information for the sole use of the intended recipient. Any
> review or distribution by anyone other than the person for whom it was
> originally intended is strictly prohibited. If you have received this
> message in error, please contact the sender and delete all copies.
> Opinions, conclusions or other information contained in this message may
> not be that of the organization.
>
>
> _______________________________________________
> PAWG-TECH mailing list
> PAWG-TECH at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/pawg-tech
>
>
>
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161005/c08713ba/attachment-0001.html>

From miguel.vazquez at cnio.es  Wed Oct  5 06:44:39 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Wed, 5 Oct 2016 12:44:39 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <CA+dx8mY9tX4gb9F4VV1PuRdvm7+XGeBwHd84sbo34_2GCheXfw@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mY9tX4gb9F4VV1PuRdvm7+XGeBwHd84sbo34_2GCheXfw@mail.gmail.com>
Message-ID: <CA+dx8mbCEqPvvZr8+75Kimzzq9dsXC90P4jVorxD41zXXoQWQA@mail.gmail.com>

Hi all,

There was en Error running the test data for the DKFZ Workflow. It appears
to have some path hardcoded somewhere:

Here are the logs:

8<---------------

+ [[ 1 == 0 ]]
+ for logfile in '${jobstateFiles[@]}'
++ cat
/mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt
++ grep -v null:
++ wc -l
++ grep :STARTED:
+ cntStarted=4
++ cat
/mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt
++ grep -v null:
++ grep :0:
++ wc -l
+ cntSuccessful=4
++ expr 4 - 4
+ cntErrornous=0
+ [[ 0 -gt 0 ]]
+ [[ 0 == 0 ]]
+ echo 'No errors found for
/mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt'
No errors found for
/mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt
+ for logfile in '${jobstateFiles[@]}'
++ cat
/mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt
++ grep -v null:
++ grep :STARTED:
++ wc -l
+ cntStarted=2
++ cat
/mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt
++ grep -v null:
++ wc -l
++ grep :0:
+ cntSuccessful=2
++ expr 2 - 2
+ cntErrornous=0
+ [[ 0 -gt 0 ]]
+ [[ 0 == 0 ]]
+ echo 'No errors found for
/mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt'
No errors found for
/mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt
There was at least one error in a job status logfile. Will exit now!
+ [[ true == true ]]
+ echo 'There was at least one error in a job status logfile. Will exit
now!'
+ exit 5
*mv: cannot stat `/mnt/datastore/resultdata/*': No such file or directory*
Result directory listing is:
Error while running job: Error collecting output for parameter
'germline_indel_vcf_gz': Did not find output file with glob pattern:
'['*.germline.indel.vcf.gz']'
[job temp5368999563481290609.cwl] completed permanentFail
Final process status is permanentFail
Workflow error, try again with --debug for more information:
  Process status is ['permanentFail']

stdout :
java.lang.RuntimeException: problems running command: cwltool --enable-dev
--non-strict --enable-net --outdir
/mnt/1TB/work/DockerTest-Miguel/tests/DKFZ/HCC1143/./datastore/launcher-7bb3a7ef-64e2-43ac-81c9-dd42e1b35f1b/outputs/
--tmpdir-prefix
/mnt/1TB/work/DockerTest-Miguel/tests/DKFZ/HCC1143/./datastore/launcher-7bb3a7ef-64e2-43ac-81c9-dd42e1b35f1b/working/
/tmp/1475650852550-0/temp5368999563481290609.cwl
/mnt/1TB/work/DockerTest-Miguel/tests/DKFZ/HCC1143/./datastore/launcher-7bb3a7ef-64e2-43ac-81c9-dd42e1b35f1b/workflow_params.json

8<---------------



The Dockerstore.json I used is as follows:

{
  "run-id": "run_id",
  "tumor-bam":
  {
    "path":"/home/ubuntu/DockerTest-Miguel/data/HCC1143/tumor.bam",
    "class":"File"
  },
  "normal-bam":
  {
    "path":"/home/ubuntu/DockerTest-Miguel/data/HCC1143/normal.bam",
    "class":"File"
  },
  "reference-gz":
  {
    "path":
"/home/ubuntu/DockerTest-Miguel/resources//dkfz-workflow-dependencies_150318_0951.tar.gz",
    "class": "File"
  },
  "delly-bedpe":
  {

"path":"/home/ubuntu/DockerTest-Miguel/resources//run_id.embl-delly_1-3-0-preFilter.20150318.somatic.sv.bedpe.txt",
    "class":"File"
  },
  "germline_indel_vcf_gz": {
    "path":
"/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.germline.indel.vcf.gz",
    "class": "File"
  },
  "somatic_snv_mnv_vcf_gz": {
    "path":
"/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.snv.mnv.vcf.gz",
    "class": "File"
  },
  "germline_snv_mnv_vcf_gz": {
    "path":
"/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.germline.snv.mnv.vcf.gz",
    "class": "File"
  },
  "somatic_cnv_tar_gz": {
    "path":
"/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.cnv.tar.gz",
    "class": "File"
  },
  "somatic_cnv_vcf_gz": {
    "path":
"/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.cnv.vcf.gz",
    "class": "File"
  },
  "somatic_indel_tar_gz": {
    "path":
"/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.indel.tar.gz",
    "class": "File"
  },
  "somatic_snv_mnv_tar_gz": {
    "path":
"/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.snv.mnv.tar.gz",
    "class": "File"
  },
  "somatic_indel_vcf_gz": {
    "path":
"/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.indel.vcf.gz",
    "class": "File"
  }
}


On Wed, Oct 5, 2016 at 10:44 AM, Miguel Vazquez <miguel.vazquez at cnio.es>
wrote:

> Hello all,
>
> I've created a repository in
>
> https://github.com/mikisvaz/PCAWG-Docker-Test
>
> With scripts that can help you run the tests. They can help download
> samples, prepare the Dockerstore.json files and run them. I've added an
> entry in the google doc.
>
> I've ran the Sanger on the HCC1143 (Test) data and it seemed to have
> completed correctly (I updated the table). I'm in the process now of
> running the same test data in the DKFZ and sample DO50311 on the Delly
> workflow.
>
> I have two standing questions:
>
> - What are the other workflows I need to test?
> - What is the bedpe file used by DKFZ and how to produce it. Denis has
> pointed me to some forum threads that I have to study a bit, but it seems
> that we need to run something to produce it before we can run the workflow,
> and I wonder how this fits into our testing scheme. I'll read more about it
> when I have a chance.
>
> Best regards
>
>
>
> On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca>
> wrote:
>
>> Dear Miguel and Junjun,
>>
>> Any more attempts on testing the PCAWG sanger docker container?
>>
>> If you reproduce the same error, we will need to involve Bryan and
>> Keiran Raine <kr2 at sanger.ac.uk> (author of the container).
>>
>> Let?s get this one figured out.
>>
>> I am going to assume that the making of the docker container is what
>> needs resolving.
>>
>> Brian: We may need your input here.
>>
>> Details of our current experiment should continue to be posted here:
>>
>> https://goo.gl/XX5BG9
>>
>> Thank you all,
>>
>> francis
>>
>> PS would be good for others on list to follow directions on above google
>> doc and also see if they can succeed on this workflow.
>>
>> Junjun and Miguel have tried different clouds, but used the sanger
>> workflow, on the same data set.
>>
>> Thank you for trying to do this.
>>
>> Would be good if I heard back from anybody before Monday AM (tech call).
>>
>> @bffo
>>
>> PS I CCed Keiran, but waiting to hear back from Brian before we need to
>> involve him some more.
>> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the
>> same data set).
>>
>>
>> --
>> B.F. Francis Ouellette          http://oicr.on.ca/person/fran
>> cis-ouellette
>>
>>
>>
>> Begin forwarded message:
>>
>> *From: *Christina Yung <Christina.Yung at oicr.on.ca>
>> *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH teleconference*
>> *Date: *September 30, 2016 at 9:19:39 AM EDT
>> *To: *"pawg-tech (pawg-tech at lists.icgc.org)" <pawg-tech at lists.icgc.org>
>>
>> Hi Everyone,
>>
>>
>>
>> Below is a draft agenda for Monday?s tech call.  Please let me know if
>> you have any agenda items for discussion.
>>
>> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-
>> TECH+Teleconference
>>
>>
>>
>> Have a great weekend!
>>
>> Christina
>>
>>
>> Call Info
>>
>> *Usual Time            9 AM Eastern Time, Mondays*
>>
>> *UK                          0208 322 2500*
>>
>> *Canada                  1-866-220-6419*
>>
>> *United States        **1-877-420-0272*
>>
>> *All Others              Please see attached PDF file
>> <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with
>> a list of numbers for other countries.*
>>
>> *Participant Code  5910819#*
>> Agenda
>>
>>
>>
>> *Time*
>>
>> *Item*
>>
>> *Who*
>>
>> *Attachments/Links*
>>
>> 5min
>>
>> Welcome. Wait for group members to log on
>>
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>>
>> 10min
>>
>> Overall status
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>>
>> ?         Linkouts to Most Current PCAWG Data
>> <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>>
>> ?         Report data issues to pcawg-data at icgc.org, GNOS issue to:
>> Help at annaisystems.com
>>
>> ?         From Boston F2F: PCAWG datasets & dependencies
>> <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>>
>> *Action Items*
>>
>> 1.       [Joachim] Consensus SV - final?
>>
>> 2.       [Jakob] Consensus SNVs - changes to "SNV near indels"
>> annotation?
>>
>> 3.       [Junjun] Specimen ID mapping for miRNA and methylation
>>
>> 4.       [Jonathan & Joachim] Consensus calls for cell lines, followed
>> by filtering
>>
>> 5.       [Matthias & Gordon] Docker containers for filtering methods
>>
>> 6.       [Christina] Run alignment & variant workflows on
>> medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to
>> estimate false negative rate
>>
>> 7.       [Christina] Follow up with institutes interested in hosting
>> PCAWG data long-term
>>
>> 8.       [All] As per Jennifer's email on Sept 16, please provide
>> authorship information again or for the first time using PCAWG Author Form (
>> http://goo.gl/forms/5Wq5x5X1DK). Save the link "Edit your response" so
>> you can go back later to provide updates, for example about your evolving
>> role in writing specific papers.
>>
>> 9.       [All] Contribute to the manuscripts on
>>
>> a.       infrastructure: https://docs.google.com/docume
>> nt/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
>>
>> b.       variants: Paper ( https://goo.gl/g9CLsu ), Supplement (
>> https://goo.gl/EWYh7e )
>>
>> c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline
>> <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2>
>> )
>>
>> 10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13
>> conference
>>
>> 10min
>>
>> Status of dockerizing workflows
>> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>>
>> Gordon Saksena
>> <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>>
>> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
>> *Status of PCAWG Workflow ports to Dockstore*:
>>
>> Denis has been porting the Dockstore entries to CWL version 1.0 which is
>> part of our effort to publish Dockstore (this doesn't affect the content of
>> the pipelines, simply their "descriptors" which allow them to be runnable
>> via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL
>> (which all work with CWL 1.0 and Kerian's test dataset) and has fixed
>> issues with DKFZ and is testing the latter with a real sample shortly.
>>
>> 1.       BWA-Mem - Ready for testing by Francis' team
>>
>> 2.       Sanger - Ready for testing by Francis' team.
>>
>> 3.       EMBL - Ready for testing by Francis' team.
>>
>> 4.       DKFZ - Ready for testing by Francis' team. I've exchanged
>> emails with Manuel Ballesteros who has been testing this pipeline.
>>
>> 5.       Broad - Variant calling (MuTect, dRanger, snowman), need some
>> work, Gordan sent details previously
>>
>> 6.       OxoG - Waiting for Dimitri to provide OxoG docker
>>
>> 7.       Variantbam
>>
>> 8.       Consensus algorithm
>>
>> PCAWG Docker (Dockstore) Testing Working Group
>> <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>>
>> 5min
>>
>> Other business?
>>
>> Group
>>
>>
>>
>>
>>
>>
>>
>> *Christina K. Yung, PhD*
>> Project Manager, Cancer Genome Collaboratory
>>
>> *Ontario Institute for Cancer Research*
>> MaRS Centre
>>
>> 661 University Avenue, Suite 510
>> Toronto, Ontario, Canada M5G 0A3
>> Tel: 416-673-8578
>>
>> www.oicr.on.ca
>>
>>
>>
>> This message and any attachments may contain confidential and/or
>> privileged information for the sole use of the intended recipient. Any
>> review or distribution by anyone other than the person for whom it was
>> originally intended is strictly prohibited. If you have received this
>> message in error, please contact the sender and delete all copies.
>> Opinions, conclusions or other information contained in this message may
>> not be that of the organization.
>>
>>
>> _______________________________________________
>> PAWG-TECH mailing list
>> PAWG-TECH at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/pawg-tech
>>
>>
>>
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161005/66cffd3c/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Wed Oct  5 11:39:53 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Wed, 5 Oct 2016 15:39:53 +0000
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for
	PCAWG-TECH	teleconference
In-Reply-To: <CA+dx8mbCEqPvvZr8+75Kimzzq9dsXC90P4jVorxD41zXXoQWQA@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mY9tX4gb9F4VV1PuRdvm7+XGeBwHd84sbo34_2GCheXfw@mail.gmail.com>,
 <CA+dx8mbCEqPvvZr8+75Kimzzq9dsXC90P4jVorxD41zXXoQWQA@mail.gmail.com>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A079F@exmb2.ad.oicr.on.ca>

Hi,
Sorry, unfortunately, the message isn't very clear. The output before " mv: cannot stat `/mnt/datastore/resultdata/*': No such file or directory"
comes from the CWL runner which basically is saying it couldn't find the output in the Docker container. The output above that is from DKFZ (Roddy rather, which is DKFZ's workflow engine) itself, the problem is actually "There was at least one error in a job status logfile. Will exit now!" but I don't see any more details
Could you attach the full output as an attachment? There may be more hints in the rest of the output.

I don't see any glaring issues with the JSON assuming that /home/ubuntu/DockerTest-Miguel/data/HCC1143/tumor.bam does in fact exist at that location.



Denis Yuen
Bioinformatics Software Developer

Ontario Institute for Cancer Research
MaRS Centre
661 University Avenue
Suite 510
Toronto, Ontario, Canada M5G 0A3

Toll-free: 1-866-678-6427
Twitter: @OICR_news
www.oicr.on.ca<http://www.oicr.on.ca/>

This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es]
Sent: October 5, 2016 6:44 AM
To: Francis Ouellette
Cc: kr2 at sanger.ac.uk; docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi all,

There was en Error running the test data for the DKFZ Workflow. It appears to have some path hardcoded somewhere:

Here are the logs:

8<---------------

+ [[ 1 == 0 ]]
+ for logfile in '${jobstateFiles[@]}'
++ cat /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt
++ grep -v null:
++ wc -l
++ grep :STARTED:
+ cntStarted=4
++ cat /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt
++ grep -v null:
++ grep :0:
++ wc -l
+ cntSuccessful=4
++ expr 4 - 4
+ cntErrornous=0
+ [[ 0 -gt 0 ]]
+ [[ 0 == 0 ]]
+ echo 'No errors found for /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt'
No errors found for /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt
+ for logfile in '${jobstateFiles[@]}'
++ cat /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt
++ grep -v null:
++ grep :STARTED:
++ wc -l
+ cntStarted=2
++ cat /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt
++ grep -v null:
++ wc -l
++ grep :0:
+ cntSuccessful=2
++ expr 2 - 2
+ cntErrornous=0
+ [[ 0 -gt 0 ]]
+ [[ 0 == 0 ]]
+ echo 'No errors found for /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt'
No errors found for /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt
There was at least one error in a job status logfile. Will exit now!
+ [[ true == true ]]
+ echo 'There was at least one error in a job status logfile. Will exit now!'
+ exit 5
mv: cannot stat `/mnt/datastore/resultdata/*': No such file or directory
Result directory listing is:
Error while running job: Error collecting output for parameter 'germline_indel_vcf_gz': Did not find output file with glob pattern: '['*.germline.indel.vcf.gz']'
[job temp5368999563481290609.cwl] completed permanentFail
Final process status is permanentFail
Workflow error, try again with --debug for more information:
  Process status is ['permanentFail']

stdout :
java.lang.RuntimeException: problems running command: cwltool --enable-dev --non-strict --enable-net --outdir /mnt/1TB/work/DockerTest-Miguel/tests/DKFZ/HCC1143/./datastore/launcher-7bb3a7ef-64e2-43ac-81c9-dd42e1b35f1b/outputs/ --tmpdir-prefix /mnt/1TB/work/DockerTest-Miguel/tests/DKFZ/HCC1143/./datastore/launcher-7bb3a7ef-64e2-43ac-81c9-dd42e1b35f1b/working/ /tmp/1475650852550-0/temp5368999563481290609.cwl /mnt/1TB/work/DockerTest-Miguel/tests/DKFZ/HCC1143/./datastore/launcher-7bb3a7ef-64e2-43ac-81c9-dd42e1b35f1b/workflow_params.json

8<---------------



The Dockerstore.json I used is as follows:

{
  "run-id": "run_id",
  "tumor-bam":
  {
    "path":"/home/ubuntu/DockerTest-Miguel/data/HCC1143/tumor.bam",
    "class":"File"
  },
  "normal-bam":
  {
    "path":"/home/ubuntu/DockerTest-Miguel/data/HCC1143/normal.bam",
    "class":"File"
  },
  "reference-gz":
  {
    "path": "/home/ubuntu/DockerTest-Miguel/resources//dkfz-workflow-dependencies_150318_0951.tar.gz",
    "class": "File"
  },
  "delly-bedpe":
  {
    "path":"/home/ubuntu/DockerTest-Miguel/resources//run_id.embl-delly_1-3-0-preFilter.20150318.somatic.sv.bedpe.txt",
    "class":"File"
  },
  "germline_indel_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.germline.indel.vcf.gz",
    "class": "File"
  },
  "somatic_snv_mnv_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.snv.mnv.vcf.gz",
    "class": "File"
  },
  "germline_snv_mnv_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.germline.snv.mnv.vcf.gz",
    "class": "File"
  },
  "somatic_cnv_tar_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.cnv.tar.gz",
    "class": "File"
  },
  "somatic_cnv_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.cnv.vcf.gz",
    "class": "File"
  },
  "somatic_indel_tar_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.indel.tar.gz",
    "class": "File"
  },
  "somatic_snv_mnv_tar_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.snv.mnv.tar.gz",
    "class": "File"
  },
  "somatic_indel_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.indel.vcf.gz",
    "class": "File"
  }
}


On Wed, Oct 5, 2016 at 10:44 AM, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=5IUDWry80XubkEugZTWcGuQkps8ZJNPQVo6lgrbaDqWChNLnNO3TCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:
Hello all,

I've created a repository in

https://github.com/mikisvaz/PCAWG-Docker-Test<redir.aspx?REF=i-MqsY2PofrcxjZ5aigqmwDZY6f5DpRZHXrm3cAzwa2ChNLnNO3TCAFodHRwczovL2dpdGh1Yi5jb20vbWlraXN2YXovUENBV0ctRG9ja2VyLVRlc3Q.>

With scripts that can help you run the tests. They can help download samples, prepare the Dockerstore.json files and run them. I've added an entry in the google doc.

I've ran the Sanger on the HCC1143 (Test) data and it seemed to have completed correctly (I updated the table). I'm in the process now of running the same test data in the DKFZ and sample DO50311 on the Delly workflow.

I have two standing questions:

- What are the other workflows I need to test?
- What is the bedpe file used by DKFZ and how to produce it. Denis has pointed me to some forum threads that I have to study a bit, but it seems that we need to run something to produce it before we can run the workflow, and I wonder how this fits into our testing scheme. I'll read more about it when I have a chance.

Best regards



On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca<redir.aspx?REF=U7z9NIG38Kv6fuzXwj31I2n_y7loGayBXIV8JVolBBOChNLnNO3TCAFtYWlsdG86ZnJhbmNpc0BvaWNyLm9uLmNh>> wrote:
Dear Miguel and Junjun,

Any more attempts on testing the PCAWG sanger docker container?

If you reproduce the same error, we will need to involve Bryan and
Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=yhC-HuZTM6d1WSOpYRRMfiQOXWBSZRkf1hgqlsMLXyGChNLnNO3TCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> (author of the container).

Let?s get this one figured out.

I am going to assume that the making of the docker container is what
needs resolving.

Brian: We may need your input here.

Details of our current experiment should continue to be posted here:

https://goo.gl/XX5BG9<redir.aspx?REF=7igzX1uZd62Y6o9Ej9EkW4lJ9ykPE4lZerDU9FE6GhSChNLnNO3TCAFodHRwczovL2dvby5nbC9YWDVCRzk.>

Thank you all,

francis

PS would be good for others on list to follow directions on above google
doc and also see if they can succeed on this workflow.

Junjun and Miguel have tried different clouds, but used the sanger
workflow, on the same data set.

Thank you for trying to do this.

Would be good if I heard back from anybody before Monday AM (tech call).

@bffo

PS I CCed Keiran, but waiting to hear back from Brian before we need to involve him some more.
PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same data set).


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette<redir.aspx?REF=Pxwkur8QByrrx54BPR8ZnsW-LiCpmdoYVVJvHScdnCyChNLnNO3TCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>



Begin forwarded message:

From: Christina Yung <Christina.Yung at oicr.on.ca<redir.aspx?REF=KgjdncjopLWnUq8b_fa0OiAC-YvTeeB4-Dsp-3eZuV2ChNLnNO3TCAFtYWlsdG86Q2hyaXN0aW5hLll1bmdAb2ljci5vbi5jYQ..>>
Subject: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Date: September 30, 2016 at 9:19:39 AM EDT
To: "pawg-tech (pawg-tech at lists.icgc.org<redir.aspx?REF=o5ZIZD_Nc_h3iRglhgW2prHXEohdtT8GIhEMSnE5zVeChNLnNO3TCAFtYWlsdG86cGF3Zy10ZWNoQGxpc3RzLmljZ2Mub3Jn>)" <pawg-tech at lists.icgc.org<redir.aspx?REF=o5ZIZD_Nc_h3iRglhgW2prHXEohdtT8GIhEMSnE5zVeChNLnNO3TCAFtYWlsdG86cGF3Zy10ZWNoQGxpc3RzLmljZ2Mub3Jn>>

Hi Everyone,

Below is a draft agenda for Monday?s tech call.  Please let me know if you have any agenda items for discussion.
https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference<redir.aspx?REF=qE3TmbT_dW1A6PSDsHeepEsaceHDvki3qimYpVT4xTCChNLnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi8yMDE2LTEwLTAzK1BDQVdHLVRFQ0grVGVsZWNvbmZlcmVuY2U.>

Have a great weekend!
Christina

Call Info

Usual Time            9 AM Eastern Time, Mondays

UK                          0208 322 2500

Canada                  1-866-220-6419

United States        1-877-420-0272

All Others              Please see attached PDF file<redir.aspx?REF=SIUqeLbTOgDtDlGzik6t3M4oAzSbNeSDTaO88C-0XFvc5tTnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kb3dubG9hZC9hdHRhY2htZW50cy81Nzc3Njk5MC9QQVdHLVRFQ0gtVGVsZWNvbi1JbnRlcm5hdGlvbmFsLU51bWJlcnMucGRmP3ZlcnNpb249MSZtb2RpZmljYXRpb25EYXRlPTE0MDE0NTYwMDMwMDAmYXBpPXYy> with a list of numbers for other countries.

Participant Code  5910819#

Agenda


Time

Item

Who

Attachments/Links

5min

Welcome. Wait for group members to log on

Christina Yung<redir.aspx?REF=Sm4URAvCh3QjgRelVyO0l12aMWiZuNw9UMlPO_P6GLLc5tTnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35jeXVuZw..>, OICR

10min

Overall status

Christina Yung<redir.aspx?REF=Sm4URAvCh3QjgRelVyO0l12aMWiZuNw9UMlPO_P6GLLc5tTnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35jeXVuZw..>, OICR

?         Linkouts to Most Current PCAWG Data<redir.aspx?REF=dRpmpKuce0Z95TyBm_B9QH8NJjHlbR8IP5yWc4Qpdajc5tTnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi9MaW5rb3V0cyt0bytNb3N0K0N1cnJlbnQrUENBV0crRGF0YQ..>
?         Report data issues to pcawg-data at icgc.org<redir.aspx?REF=AaQxsczuyAbUtth7Q14esEjN4GM5AOfy8T4z3w5_hujc5tTnNO3TCAFtYWlsdG86cGNhd2ctZGF0YUBpY2djLm9yZw..>, GNOS issue to: Help at annaisystems.com<redir.aspx?REF=h-U_xVL7FFOf_ltvWTmJFBTIoSefvqX3HGzhObwqv5vc5tTnNO3TCAFtYWlsdG86SGVscEBhbm5haXN5c3RlbXMuY29t>
?         From Boston F2F: PCAWG datasets & dependencies<redir.aspx?REF=IGB86SebqL3kYu6My_xiZvNGCCh2gmHqFCcUUqVEIRbc5tTnNO3TCAFodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xVmx0TU1MTDVYRElGaXBNM3p6THFaT0dqNXotVXhJTUtMRGJzdURpRDJROC9lZGl0P3VzcD1zaGFyaW5n>

Action Items
1.       [Joachim] Consensus SV - final?
2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
3.       [Junjun] Specimen ID mapping for miRNA and methylation
4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by filtering
5.       [Matthias & Gordon] Docker containers for filtering methods
6.       [Christina] Run alignment & variant workflows on medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false negative rate
7.       [Christina] Follow up with institutes interested in hosting PCAWG data long-term
8.       [All] As per Jennifer's email on Sept 16, please provide authorship information again or for the first time using PCAWG Author Form (http://goo.gl/forms/5Wq5x5X1DK<redir.aspx?REF=xEl6FqfsVANuILD71zL8MEHatFElqBOz_UMb6UgHLRnc5tTnNO3TCAFodHRwOi8vZ29vLmdsL2Zvcm1zLzVXcTV4NVgxREs.>). Save the link "Edit your response" so you can go back later to provide updates, for example about your evolving role in writing specific papers.
9.       [All] Contribute to the manuscripts on
a.       infrastructure: https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit<redir.aspx?REF=XJHDlzRFdZwMVj66lzEvc_Xge0nymAdKvYoK-SlZNZvc5tTnNO3TCAFodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzEwYWxBeHJXTGRMU3loY2ktcmZOdVZIMTNyRlhDSmthWV9yemYxS0puN25jL2VkaXQ.>
b.       variants: Paper ( https://goo.gl/g9CLsu<redir.aspx?REF=4SAn6WlNfAMvqfeKR9i700S_9D82LBn1fL_yLu3bTdDc5tTnNO3TCAFodHRwczovL2dvby5nbC9nOUNMc3U.> ), Supplement ( https://goo.gl/EWYh7e<redir.aspx?REF=0ZzkeE2ShdpojMBGYhTRZo0jMw2XoeoZyn3mDOzvK0zc5tTnNO3TCAFodHRwczovL2dvby5nbC9FV1loN2U.> )
c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline<redir.aspx?REF=1jlFJK6Dl3Ggt_WyghH1EBmU1l1dDcJ3rvKlSljtFZ7c5tTnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kb3dubG9hZC9hdHRhY2htZW50cy82Njk1ODYwOS9Sb2d1ZXMlRTIlODAlOTklMjBHYWxsZXJ5JTIwb2YlMjBDYW5jZXIlMjBHZW5vbWUlMjBTZXF1ZW5jaW5nJTIwQXJ0ZWZhY3RzLnBkZj92ZXJzaW9uPTEmbW9kaWZpY2F0aW9uRGF0ZT0xNDY5ODAyNjQzMDAwJmFwaT12Mg..> )
10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13 conference

10min

Status of dockerizing workflows

Brian O'Connor<redir.aspx?REF=5-XDECQF_lX-Rw1TynwLf7C7bjVYjBcuIztKkDuhtaDc5tTnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35ib2Nvbm5vcg..>, UCSC

Gordon Saksena<redir.aspx?REF=DrMwpBXnLZmVmDUKNkdZRTaN4MKwC27htKM5iMlONGHc5tTnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35nc2Frc2VuYUBicm9hZGluc3RpdHV0ZS5vcmc.>, Broad

Francis Ouellette<redir.aspx?REF=nq8h_SAX5kFXBng0g4h60wuedOH3EntWgKXEi2LKMPbc5tTnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35mcmFuY2lz>, OICR


Status of PCAWG Workflow ports to Dockstore:

Denis has been porting the Dockstore entries to CWL version 1.0 which is part of our effort to publish Dockstore (this doesn't affect the content of the pipelines, simply their "descriptors" which allow them to be runnable via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL (which all work with CWL 1.0 and Kerian's test dataset) and has fixed issues with DKFZ and is testing the latter with a real sample shortly.
1.       BWA-Mem - Ready for testing by Francis' team
2.       Sanger - Ready for testing by Francis' team.
3.       EMBL - Ready for testing by Francis' team.
4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails with Manuel Ballesteros who has been testing this pipeline.
5.       Broad - Variant calling (MuTect, dRanger, snowman), need some work, Gordan sent details previously
6.       OxoG - Waiting for Dimitri to provide OxoG docker
7.       Variantbam
8.       Consensus algorithm

PCAWG Docker (Dockstore) Testing Working Group<redir.aspx?REF=jlxURuRK5eh3tx6wimBJjGUcH8FdcKl63VEXZ03B3dLc5tTnNO3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi9QQ0FXRytEb2NrZXIrJTI4RG9ja3N0b3JlJTI5K1Rlc3RpbmcrV29ya2luZytHcm91cA..>

5min

Other business?

Group




Christina K. Yung, PhD
Project Manager, Cancer Genome Collaboratory

Ontario Institute for Cancer Research
MaRS Centre
661 University Avenue, Suite 510
Toronto, Ontario, Canada M5G 0A3
Tel: 416-673-8578
www.oicr.on.ca<redir.aspx?REF=_gqPwonahUHGDISLfJ-TzuAqQrqAxnEuIlpa0gp2oADc5tTnNO3TCAFodHRwOi8vd3d3Lm9pY3Iub24uY2Ev>

This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.

_______________________________________________
PAWG-TECH mailing list
PAWG-TECH at lists.icgc.org<redir.aspx?REF=VmnsG_Bi18L0py_WwcF4r8aor-f7eDvBqxT8bWVcSEDc5tTnNO3TCAFtYWlsdG86UEFXRy1URUNIQGxpc3RzLmljZ2Mub3Jn>
https://lists.icgc.org/mailman/listinfo/pawg-tech<redir.aspx?REF=UVufwBm-HG_63SPpFtrQk-ubGSOL99aK8XghP2AYIUHc5tTnNO3TCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vcGF3Zy10ZWNo>


_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<redir.aspx?REF=-8OABdUPHgW6LV5_8TpgPNZQouFkX7peQsntEt5EcZvc5tTnNO3TCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
https://lists.icgc.org/mailman/listinfo/docktesters<redir.aspx?REF=9AddvnI7-6OJ_s_2wh63YBrECjtfwJv_ExMGMrUqUf7c5tTnNO3TCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161005/05846d44/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Wed Oct  5 11:43:13 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Wed, 5 Oct 2016 15:43:13 +0000
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for
	PCAWG-TECH	teleconference
In-Reply-To: <CA+dx8mY9tX4gb9F4VV1PuRdvm7+XGeBwHd84sbo34_2GCheXfw@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>,
 <CA+dx8mY9tX4gb9F4VV1PuRdvm7+XGeBwHd84sbo34_2GCheXfw@mail.gmail.com>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A07B1@exmb2.ad.oicr.on.ca>

Hi,
Heads-up, is that token in https://github.com/mikisvaz/PCAWG-Docker-Test/blob/master/icgc-storage-client-1.0.19/conf/application.properties a real token?

As for workflows, I would probably go in the order bwa-mem, delly, sanger (which you have already done), dkfz

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es]
Sent: October 5, 2016 4:44 AM
To: Francis Ouellette
Cc: kr2 at sanger.ac.uk; docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hello all,

I've created a repository in

https://github.com/mikisvaz/PCAWG-Docker-Test<redir.aspx?REF=DwEE_BTpbbRUOs-4jzs6R99e7GSHbNv6G7CM-jqjXKJiRGkANu3TCAFodHRwczovL2dpdGh1Yi5jb20vbWlraXN2YXovUENBV0ctRG9ja2VyLVRlc3Q.>

With scripts that can help you run the tests. They can help download samples, prepare the Dockerstore.json files and run them. I've added an entry in the google doc.

I've ran the Sanger on the HCC1143 (Test) data and it seemed to have completed correctly (I updated the table). I'm in the process now of running the same test data in the DKFZ and sample DO50311 on the Delly workflow.

I have two standing questions:

- What are the other workflows I need to test?
- What is the bedpe file used by DKFZ and how to produce it. Denis has pointed me to some forum threads that I have to study a bit, but it seems that we need to run something to produce it before we can run the workflow, and I wonder how this fits into our testing scheme. I'll read more about it when I have a chance.

Best regards



On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca<redir.aspx?REF=Ykp1pk_j-939v485SO7ZvRgKCHD_y7ih6qgh9sxdprliRGkANu3TCAFtYWlsdG86ZnJhbmNpc0BvaWNyLm9uLmNh>> wrote:
Dear Miguel and Junjun,

Any more attempts on testing the PCAWG sanger docker container?

If you reproduce the same error, we will need to involve Bryan and
Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=sdarGB5LqxD0pGW1mFGxJOAjRDllrymFGrUVS0I_yhNiRGkANu3TCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> (author of the container).

Let?s get this one figured out.

I am going to assume that the making of the docker container is what
needs resolving.

Brian: We may need your input here.

Details of our current experiment should continue to be posted here:

https://goo.gl/XX5BG9<redir.aspx?REF=IcHK7793Lku63ffvEQkvDZDmSMBXLpeE4veIMVsE1R5iRGkANu3TCAFodHRwczovL2dvby5nbC9YWDVCRzk.>

Thank you all,

francis

PS would be good for others on list to follow directions on above google
doc and also see if they can succeed on this workflow.

Junjun and Miguel have tried different clouds, but used the sanger
workflow, on the same data set.

Thank you for trying to do this.

Would be good if I heard back from anybody before Monday AM (tech call).

@bffo

PS I CCed Keiran, but waiting to hear back from Brian before we need to involve him some more.
PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same data set).


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette<redir.aspx?REF=g0st_SL-xOm-ogkHB8RZA0pckR8AcKnZjj0SGI8I5_BiRGkANu3TCAFodHRwOi8vb2ljci5vbi5jYS9wZXJzb24vZnJhbmNpcy1vdWVsbGV0dGU.>



Begin forwarded message:

From: Christina Yung <Christina.Yung at oicr.on.ca<redir.aspx?REF=-VJycnKoIlh8qL33D7winoK5Y0DvobanYBooM72JIjZiRGkANu3TCAFtYWlsdG86Q2hyaXN0aW5hLll1bmdAb2ljci5vbi5jYQ..>>
Subject: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Date: September 30, 2016 at 9:19:39 AM EDT
To: "pawg-tech (pawg-tech at lists.icgc.org<redir.aspx?REF=3L1LSVSs_RMmtvSp5XjHahAZ8jegqomkNo0C8KcXuH1iRGkANu3TCAFtYWlsdG86cGF3Zy10ZWNoQGxpc3RzLmljZ2Mub3Jn>)" <pawg-tech at lists.icgc.org<redir.aspx?REF=3L1LSVSs_RMmtvSp5XjHahAZ8jegqomkNo0C8KcXuH1iRGkANu3TCAFtYWlsdG86cGF3Zy10ZWNoQGxpc3RzLmljZ2Mub3Jn>>

Hi Everyone,

Below is a draft agenda for Monday?s tech call.  Please let me know if you have any agenda items for discussion.
https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference<redir.aspx?REF=135ld0s1aqPNiHPlSSNB6yH5piTbSz5_-YDgDdjfgZe8pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi8yMDE2LTEwLTAzK1BDQVdHLVRFQ0grVGVsZWNvbmZlcmVuY2U.>

Have a great weekend!
Christina

Call Info

Usual Time            9 AM Eastern Time, Mondays

UK                          0208 322 2500

Canada                  1-866-220-6419

United States        1-877-420-0272

All Others              Please see attached PDF file<redir.aspx?REF=GY0dU51pAzZ6cAGe6PBPKEcU5CCbKYEHgcnPNrMfvwO8pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kb3dubG9hZC9hdHRhY2htZW50cy81Nzc3Njk5MC9QQVdHLVRFQ0gtVGVsZWNvbi1JbnRlcm5hdGlvbmFsLU51bWJlcnMucGRmP3ZlcnNpb249MSZtb2RpZmljYXRpb25EYXRlPTE0MDE0NTYwMDMwMDAmYXBpPXYy> with a list of numbers for other countries.

Participant Code  5910819#

Agenda


Time

Item

Who

Attachments/Links

5min

Welcome. Wait for group members to log on

Christina Yung<redir.aspx?REF=McninUu1GX3tIKsAgeDugDzOpKDyh4sBWAMXKlg_Hy28pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35jeXVuZw..>, OICR

10min

Overall status

Christina Yung<redir.aspx?REF=McninUu1GX3tIKsAgeDugDzOpKDyh4sBWAMXKlg_Hy28pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35jeXVuZw..>, OICR

?         Linkouts to Most Current PCAWG Data<redir.aspx?REF=CVvTfKnivSfrHwgGwbOyVQHR07pxC8B4-tzxF2n66oG8pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi9MaW5rb3V0cyt0bytNb3N0K0N1cnJlbnQrUENBV0crRGF0YQ..>
?         Report data issues to pcawg-data at icgc.org<redir.aspx?REF=BOXVT2iG2w3DXKEyiNY91Lhj3lqutDEuO-VMLGzpt_S8pmsANu3TCAFtYWlsdG86cGNhd2ctZGF0YUBpY2djLm9yZw..>, GNOS issue to: Help at annaisystems.com<redir.aspx?REF=sYH6haoWJtI7JEv3KFvvkA4YXqpSrKGPYzC-WRpWH3u8pmsANu3TCAFtYWlsdG86SGVscEBhbm5haXN5c3RlbXMuY29t>
?         From Boston F2F: PCAWG datasets & dependencies<redir.aspx?REF=v18JhTsOv_nvCIfcIu0M9K87eRwLhUojLmlKb5O27Ve8pmsANu3TCAFodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8xVmx0TU1MTDVYRElGaXBNM3p6THFaT0dqNXotVXhJTUtMRGJzdURpRDJROC9lZGl0P3VzcD1zaGFyaW5n>

Action Items
1.       [Joachim] Consensus SV - final?
2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
3.       [Junjun] Specimen ID mapping for miRNA and methylation
4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by filtering
5.       [Matthias & Gordon] Docker containers for filtering methods
6.       [Christina] Run alignment & variant workflows on medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false negative rate
7.       [Christina] Follow up with institutes interested in hosting PCAWG data long-term
8.       [All] As per Jennifer's email on Sept 16, please provide authorship information again or for the first time using PCAWG Author Form (http://goo.gl/forms/5Wq5x5X1DK<redir.aspx?REF=UCwKCEJ68smUM-5oT0mgNQB7nTHayCeDHTzoO91UfVm8pmsANu3TCAFodHRwOi8vZ29vLmdsL2Zvcm1zLzVXcTV4NVgxREs.>). Save the link "Edit your response" so you can go back later to provide updates, for example about your evolving role in writing specific papers.
9.       [All] Contribute to the manuscripts on
a.       infrastructure: https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit<redir.aspx?REF=rUgnOBRme3KDHasDyhPqnHdNNdpi6ZtCk3KP1r5XsTG8pmsANu3TCAFodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzEwYWxBeHJXTGRMU3loY2ktcmZOdVZIMTNyRlhDSmthWV9yemYxS0puN25jL2VkaXQ.>
b.       variants: Paper ( https://goo.gl/g9CLsu<redir.aspx?REF=KyTZL96L4GqoOVYtxIsxC7ZwJJlfdno7pkQ3x1tZuoe8pmsANu3TCAFodHRwczovL2dvby5nbC9nOUNMc3U.> ), Supplement ( https://goo.gl/EWYh7e<redir.aspx?REF=JDnRs5YrCC5z1b8K2PvKQe1pCFOsQrEVBSgupE_F_6q8pmsANu3TCAFodHRwczovL2dvby5nbC9FV1loN2U.> )
c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline<redir.aspx?REF=3kwSJiKn8BNoqYiNxrog1lMumN5AZlJwG2yDwiCuXaa8pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kb3dubG9hZC9hdHRhY2htZW50cy82Njk1ODYwOS9Sb2d1ZXMlRTIlODAlOTklMjBHYWxsZXJ5JTIwb2YlMjBDYW5jZXIlMjBHZW5vbWUlMjBTZXF1ZW5jaW5nJTIwQXJ0ZWZhY3RzLnBkZj92ZXJzaW9uPTEmbW9kaWZpY2F0aW9uRGF0ZT0xNDY5ODAyNjQzMDAwJmFwaT12Mg..> )
10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13 conference

10min

Status of dockerizing workflows

Brian O'Connor<redir.aspx?REF=Nww5R0wY9kXmjpz7u6WJIRQ0W21w3_LLFPMHZn9rePe8pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35ib2Nvbm5vcg..>, UCSC

Gordon Saksena<redir.aspx?REF=88sYlObg1XXC9u-ILLRVxL4iYQHqEhz6NvQreunO9Ya8pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35nc2Frc2VuYUBicm9hZGluc3RpdHV0ZS5vcmc.>, Broad

Francis Ouellette<redir.aspx?REF=xCnleBg49HMljOwCtFUjdKXBI8zmZAGO4xDDgmdhqPm8pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L35mcmFuY2lz>, OICR


Status of PCAWG Workflow ports to Dockstore:

Denis has been porting the Dockstore entries to CWL version 1.0 which is part of our effort to publish Dockstore (this doesn't affect the content of the pipelines, simply their "descriptors" which allow them to be runnable via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL (which all work with CWL 1.0 and Kerian's test dataset) and has fixed issues with DKFZ and is testing the latter with a real sample shortly.
1.       BWA-Mem - Ready for testing by Francis' team
2.       Sanger - Ready for testing by Francis' team.
3.       EMBL - Ready for testing by Francis' team.
4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails with Manuel Ballesteros who has been testing this pipeline.
5.       Broad - Variant calling (MuTect, dRanger, snowman), need some work, Gordan sent details previously
6.       OxoG - Waiting for Dimitri to provide OxoG docker
7.       Variantbam
8.       Consensus algorithm

PCAWG Docker (Dockstore) Testing Working Group<redir.aspx?REF=Yxv70U1kFNEYx3goPd27mlBrRTPaCsT8dO6N2B8emUK8pmsANu3TCAFodHRwczovL3dpa2kub2ljci5vbi5jYS9kaXNwbGF5L1BBTkNBTkNFUi9QQ0FXRytEb2NrZXIrJTI4RG9ja3N0b3JlJTI5K1Rlc3RpbmcrV29ya2luZytHcm91cA..>

5min

Other business?

Group




Christina K. Yung, PhD
Project Manager, Cancer Genome Collaboratory

Ontario Institute for Cancer Research
MaRS Centre
661 University Avenue, Suite 510
Toronto, Ontario, Canada M5G 0A3
Tel: 416-673-8578
www.oicr.on.ca<redir.aspx?REF=txLSQ43Fu-ln35lqe9_7Cn6g9uEEj27drOGh36QhGla8pmsANu3TCAFodHRwOi8vd3d3Lm9pY3Iub24uY2Ev>

This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.

_______________________________________________
PAWG-TECH mailing list
PAWG-TECH at lists.icgc.org<redir.aspx?REF=UTCvwk-A1Ez_EIW2VRB2p5UQWUtmfmjwrDJ3dDWnYZe8pmsANu3TCAFtYWlsdG86UEFXRy1URUNIQGxpc3RzLmljZ2Mub3Jn>
https://lists.icgc.org/mailman/listinfo/pawg-tech<redir.aspx?REF=yRjGww7UnWUEzFd1Y0tlwPGX4slIpI9Hg5x9EqbsAHy8pmsANu3TCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vcGF3Zy10ZWNo>


_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<redir.aspx?REF=nLibwfFTrfAk1y6I7yqYfS6Mi-zWHZl_SjF3qapLZem8pmsANu3TCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
https://lists.icgc.org/mailman/listinfo/docktesters<redir.aspx?REF=MLFiMk2JuDrVyj1jRm3h7oOFH-ZrPC29BMQusgsTH_K8pmsANu3TCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161005/5259024c/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Wed Oct  5 14:15:04 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Wed, 5 Oct 2016 18:15:04 +0000
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda
	for	PCAWG-TECH	teleconference
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A07B1@exmb2.ad.oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>,
 <CA+dx8mY9tX4gb9F4VV1PuRdvm7+XGeBwHd84sbo34_2GCheXfw@mail.gmail.com>,
 <27512884B2D81B41AAB7BB266248F240C09A07B1@exmb2.ad.oicr.on.ca>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A07F6@exmb2.ad.oicr.on.ca>

Hi,
FYI, I checked with the ICGC team, it doesn't look like a valid token, but it might be an expired token.  If it is an expired token, it might be useful to delete it from your token manager on the ICGC site to be doubly sure.

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca]
Sent: October 5, 2016 11:43 AM
To: Miguel Vazquez; Francis Ouellette
Cc: docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,
Heads-up, is that token in https://github.com/mikisvaz/PCAWG-Docker-Test/blob/master/icgc-storage-client-1.0.19/conf/application.properties<redir.aspx?REF=vLiQNVYrBBEiMoSd9Wt7fjPae2lu_9q7lzIrSaFlZIasbbhGS-3TCAFodHRwczovL2dpdGh1Yi5jb20vbWlraXN2YXovUENBV0ctRG9ja2VyLVRlc3QvYmxvYi9tYXN0ZXIvaWNnYy1zdG9yYWdlLWNsaWVudC0xLjAuMTkvY29uZi9hcHBsaWNhdGlvbi5wcm9wZXJ0aWVz> a real token?

As for workflows, I would probably go in the order bwa-mem, delly, sanger (which you have already done), dkfz

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es]
Sent: October 5, 2016 4:44 AM
To: Francis Ouellette
Cc: kr2 at sanger.ac.uk; docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hello all,

I've created a repository in

https://github.com/mikisvaz/PCAWG-Docker-Test<UrlBlockedError.aspx>

With scripts that can help you run the tests. They can help download samples, prepare the Dockerstore.json files and run them. I've added an entry in the google doc.

I've ran the Sanger on the HCC1143 (Test) data and it seemed to have completed correctly (I updated the table). I'm in the process now of running the same test data in the DKFZ and sample DO50311 on the Delly workflow.

I have two standing questions:

- What are the other workflows I need to test?
- What is the bedpe file used by DKFZ and how to produce it. Denis has pointed me to some forum threads that I have to study a bit, but it seems that we need to run something to produce it before we can run the workflow, and I wonder how this fits into our testing scheme. I'll read more about it when I have a chance.

Best regards



On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca<UrlBlockedError.aspx>> wrote:
Dear Miguel and Junjun,

Any more attempts on testing the PCAWG sanger docker container?

If you reproduce the same error, we will need to involve Bryan and
Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> (author of the container).

Let?s get this one figured out.

I am going to assume that the making of the docker container is what
needs resolving.

Brian: We may need your input here.

Details of our current experiment should continue to be posted here:

https://goo.gl/XX5BG9<UrlBlockedError.aspx>

Thank you all,

francis

PS would be good for others on list to follow directions on above google
doc and also see if they can succeed on this workflow.

Junjun and Miguel have tried different clouds, but used the sanger
workflow, on the same data set.

Thank you for trying to do this.

Would be good if I heard back from anybody before Monday AM (tech call).

@bffo

PS I CCed Keiran, but waiting to hear back from Brian before we need to involve him some more.
PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same data set).


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette<UrlBlockedError.aspx>



Begin forwarded message:

From: Christina Yung <Christina.Yung at oicr.on.ca<UrlBlockedError.aspx>>
Subject: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Date: September 30, 2016 at 9:19:39 AM EDT
To: "pawg-tech (pawg-tech at lists.icgc.org<UrlBlockedError.aspx>)" <pawg-tech at lists.icgc.org<UrlBlockedError.aspx>>

Hi Everyone,

Below is a draft agenda for Monday?s tech call.  Please let me know if you have any agenda items for discussion.
https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference<UrlBlockedError.aspx>

Have a great weekend!
Christina

Call Info

Usual Time            9 AM Eastern Time, Mondays

UK                          0208 322 2500

Canada                  1-866-220-6419

United States        1-877-420-0272

All Others              Please see attached PDF file<UrlBlockedError.aspx> with a list of numbers for other countries.

Participant Code  5910819#

Agenda


Time

Item

Who

Attachments/Links

5min

Welcome. Wait for group members to log on

Christina Yung<UrlBlockedError.aspx>, OICR

10min

Overall status

Christina Yung<UrlBlockedError.aspx>, OICR

?         Linkouts to Most Current PCAWG Data<UrlBlockedError.aspx>
?         Report data issues to pcawg-data at icgc.org<UrlBlockedError.aspx>, GNOS issue to: Help at annaisystems.com<UrlBlockedError.aspx>
?         From Boston F2F: PCAWG datasets & dependencies<UrlBlockedError.aspx>

Action Items
1.       [Joachim] Consensus SV - final?
2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
3.       [Junjun] Specimen ID mapping for miRNA and methylation
4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by filtering
5.       [Matthias & Gordon] Docker containers for filtering methods
6.       [Christina] Run alignment & variant workflows on medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false negative rate
7.       [Christina] Follow up with institutes interested in hosting PCAWG data long-term
8.       [All] As per Jennifer's email on Sept 16, please provide authorship information again or for the first time using PCAWG Author Form (http://goo.gl/forms/5Wq5x5X1DK<UrlBlockedError.aspx>). Save the link "Edit your response" so you can go back later to provide updates, for example about your evolving role in writing specific papers.
9.       [All] Contribute to the manuscripts on
a.       infrastructure: https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit<UrlBlockedError.aspx>
b.       variants: Paper ( https://goo.gl/g9CLsu<UrlBlockedError.aspx> ), Supplement ( https://goo.gl/EWYh7e<UrlBlockedError.aspx> )
c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline<UrlBlockedError.aspx> )
10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13 conference

10min

Status of dockerizing workflows

Brian O'Connor<UrlBlockedError.aspx>, UCSC

Gordon Saksena<UrlBlockedError.aspx>, Broad

Francis Ouellette<UrlBlockedError.aspx>, OICR


Status of PCAWG Workflow ports to Dockstore:

Denis has been porting the Dockstore entries to CWL version 1.0 which is part of our effort to publish Dockstore (this doesn't affect the content of the pipelines, simply their "descriptors" which allow them to be runnable via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL (which all work with CWL 1.0 and Kerian's test dataset) and has fixed issues with DKFZ and is testing the latter with a real sample shortly.
1.       BWA-Mem - Ready for testing by Francis' team
2.       Sanger - Ready for testing by Francis' team.
3.       EMBL - Ready for testing by Francis' team.
4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails with Manuel Ballesteros who has been testing this pipeline.
5.       Broad - Variant calling (MuTect, dRanger, snowman), need some work, Gordan sent details previously
6.       OxoG - Waiting for Dimitri to provide OxoG docker
7.       Variantbam
8.       Consensus algorithm

PCAWG Docker (Dockstore) Testing Working Group<UrlBlockedError.aspx>

5min

Other business?

Group




Christina K. Yung, PhD
Project Manager, Cancer Genome Collaboratory

Ontario Institute for Cancer Research
MaRS Centre
661 University Avenue, Suite 510
Toronto, Ontario, Canada M5G 0A3
Tel: 416-673-8578
www.oicr.on.ca<UrlBlockedError.aspx>

This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.

_______________________________________________
PAWG-TECH mailing list
PAWG-TECH at lists.icgc.org<UrlBlockedError.aspx>
https://lists.icgc.org/mailman/listinfo/pawg-tech<UrlBlockedError.aspx>


_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<UrlBlockedError.aspx>
https://lists.icgc.org/mailman/listinfo/docktesters<UrlBlockedError.aspx>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161005/4acab757/attachment-0001.html>

From miguel.vazquez at cnio.es  Wed Oct  5 15:56:19 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Wed, 5 Oct 2016 21:56:19 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <CA+dx8mb86JZsxvtJmpJ9aignwJCiAvShFnmi9Znz6rYhrPJQfQ@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mY9tX4gb9F4VV1PuRdvm7+XGeBwHd84sbo34_2GCheXfw@mail.gmail.com>
 <27512884B2D81B41AAB7BB266248F240C09A07B1@exmb2.ad.oicr.on.ca>
 <27512884B2D81B41AAB7BB266248F240C09A07F6@exmb2.ad.oicr.on.ca>
 <CA+dx8mb86JZsxvtJmpJ9aignwJCiAvShFnmi9Znz6rYhrPJQfQ@mail.gmail.com>
Message-ID: <CA+dx8mZ6Ug0QqaA9yua8Bz7zeNJHD-uBpOk=fzBZoO4iNenniQ@mail.gmail.com>

Yes Denis, it was my token. I uploaded by mistake and the revoked it.

On Oct 5, 2016 8:15 PM, "Denis Yuen" <Denis.Yuen at oicr.on.ca> wrote:

Hi,
FYI, I checked with the ICGC team, it doesn't look like a valid token, but
it might be an expired token.  If it is an expired token, it might be
useful to delete it from your token manager on the ICGC site to be doubly
sure.

------------------------------
*From:* docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org
[docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of
Denis Yuen [Denis.Yuen at oicr.on.ca]
*Sent:* October 5, 2016 11:43 AM
*To:* Miguel Vazquez; Francis Ouellette
*Cc:* docktesters at lists.icgc.org

*Subject:* Re: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
teleconference

Hi,
Heads-up, is that token in https://github.com/mikisvaz/
PCAWG-Docker-Test/blob/master/icgc-storage-client-1.0.19/
conf/application.properties
<http://redir.aspx?REF=vLiQNVYrBBEiMoSd9Wt7fjPae2lu_9q7lzIrSaFlZIasbbhGS-3TCAFodHRwczovL2dpdGh1Yi5jb20vbWlraXN2YXovUENBV0ctRG9ja2VyLVRlc3QvYmxvYi9tYXN0ZXIvaWNnYy1zdG9yYWdlLWNsaWVudC0xLjAuMTkvY29uZi9hcHBsaWNhdGlvbi5wcm9wZXJ0aWVz>
a real token?

As for workflows, I would probably go in the order bwa-mem, delly, sanger
(which you have already done), dkfz

------------------------------
*From:* docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org
[docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of
Miguel Vazquez [miguel.vazquez at cnio.es]
*Sent:* October 5, 2016 4:44 AM
*To:* Francis Ouellette
*Cc:* kr2 at sanger.ac.uk; docktesters at lists.icgc.org
*Subject:* Re: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
teleconference

Hello all,

I've created a repository in

https://github.com/mikisvaz/PCAWG-Docker-Test <http://UrlBlockedError.aspx>

With scripts that can help you run the tests. They can help download
samples, prepare the Dockerstore.json files and run them. I've added an
entry in the google doc.

I've ran the Sanger on the HCC1143 (Test) data and it seemed to have
completed correctly (I updated the table). I'm in the process now of
running the same test data in the DKFZ and sample DO50311 on the Delly
workflow.

I have two standing questions:

- What are the other workflows I need to test?
- What is the bedpe file used by DKFZ and how to produce it. Denis has
pointed me to some forum threads that I have to study a bit, but it seems
that we need to run something to produce it before we can run the workflow,
and I wonder how this fits into our testing scheme. I'll read more about it
when I have a chance.

Best regards



On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca
<http://UrlBlockedError.aspx>> wrote:

> Dear Miguel and Junjun,
>
> Any more attempts on testing the PCAWG sanger docker container?
>
> If you reproduce the same error, we will need to involve Bryan and
> Keiran Raine <kr2 at sanger.ac.uk <http://UrlBlockedError.aspx>> (author of
> the container).
>
> Let?s get this one figured out.
>
> I am going to assume that the making of the docker container is what
> needs resolving.
>
> Brian: We may need your input here.
>
> Details of our current experiment should continue to be posted here:
>
> https://goo.gl/XX5BG9 <http://UrlBlockedError.aspx>
>
> Thank you all,
>
> francis
>
> PS would be good for others on list to follow directions on above google
> doc and also see if they can succeed on this workflow.
>
> Junjun and Miguel have tried different clouds, but used the sanger
> workflow, on the same data set.
>
> Thank you for trying to do this.
>
> Would be good if I heard back from anybody before Monday AM (tech call).
>
> @bffo
>
> PS I CCed Keiran, but waiting to hear back from Brian before we need to
> involve him some more.
> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same
> data set).
>
>
> --
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette
> <http://UrlBlockedError.aspx>
>
>
>
> Begin forwarded message:
>
> *From: *Christina Yung <Christina.Yung at oicr.on.ca
> <http://UrlBlockedError.aspx>>
> *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH teleconference*
> *Date: *September 30, 2016 at 9:19:39 AM EDT
> *To: *"pawg-tech (pawg-tech at lists.icgc.org <http://UrlBlockedError.aspx>)"
> <pawg-tech at lists.icgc.org <http://UrlBlockedError.aspx>>
>
> Hi Everyone,
>
>
>
> Below is a draft agenda for Monday?s tech call.  Please let me know if you
> have any agenda items for discussion.
>
> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-
> TECH+Teleconference <http://UrlBlockedError.aspx>
>
>
>
> Have a great weekend!
>
> Christina
>
>
> Call Info
>
> *Usual Time            9 AM Eastern Time, Mondays*
>
> *UK                          0208 322 2500*
>
> *Canada                  1-866-220-6419*
>
> *United States        **1-877-420-0272*
>
> *All Others              Please see attached PDF file
> <http://UrlBlockedError.aspx> with a list of numbers for other countries.*
>
> *Participant Code  5910819#*
> Agenda
>
>
>
> *Time*
>
> *Item*
>
> *Who*
>
> *Attachments/Links*
>
> 5min
>
> Welcome. Wait for group members to log on
>
> Christina Yung <http://UrlBlockedError.aspx>, OICR
>
> 10min
>
> Overall status
> Christina Yung <http://UrlBlockedError.aspx>, OICR
>
> ?         Linkouts to Most Current PCAWG Data
> <http://UrlBlockedError.aspx>
>
> ?         Report data issues to pcawg-data at icgc.org
> <http://UrlBlockedError.aspx>, GNOS issue to: Help at annaisystems.com
> <http://UrlBlockedError.aspx>
>
> ?         From Boston F2F: PCAWG datasets & dependencies
> <http://UrlBlockedError.aspx>
>
> *Action Items*
>
> 1.       [Joachim] Consensus SV - final?
>
> 2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
>
> 3.       [Junjun] Specimen ID mapping for miRNA and methylation
>
> 4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by
> filtering
>
> 5.       [Matthias & Gordon] Docker containers for filtering methods
>
> 6.       [Christina] Run alignment & variant workflows on medulloblastoma
> sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false
> negative rate
>
> 7.       [Christina] Follow up with institutes interested in hosting
> PCAWG data long-term
>
> 8.       [All] As per Jennifer's email on Sept 16, please provide
> authorship information again or for the first time using PCAWG Author Form (
> http://goo.gl/forms/5Wq5x5X1DK <http://UrlBlockedError.aspx>). Save the
> link "Edit your response" so you can go back later to provide updates, for
> example about your evolving role in writing specific papers.
>
> 9.       [All] Contribute to the manuscripts on
>
> a.       infrastructure: https://docs.google.com/docume
> nt/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
> <http://UrlBlockedError.aspx>
>
> b.       variants: Paper ( https://goo.gl/g9CLsu
> <http://UrlBlockedError.aspx> ), Supplement ( https://goo.gl/EWYh7e
> <http://UrlBlockedError.aspx> )
>
> c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline
> <http://UrlBlockedError.aspx> )
>
> 10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13
> conference
>
> 10min
>
> Status of dockerizing workflows
> Brian O'Connor <http://UrlBlockedError.aspx>, UCSC
>
> Gordon Saksena <http://UrlBlockedError.aspx>, Broad
>
> Francis Ouellette <http://UrlBlockedError.aspx>, OICR
> *Status of PCAWG Workflow ports to Dockstore*:
>
> Denis has been porting the Dockstore entries to CWL version 1.0 which is
> part of our effort to publish Dockstore (this doesn't affect the content of
> the pipelines, simply their "descriptors" which allow them to be runnable
> via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL
> (which all work with CWL 1.0 and Kerian's test dataset) and has fixed
> issues with DKFZ and is testing the latter with a real sample shortly.
>
> 1.       BWA-Mem - Ready for testing by Francis' team
>
> 2.       Sanger - Ready for testing by Francis' team.
>
> 3.       EMBL - Ready for testing by Francis' team.
>
> 4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails
> with Manuel Ballesteros who has been testing this pipeline.
>
> 5.       Broad - Variant calling (MuTect, dRanger, snowman), need some
> work, Gordan sent details previously
>
> 6.       OxoG - Waiting for Dimitri to provide OxoG docker
>
> 7.       Variantbam
>
> 8.       Consensus algorithm
>
> PCAWG Docker (Dockstore) Testing Working Group
> <http://UrlBlockedError.aspx>
>
> 5min
>
> Other business?
>
> Group
>
>
>
>
>
>
>
> *Christina K. Yung, PhD*
> Project Manager, Cancer Genome Collaboratory
>
> *Ontario Institute for Cancer Research*
> MaRS Centre
>
> 661 University Avenue, Suite 510
> Toronto, Ontario, Canada M5G 0A3
> Tel: 416-673-8578
>
> www.oicr.on.ca <http://UrlBlockedError.aspx>
>
>
>
> This message and any attachments may contain confidential and/or
> privileged information for the sole use of the intended recipient. Any
> review or distribution by anyone other than the person for whom it was
> originally intended is strictly prohibited. If you have received this
> message in error, please contact the sender and delete all copies.
> Opinions, conclusions or other information contained in this message may
> not be that of the organization.
>
>
> _______________________________________________
> PAWG-TECH mailing list
> PAWG-TECH at lists.icgc.org <http://UrlBlockedError.aspx>
> https://lists.icgc.org/mailman/listinfo/pawg-tech
> <http://UrlBlockedError.aspx>
>
>
>
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org <http://UrlBlockedError.aspx>
> https://lists.icgc.org/mailman/listinfo/docktesters
> <http://UrlBlockedError.aspx>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161005/d68806e9/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Thu Oct  6 10:20:21 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Thu, 6 Oct 2016 14:20:21 +0000
Subject: [DOCKTESTERS] [Is-Suspect-Spam] RE: Fwd: [PAWG-TECH] Draft agenda
	for PCAWG-TECH teleconference
In-Reply-To: <CA+dx8mYPUU3oyqMObkUmRUp7GELqJyLQB-e0V66F_+2xAf0AFQ@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mY9tX4gb9F4VV1PuRdvm7+XGeBwHd84sbo34_2GCheXfw@mail.gmail.com>
 <CA+dx8mbCEqPvvZr8+75Kimzzq9dsXC90P4jVorxD41zXXoQWQA@mail.gmail.com>
 <27512884B2D81B41AAB7BB266248F240C09A079F@exmb2.ad.oicr.on.ca>,
 <CA+dx8mYPUU3oyqMObkUmRUp7GELqJyLQB-e0V66F_+2xAf0AFQ@mail.gmail.com>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A083C@exmb2.ad.oicr.on.ca>

Hi,
Ah sorry, my mistake, I misread your output. The DKFZ workflow unlike the others, doesn't actually function with test data. You can only use it to test whether the workflow starts up properly.
https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows#running-with-the-dockstore-command-line


I've checked in a params.json Dockstore-BTCA-SG.json that does function but requires real data. Sorry for that.


________________________________
From: mikisvaz at gmail.com [mikisvaz at gmail.com] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es]
Sent: October 6, 2016 2:44 AM
To: Denis Yuen
Subject: Re: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Denis,

This are all the logs I could salvage, unfortunately I didn't caputure STDERR and got this from the screen buffer.

It seems like there are some folders mentioned like /mnt/datastore/testdata/ where the string 'testdata' is a bit suspicious. Perhaps greping for that in the source code or scripts can reveal if there is something hardcoded?

If you'd like I can run the test again, tell you how to reproduce it using the scripts I made (should be pretty quick to setup for this data), or give you access to the instance I'm running

Miguel

On Wed, Oct 5, 2016 at 5:39 PM, Denis Yuen <Denis.Yuen at oicr.on.ca<redir.aspx?REF=lhnSDue0czOITPQm4lMaAhncXN9MI2jkNAxYWeaKuI2i0J5t8-3TCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:
Hi,
Sorry, unfortunately, the message isn't very clear. The output before " mv: cannot stat `/mnt/datastore/resultdata/*': No such file or directory"
comes from the CWL runner which basically is saying it couldn't find the output in the Docker container. The output above that is from DKFZ (Roddy rather, which is DKFZ's workflow engine) itself, the problem is actually "There was at least one error in a job status logfile. Will exit now!" but I don't see any more details
Could you attach the full output as an attachment? There may be more hints in the rest of the output.

I don't see any glaring issues with the JSON assuming that /home/ubuntu/DockerTest-Miguel/data/HCC1143/tumor.bam does in fact exist at that location.



Denis Yuen
Bioinformatics Software Developer

Ontario Institute for Cancer Research
MaRS Centre
661 University Avenue
Suite 510
Toronto, Ontario, Canada M5G 0A3

Toll-free: 1-866-678-6427
Twitter: @OICR_news
www.oicr.on.ca<redir.aspx?REF=ShzqTwchSqGfL6rMLK7q7i4Gz5zffmlQm0Mp1K81LDei0J5t8-3TCAFodHRwOi8vd3d3Lm9pY3Iub24uY2Ev>

This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=0cTbihRmBm5nYx2ArDc8w6YQ_gV6KxX1FKwjNSNa6h6i0J5t8-3TCAFtYWlsdG86b2ljci5vbi5jYUBsaXN0cy5pY2djLm9yZw..> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=0cTbihRmBm5nYx2ArDc8w6YQ_gV6KxX1FKwjNSNa6h6i0J5t8-3TCAFtYWlsdG86b2ljci5vbi5jYUBsaXN0cy5pY2djLm9yZw..>] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es<redir.aspx?REF=2ESFpJrnckWzNFHGUOzP1hbdkuIhV3CygRBGWg1uvaii0J5t8-3TCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>]
Sent: October 5, 2016 6:44 AM
To: Francis Ouellette
Cc: kr2 at sanger.ac.uk<redir.aspx?REF=pzUIIGD6fJtnrxSIBHoi4sEdbTeYhoh92LxQ5IxIJECi0J5t8-3TCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>; docktesters at lists.icgc.org<redir.aspx?REF=TLn1VHXKwZmB-HvfN-JMphCUypjQWxiPdvKh5UrXH3qi0J5t8-3TCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi all,

There was en Error running the test data for the DKFZ Workflow. It appears to have some path hardcoded somewhere:

Here are the logs:

8<---------------

+ [[ 1 == 0 ]]
+ for logfile in '${jobstateFiles[@]}'
++ cat /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt
++ grep -v null:
++ wc -l
++ grep :STARTED:
+ cntStarted=4
++ cat /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt
++ grep -v null:
++ grep :0:
++ wc -l
+ cntSuccessful=4
++ expr 4 - 4
+ cntErrornous=0
+ [[ 0 -gt 0 ]]
+ [[ 0 == 0 ]]
+ echo 'No errors found for /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt'
No errors found for /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_071931526_roddy_snvCalling/jobStateLogfile.txt
+ for logfile in '${jobstateFiles[@]}'
++ cat /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt
++ grep -v null:
++ grep :STARTED:
++ wc -l
+ cntStarted=2
++ cat /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt
++ grep -v null:
++ wc -l
++ grep :0:
+ cntSuccessful=2
++ expr 2 - 2
+ cntErrornous=0
+ [[ 0 -gt 0 ]]
+ [[ 0 == 0 ]]
+ echo 'No errors found for /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt'
No errors found for /mnt/datastore/testdata/run_id/roddyExecutionStore/exec_161005_072436413_roddy_indelCalling/jobStateLogfile.txt
There was at least one error in a job status logfile. Will exit now!
+ [[ true == true ]]
+ echo 'There was at least one error in a job status logfile. Will exit now!'
+ exit 5
mv: cannot stat `/mnt/datastore/resultdata/*': No such file or directory
Result directory listing is:
Error while running job: Error collecting output for parameter 'germline_indel_vcf_gz': Did not find output file with glob pattern: '['*.germline.indel.vcf.gz']'
[job temp5368999563481290609.cwl] completed permanentFail
Final process status is permanentFail
Workflow error, try again with --debug for more information:
  Process status is ['permanentFail']

stdout :
java.lang.RuntimeException: problems running command: cwltool --enable-dev --non-strict --enable-net --outdir /mnt/1TB/work/DockerTest-Miguel/tests/DKFZ/HCC1143/./datastore/launcher-7bb3a7ef-64e2-43ac-81c9-dd42e1b35f1b/outputs/ --tmpdir-prefix /mnt/1TB/work/DockerTest-Miguel/tests/DKFZ/HCC1143/./datastore/launcher-7bb3a7ef-64e2-43ac-81c9-dd42e1b35f1b/working/ /tmp/1475650852550-0/temp5368999563481290609.cwl /mnt/1TB/work/DockerTest-Miguel/tests/DKFZ/HCC1143/./datastore/launcher-7bb3a7ef-64e2-43ac-81c9-dd42e1b35f1b/workflow_params.json

8<---------------



The Dockerstore.json I used is as follows:

{
  "run-id": "run_id",
  "tumor-bam":
  {
    "path":"/home/ubuntu/DockerTest-Miguel/data/HCC1143/tumor.bam",
    "class":"File"
  },
  "normal-bam":
  {
    "path":"/home/ubuntu/DockerTest-Miguel/data/HCC1143/normal.bam",
    "class":"File"
  },
  "reference-gz":
  {
    "path": "/home/ubuntu/DockerTest-Miguel/resources//dkfz-workflow-dependencies_150318_0951.tar.gz",
    "class": "File"
  },
  "delly-bedpe":
  {
    "path":"/home/ubuntu/DockerTest-Miguel/resources//run_id.embl-delly_1-3-0-preFilter.20150318.somatic.sv<redir.aspx?REF=9-pBmawej7YC3fftzFETPhTBMhx8NhB_w01k5W2Ie5ai0J5t8-3TCAFodHRwOi8vcHJlRmlsdGVyLjIwMTUwMzE4LnNvbWF0aWMuc3Y.>.bedpe.txt",
    "class":"File"
  },
  "germline_indel_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.germline.indel.vcf.gz",
    "class": "File"
  },
  "somatic_snv_mnv_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.snv.mnv.vcf.gz",
    "class": "File"
  },
  "germline_snv_mnv_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.germline.snv.mnv.vcf.gz",
    "class": "File"
  },
  "somatic_cnv_tar_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.cnv.tar.gz",
    "class": "File"
  },
  "somatic_cnv_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.cnv.vcf.gz",
    "class": "File"
  },
  "somatic_indel_tar_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.indel.tar.gz",
    "class": "File"
  },
  "somatic_snv_mnv_tar_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.snv.mnv.tar.gz",
    "class": "File"
  },
  "somatic_indel_vcf_gz": {
    "path": "/home/ubuntu/DockerTest-Miguel/tests/DKFZ/HCC1143//output//HCC1143.somatic.indel.vcf.gz",
    "class": "File"
  }
}


On Wed, Oct 5, 2016 at 10:44 AM, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=YTy_0vOWaRSZ-b6aIx2MvecrSd1TpWDHxGwl319Jvxii0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9NUlVRFdyeTgwWHVia0V1Z1pUV2NHdVFrcHM4WkpOUFFWbzZsZ3JiYURxV0NoTkxuTk8zVENBRnRZV2xzZEc4NmJXbG5kV1ZzTG5aaGVuRjFaWHBBWTI1cGJ5NWxjdy4u>> wrote:
Hello all,

I've created a repository in

https://github.com/mikisvaz/PCAWG-Docker-Test<redir.aspx?REF=Fs60HzB4O1SP8LYtvp4N-DpL_rYrQUaoMqeOUREBWJGi0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9aS1NcXNZMlBvZnJjeGpaNWFpZ3Ftd0RaWTZmNURwUlpIWHJtM2NBendhMkNoTkxuTk8zVENBRm9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZiV2xyYVhOMllYb3ZVRU5CVjBjdFJHOWphMlZ5TFZSbGMzUS4.>

With scripts that can help you run the tests. They can help download samples, prepare the Dockerstore.json files and run them. I've added an entry in the google doc.

I've ran the Sanger on the HCC1143 (Test) data and it seemed to have completed correctly (I updated the table). I'm in the process now of running the same test data in the DKFZ and sample DO50311 on the Delly workflow.

I have two standing questions:

- What are the other workflows I need to test?
- What is the bedpe file used by DKFZ and how to produce it. Denis has pointed me to some forum threads that I have to study a bit, but it seems that we need to run something to produce it before we can run the workflow, and I wonder how this fits into our testing scheme. I'll read more about it when I have a chance.

Best regards



On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca<redir.aspx?REF=GPkdnuT2utrprhS2Aa6JBgqXO2sOsutVGm37AIUDcBmi0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9VTd6OU5JRzM4S3Y2ZnV6WHdqMzFJMm5feTdsb0dheUJYSVY4SlZvbEJCT0NoTkxuTk8zVENBRnRZV2xzZEc4NlpuSmhibU5wYzBCdmFXTnlMbTl1TG1OaA..>> wrote:
Dear Miguel and Junjun,

Any more attempts on testing the PCAWG sanger docker container?

If you reproduce the same error, we will need to involve Bryan and
Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=NYd4JSEke0TBT0JOZLni70aiJQWj0Cx2Q5YAc6ZGYBSi0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9eWhDLUh1WlRNNmQxV1NPcFlSUk1maVFPWFdCU1pSa2YxaGdxbHNNTFh5R0NoTkxuTk8zVENBRnRZV2xzZEc4NmEzSXlRSE5oYm1kbGNpNWhZeTUxYXcuLg..>> (author of the container).

Let?s get this one figured out.

I am going to assume that the making of the docker container is what
needs resolving.

Brian: We may need your input here.

Details of our current experiment should continue to be posted here:

https://goo.gl/XX5BG9<redir.aspx?REF=x6x16BvTZtdqNTDNsuFGOvdEXMmAIf-TTC0g0aalWPei0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9N2lnelgxdVpkNjJZNm85RWo5RWtXNGxKOXlrUEU0bFplckRVOUZFNkdoU0NoTkxuTk8zVENBRm9kSFJ3Y3pvdkwyZHZieTVuYkM5WVdEVkNSemsu>

Thank you all,

francis

PS would be good for others on list to follow directions on above google
doc and also see if they can succeed on this workflow.

Junjun and Miguel have tried different clouds, but used the sanger
workflow, on the same data set.

Thank you for trying to do this.

Would be good if I heard back from anybody before Monday AM (tech call).

@bffo

PS I CCed Keiran, but waiting to hear back from Brian before we need to involve him some more.
PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same data set).


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette<redir.aspx?REF=-UqAIky0pUZC6l-ihJm4s34ZriHR9mvfHNrnzMPURTui0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9UHh3a3VyOFFCeXJyeDU0QlBSOFpuc1ctTGlDcG1kb1lWVkp2SFNjZG5DeUNoTkxuTk8zVENBRm9kSFJ3T2k4dmIybGpjaTV2Ymk1allTOXdaWEp6YjI0dlpuSmhibU5wY3kxdmRXVnNiR1YwZEdVLg..>



Begin forwarded message:

From: Christina Yung <Christina.Yung at oicr.on.ca<redir.aspx?REF=Om4Su1cb7PrSuZx6Q8RYYa4ItVaot7ZI2Y49mSouCKCi0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9S2dqZG5jam9wTFduVXE4Yl9mYTBPaUFDLVl2VGVlQjQtRHNwLTNlWnVWMkNoTkxuTk8zVENBRnRZV2xzZEc4NlEyaHlhWE4wYVc1aExsbDFibWRBYjJsamNpNXZiaTVqWVEuLg..>>
Subject: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Date: September 30, 2016 at 9:19:39 AM EDT
To: "pawg-tech (pawg-tech at lists.icgc.org<redir.aspx?REF=p7m3PixC3oMTkXe9OUrV2U6NfiDAirzJjJnFZrihs_ui0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9bzVaSVpEX05jX2gzaVJnbGhnVzJwckhYRW9oZHRUOEdJaEVNU25FNXpWZUNoTkxuTk8zVENBRnRZV2xzZEc4NmNHRjNaeTEwWldOb1FHeHBjM1J6TG1saloyTXViM0pu>)" <pawg-tech at lists.icgc.org<redir.aspx?REF=p7m3PixC3oMTkXe9OUrV2U6NfiDAirzJjJnFZrihs_ui0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9bzVaSVpEX05jX2gzaVJnbGhnVzJwckhYRW9oZHRUOEdJaEVNU25FNXpWZUNoTkxuTk8zVENBRnRZV2xzZEc4NmNHRjNaeTEwWldOb1FHeHBjM1J6TG1saloyTXViM0pu>>

Hi Everyone,

Below is a draft agenda for Monday?s tech call.  Please let me know if you have any agenda items for discussion.
https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference<redir.aspx?REF=6kk0yO9nE_NaDzs36xjrIRKbP-kr9Se-AUj-3lgPbuai0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9cUUzVG1iVF9kVzFBNlBTRHNIZWVwRXNhY2VIRHZraTNxaW1ZcFZUNHhUQ0NoTkxuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2FYTndiR0Y1TDFCQlRrTkJUa05GVWk4eU1ERTJMVEV3TFRBeksxQkRRVmRITFZSRlEwZ3JWR1ZzWldOdmJtWmxjbVZ1WTJVLg..>

Have a great weekend!
Christina

Call Info

Usual Time            9 AM Eastern Time, Mondays

UK                          0208 322 2500

Canada                  1-866-220-6419

United States        1-877-420-0272

All Others              Please see attached PDF file<redir.aspx?REF=ptUWOV70F_qqrBB3hwBonzKPWh_9qcS20FoWURwi2oWi0J5t8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9U0lVcWVMYlRPZ0R0RGxHemlrNnQzTTRvQXpTYk5lU0RUYU84OEMtMFhGdmM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2IzZHViRzloWkM5aGRIUmhZMmh0Wlc1MGN5ODFOemMzTmprNU1DOVFRVmRITFZSRlEwZ3RWR1ZzWldOdmJpMUpiblJsY201aGRHbHZibUZzTFU1MWJXSmxjbk11Y0dSbVAzWmxjbk5wYjI0OU1TWnRiMlJwWm1sallYUnBiMjVFWVhSbFBURTBNREUwTlRZd01ETXdNREFtWVhCcFBYWXk.> with a list of numbers for other countries.

Participant Code  5910819#

Agenda


Time

Item

Who

Attachments/Links

5min

Welcome. Wait for group members to log on

Christina Yung<redir.aspx?REF=rllEz3cbfdqMi2tglgAu--ilauIeE-aapgBKhHeGh2T8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9U200VVJBdkNoM1FqZ1JlbFZ5TzBsMTJhTVdpWnVOdzlVTWxQT19QNkdMTGM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2FYTndiR0Y1TDM1amVYVnVady4u>, OICR

10min

Overall status

Christina Yung<redir.aspx?REF=rllEz3cbfdqMi2tglgAu--ilauIeE-aapgBKhHeGh2T8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9U200VVJBdkNoM1FqZ1JlbFZ5TzBsMTJhTVdpWnVOdzlVTWxQT19QNkdMTGM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2FYTndiR0Y1TDM1amVYVnVady4u>, OICR

?         Linkouts to Most Current PCAWG Data<redir.aspx?REF=FG-8zMu_9roTaLBd12w2XLsakqfdg6YzVjdq4GBgR6D8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9ZFJwbXBLdWNlMFo5NVR5Qm1fQjlRSDhOSmpIbGJSOElQNXlXYzRRcGRhamM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2FYTndiR0Y1TDFCQlRrTkJUa05GVWk5TWFXNXJiM1YwY3l0MGJ5dE5iM04wSzBOMWNuSmxiblFyVUVOQlYwY3JSR0YwWVEuLg..>
?         Report data issues to pcawg-data at icgc.org<redir.aspx?REF=jWttEPtkoUztVjKljJZh3DWWLepyX4XdHkm1m5dHlj78MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9QWFReHNjenV5QWJVdHRoN1ExNGVzRWpONEdNNUFPZnk4VDR6M3c1X2h1amM1dFRuTk8zVENBRnRZV2xzZEc4NmNHTmhkMmN0WkdGMFlVQnBZMmRqTG05eVp3Li4.>, GNOS issue to: Help at annaisystems.com<redir.aspx?REF=regoYz6t85SyCdztKf42LdFpG5JEz8pTSgdqPwWQFLr8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9aC1VX3hWTDdGRk9mX2x0dldUbUpGQlRJb1NlZnZxWDNIR3poT2J3cXY1dmM1dFRuTk8zVENBRnRZV2xzZEc4NlNHVnNjRUJoYm01aGFYTjVjM1JsYlhNdVkyOXQ.>
?         From Boston F2F: PCAWG datasets & dependencies<redir.aspx?REF=4SkhNG3nx0Y0mpaRPbBARGJd3j0HaevCXTO6H9XjAvf8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9SUdCODZTZWJxTDNrWXU2TXlfeGladk5HQ0NoMmdtSHFGQ2NVVXFWRUlSYmM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwyUnZZM011WjI5dloyeGxMbU52YlM5emNISmxZV1J6YUdWbGRITXZaQzh4Vm14MFRVMU1URFZZUkVsR2FYQk5NM3A2VEhGYVQwZHFOWG90VlhoSlRVdE1SR0p6ZFVScFJESlJPQzlsWkdsMFAzVnpjRDF6YUdGeWFXNW4.>

Action Items
1.       [Joachim] Consensus SV - final?
2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
3.       [Junjun] Specimen ID mapping for miRNA and methylation
4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by filtering
5.       [Matthias & Gordon] Docker containers for filtering methods
6.       [Christina] Run alignment & variant workflows on medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false negative rate
7.       [Christina] Follow up with institutes interested in hosting PCAWG data long-term
8.       [All] As per Jennifer's email on Sept 16, please provide authorship information again or for the first time using PCAWG Author Form (http://goo.gl/forms/5Wq5x5X1DK<redir.aspx?REF=knlOEUR58TKbwJay_FionRDDM3nOkGcPE4gLKOVhM3z8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9eEVsNkZxZnNWQU51SUxENzF6TDhNRUhhdEZFbHFCT3pfVU1iNlVnSExSbmM1dFRuTk8zVENBRm9kSFJ3T2k4dloyOXZMbWRzTDJadmNtMXpMelZYY1RWNE5WZ3hSRXMu>). Save the link "Edit your response" so you can go back later to provide updates, for example about your evolving role in writing specific papers.
9.       [All] Contribute to the manuscripts on
a.       infrastructure: https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit<redir.aspx?REF=QTyuTzV0IFNc2YBuf6LvUvHU6Ogaogg48vWuLo0lRj38MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9WEpIRGx6UkZkWndNVmo2Nmx6RXZjX1hnZTBueW1BZEt2WW9LLVNsWk5admM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwyUnZZM011WjI5dloyeGxMbU52YlM5a2IyTjFiV1Z1ZEM5a0x6RXdZV3hCZUhKWFRHUk1VM2xvWTJrdGNtWk9kVlpJTVROeVJsaERTbXRoV1Y5eWVtWXhTMHB1TjI1akwyVmthWFEu>
b.       variants: Paper ( https://goo.gl/g9CLsu<redir.aspx?REF=gbcdANBdYVgFXoh7eo99UHtKuzYPNBMbsI15s-27-Bj8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9NFNBbjZXbE5mQU12cWZlS1I5aTcwMFNfOUQ4MkxCbjFmTF95THUzYlRkRGM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwyZHZieTVuYkM5bk9VTk1jM1Uu> ), Supplement ( https://goo.gl/EWYh7e<redir.aspx?REF=g7aKWjeIkb3tn85TUf32boSKRMlobXvpDQgZTHtQfk_8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9MFp6a2VFMlNoZHBvak1CR1loVFJabzBqTXcyWG9lb1p5bjNtRE96dkswemM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwyZHZieTVuYkM5RlYxbG9OMlUu> )
c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline<redir.aspx?REF=phAw6exdwyOi-JlNTjj24szK5zk24B3EqT2Mp8FR9Dr8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9MWpsRkpLNkRsM0dndF9XeWdoSDFFQm1VMWwxZERjSjNydktsU2xqdEZaN2M1dFRuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2IzZHViRzloWkM5aGRIUmhZMmh0Wlc1MGN5ODJOamsxT0RZd09TOVNiMmQxWlhNbFJUSWxPREFsT1RrbE1qQkhZV3hzWlhKNUpUSXdiMllsTWpCRFlXNWpaWElsTWpCSFpXNXZiV1VsTWpCVFpYRjFaVzVqYVc1bkpUSXdRWEowWldaaFkzUnpMbkJrWmo5MlpYSnphVzl1UFRFbWJXOWthV1pwWTJGMGFXOXVSR0YwWlQweE5EWTVPREF5TmpRek1EQXdKbUZ3YVQxMk1nLi4.> )
10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13 conference

10min

Status of dockerizing workflows

Brian O'Connor<redir.aspx?REF=xTtHkd-d85KYDRbUalhoBLdChxk73AFjK8GnifW9F738MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9NS1YREVDUUZfbFgtUncxVHlud0xmN0M3YmpWWWpCY3VJenRLa0R1aHRhRGM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2FYTndiR0Y1TDM1aWIyTnZibTV2Y2cuLg..>, UCSC

Gordon Saksena<redir.aspx?REF=sbMK1c2anygMnLRIPF7fRWvLImXKUfxQJCENhGPrj6T8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9RHJNd3BCWG5MWm1WbURVS05rZFpSVGFONE1Ld0MyN2h0S001aU1sT05HSGM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2FYTndiR0Y1TDM1bmMyRnJjMlZ1WVVCaWNtOWhaR2x1YzNScGRIVjBaUzV2Y21jLg..>, Broad

Francis Ouellette<redir.aspx?REF=nKSzCtmcFkgCejlKpWaB7MBgyg9l9-wJb8nDWYP6eOn8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9bnE4aF9TQVg1a0ZYQm5nMGc0aDYwd3VlZE9IM0VudFdnS1hFaTJMS01QYmM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2FYTndiR0Y1TDM1bWNtRnVZMmx6>, OICR


Status of PCAWG Workflow ports to Dockstore:

Denis has been porting the Dockstore entries to CWL version 1.0 which is part of our effort to publish Dockstore (this doesn't affect the content of the pipelines, simply their "descriptors" which allow them to be runnable via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL (which all work with CWL 1.0 and Kerian's test dataset) and has fixed issues with DKFZ and is testing the latter with a real sample shortly.
1.       BWA-Mem - Ready for testing by Francis' team
2.       Sanger - Ready for testing by Francis' team.
3.       EMBL - Ready for testing by Francis' team.
4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails with Manuel Ballesteros who has been testing this pipeline.
5.       Broad - Variant calling (MuTect, dRanger, snowman), need some work, Gordan sent details previously
6.       OxoG - Waiting for Dimitri to provide OxoG docker
7.       Variantbam
8.       Consensus algorithm

PCAWG Docker (Dockstore) Testing Working Group<redir.aspx?REF=5kvwWbiQvs_nZJiPXJucfaSfbLbi9TGqkedclNZg3E38MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9amx4VVJ1Uks1ZWgzdHg2d2ltQkpqR1VjSDhGZGNLbDYzVkVYWjAzQjNkTGM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwzZHBhMmt1YjJsamNpNXZiaTVqWVM5a2FYTndiR0Y1TDFCQlRrTkJUa05GVWk5UVEwRlhSeXRFYjJOclpYSXJKVEk0Ukc5amEzTjBiM0psSlRJNUsxUmxjM1JwYm1jclYyOXlhMmx1Wnl0SGNtOTFjQS4u>

5min

Other business?

Group




Christina K. Yung, PhD
Project Manager, Cancer Genome Collaboratory

Ontario Institute for Cancer Research
MaRS Centre
661 University Avenue, Suite 510
Toronto, Ontario, Canada M5G 0A3
Tel: 416-673-8578
www.oicr.on.ca<redir.aspx?REF=-1Lati4iBsIBgu2wp8KljUhpMrLBwg71qD90YHvFwbP8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9X2dxUHdvbmFoVUhHRElTTGZKLVR6dUFxUXJxQXhuRXVJbHBhMGdwMm9BRGM1dFRuTk8zVENBRm9kSFJ3T2k4dmQzZDNMbTlwWTNJdWIyNHVZMkV2>

This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.

_______________________________________________
PAWG-TECH mailing list
PAWG-TECH at lists.icgc.org<redir.aspx?REF=e2b0Gp7WznZVJxFRHMwHHWEI3-NEW37MMAitGAh2dUX8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9Vm1uc0dfQmkxOEwwcHlfV3djRjRyOGFvci1mN2VEdkJxeFQ4YldWY1NFRGM1dFRuTk8zVENBRnRZV2xzZEc4NlVFRlhSeTFVUlVOSVFHeHBjM1J6TG1saloyTXViM0pu>
https://lists.icgc.org/mailman/listinfo/pawg-tech<redir.aspx?REF=bAPmyyiPiJ3V7kClbutdDMHeCpd6dmbgYmBbWeo-cNr8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9VVZ1ZndCbS1IR182M1NQcEZ0clFrLXViR1NPTDk5YUs4WGdoUDJBWUlVSGM1dFRuTk8zVENBRm9kSFJ3Y3pvdkwyeHBjM1J6TG1saloyTXViM0puTDIxaGFXeHRZVzR2YkdsemRHbHVabTh2Y0dGM1p5MTBaV05v>


_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<redir.aspx?REF=VTK2RunIB3ZdGEnQkhoLsm2OO-5kkwLnUVT24p8lOj_8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9LThPQUJkVVBIZ1c2TFY1XzhUcGdQTlpRb3VGa1g3cGVRc250RXQ1RWNadmM1dFRuTk8zVENBRnRZV2xzZEc4NlpHOWphM1JsYzNSbGNuTkFiR2x6ZEhNdWFXTm5ZeTV2Y21jLg..>
https://lists.icgc.org/mailman/listinfo/docktesters<redir.aspx?REF=R8kgOB6sOLbCKBbPRuGxXuYy3XypDKtzhmHGoUnJapz8MqFt8-3TCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9OUFkZHZuSTctNk9KX3NfMndoNjNZQnJFQ2p0ZndKdl9FeE1HTXJVcVVmN2M1dFRuTk8zVENBRm9kSFJ3Y3pvdkwyeHBjM1J6TG1saloyTXViM0puTDIxaGFXeHRZVzR2YkdsemRHbHVabTh2Wkc5amEzUmxjM1JsY25NLg..>




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161006/735cd265/attachment-0001.html>

From miguel.vazquez at cnio.es  Fri Oct  7 02:27:22 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Fri, 7 Oct 2016 08:27:22 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
Message-ID: <CA+dx8maETzM70eNT_6wW_WUwLVV1RhiEBt2nB+Qxr5qpXMEoQg@mail.gmail.com>

Hi all,

The Delly workflow on DO50311 just finished correctly. I've added that to
the table. It's important to point out that I consider a success just that
the workflow completes, not that the results are what they need to be. That
I guess we can do at a later stage.

By the way, the Delly workflow just seems to produce SV, is that the case?
no SNV? It also produces a bedpe file that I guess I can try on the DKFZ,
which is what was missing. I'm going to try that now, albeit with no clear
idea of what I'm doing I must say, I'm not familiar with any of this.

Current status so far as I understand it is that only Delly works straigh
out of the box on real data, but only produces only SV. Sanger works on
test data and fails on real data. DKFZ fails on Test data and requires
bedpe file for real data (produced by Delly?) BWA-Mem requires preprocesing
the files?

I have to say that from where I stand the preprocesing required by Delly
and BWA-Mem is a bit inconvenient and makes the tools not stand-alone.


I admit that I'm not an expert so I might have got some info wrong. Any
comments on this please?

Best

Miguel



On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca>
wrote:

> Dear Miguel and Junjun,
>
> Any more attempts on testing the PCAWG sanger docker container?
>
> If you reproduce the same error, we will need to involve Bryan and
> Keiran Raine <kr2 at sanger.ac.uk> (author of the container).
>
> Let?s get this one figured out.
>
> I am going to assume that the making of the docker container is what
> needs resolving.
>
> Brian: We may need your input here.
>
> Details of our current experiment should continue to be posted here:
>
> https://goo.gl/XX5BG9
>
> Thank you all,
>
> francis
>
> PS would be good for others on list to follow directions on above google
> doc and also see if they can succeed on this workflow.
>
> Junjun and Miguel have tried different clouds, but used the sanger
> workflow, on the same data set.
>
> Thank you for trying to do this.
>
> Would be good if I heard back from anybody before Monday AM (tech call).
>
> @bffo
>
> PS I CCed Keiran, but waiting to hear back from Brian before we need to
> involve him some more.
> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same
> data set).
>
>
> --
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette
>
>
>
>
> Begin forwarded message:
>
> *From: *Christina Yung <Christina.Yung at oicr.on.ca>
> *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH teleconference*
> *Date: *September 30, 2016 at 9:19:39 AM EDT
> *To: *"pawg-tech (pawg-tech at lists.icgc.org)" <pawg-tech at lists.icgc.org>
>
> Hi Everyone,
>
>
>
> Below is a draft agenda for Monday?s tech call.  Please let me know if you
> have any agenda items for discussion.
>
> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+
> PCAWG-TECH+Teleconference
>
>
>
> Have a great weekend!
>
> Christina
>
>
> Call Info
>
> *Usual Time            9 AM Eastern Time, Mondays*
>
> *UK                          0208 322 2500*
>
> *Canada                  1-866-220-6419*
>
> *United States        **1-877-420-0272*
>
> *All Others              Please see attached PDF file
> <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with
> a list of numbers for other countries.*
>
> *Participant Code  5910819#*
> Agenda
>
>
>
> *Time*
>
> *Item*
>
> *Who*
>
> *Attachments/Links*
>
> 5min
>
> Welcome. Wait for group members to log on
>
> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>
> 10min
>
> Overall status
> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>
> ?         Linkouts to Most Current PCAWG Data
> <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>
> ?         Report data issues to pcawg-data at icgc.org, GNOS issue to:
> Help at annaisystems.com
>
> ?         From Boston F2F: PCAWG datasets & dependencies
> <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>
> *Action Items*
>
> 1.       [Joachim] Consensus SV - final?
>
> 2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
>
> 3.       [Junjun] Specimen ID mapping for miRNA and methylation
>
> 4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by
> filtering
>
> 5.       [Matthias & Gordon] Docker containers for filtering methods
>
> 6.       [Christina] Run alignment & variant workflows on medulloblastoma
> sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false
> negative rate
>
> 7.       [Christina] Follow up with institutes interested in hosting
> PCAWG data long-term
>
> 8.       [All] As per Jennifer's email on Sept 16, please provide
> authorship information again or for the first time using PCAWG Author Form (
> http://goo.gl/forms/5Wq5x5X1DK). Save the link "Edit your response" so
> you can go back later to provide updates, for example about your evolving
> role in writing specific papers.
>
> 9.       [All] Contribute to the manuscripts on
>
> a.       infrastructure: https://docs.google.com/
> document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
>
> b.       variants: Paper ( https://goo.gl/g9CLsu ), Supplement (
> https://goo.gl/EWYh7e )
>
> c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline
> <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2>
> )
>
> 10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13
> conference
>
> 10min
>
> Status of dockerizing workflows
> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>
> Gordon Saksena
> <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>
> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
> *Status of PCAWG Workflow ports to Dockstore*:
>
> Denis has been porting the Dockstore entries to CWL version 1.0 which is
> part of our effort to publish Dockstore (this doesn't affect the content of
> the pipelines, simply their "descriptors" which allow them to be runnable
> via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL
> (which all work with CWL 1.0 and Kerian's test dataset) and has fixed
> issues with DKFZ and is testing the latter with a real sample shortly.
>
> 1.       BWA-Mem - Ready for testing by Francis' team
>
> 2.       Sanger - Ready for testing by Francis' team.
>
> 3.       EMBL - Ready for testing by Francis' team.
>
> 4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails
> with Manuel Ballesteros who has been testing this pipeline.
>
> 5.       Broad - Variant calling (MuTect, dRanger, snowman), need some
> work, Gordan sent details previously
>
> 6.       OxoG - Waiting for Dimitri to provide OxoG docker
>
> 7.       Variantbam
>
> 8.       Consensus algorithm
>
> PCAWG Docker (Dockstore) Testing Working Group
> <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>
> 5min
>
> Other business?
>
> Group
>
>
>
>
>
>
>
> *Christina K. Yung, PhD*
> Project Manager, Cancer Genome Collaboratory
>
> *Ontario Institute for Cancer Research*
> MaRS Centre
>
> 661 University Avenue, Suite 510
> Toronto, Ontario, Canada M5G 0A3
> Tel: 416-673-8578
>
> www.oicr.on.ca
>
>
>
> This message and any attachments may contain confidential and/or
> privileged information for the sole use of the intended recipient. Any
> review or distribution by anyone other than the person for whom it was
> originally intended is strictly prohibited. If you have received this
> message in error, please contact the sender and delete all copies.
> Opinions, conclusions or other information contained in this message may
> not be that of the organization.
>
>
> _______________________________________________
> PAWG-TECH mailing list
> PAWG-TECH at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/pawg-tech
>
>
>
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161007/a60ac81b/attachment-0001.html>

From miguel.vazquez at cnio.es  Fri Oct  7 05:35:38 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Fri, 7 Oct 2016 11:35:38 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <1FF2CBA3-3521-4C37-AA3B-952A115CAE5F@sanger.ac.uk>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8maETzM70eNT_6wW_WUwLVV1RhiEBt2nB+Qxr5qpXMEoQg@mail.gmail.com>
 <1FF2CBA3-3521-4C37-AA3B-952A115CAE5F@sanger.ac.uk>
Message-ID: <CA+dx8mbM95vnpNN6u4112nafE1H_4CWZWYnrSA41r0OtDY+ZUg@mail.gmail.com>

On Fri, Oct 7, 2016 at 10:37 AM, Keiran Raine <kr2 at sanger.ac.uk> wrote:

> Hi,
>
> Can someone give me an idea what the errors you see on real data are for
> Sanger?  Which real data is in use?
>

Junjun and I tried it on donor DO50398 and it failed on the pindel process.
I'll try to find our error report and forward it to you.


>
> Also what is non-standard in the BWA-mem preprocessing, I didn't work on
> the actual workflow but I did give input at the beginning (and have a very
> simple to use version in house which can run from fastq, BAM or CRAM
> inputs).
>

It seems to require removing the alignment of the BAM file or something
like that, right? I need to read more on it. Can you send me some info on
how you did it?

Best


>
> Keiran Raine
> Principal Bioinformatician
> Cancer Genome Project
> Wellcome Trust Sanger Institute
>
> kr2 at sanger.ac.uk
> Tel:+44 (0)1223 834244 Ext: 4983
> Office: H104
>
> On 7 Oct 2016, at 07:27, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
>
> Hi all,
>
> The Delly workflow on DO50311 just finished correctly. I've added that to
> the table. It's important to point out that I consider a success just that
> the workflow completes, not that the results are what they need to be. That
> I guess we can do at a later stage.
>
> By the way, the Delly workflow just seems to produce SV, is that the case?
> no SNV? It also produces a bedpe file that I guess I can try on the DKFZ,
> which is what was missing. I'm going to try that now, albeit with no clear
> idea of what I'm doing I must say, I'm not familiar with any of this.
>
> Current status so far as I understand it is that only Delly works straigh
> out of the box on real data, but only produces only SV. Sanger works on
> test data and fails on real data. DKFZ fails on Test data and requires
> bedpe file for real data (produced by Delly?) BWA-Mem requires preprocesing
> the files?
>
> I have to say that from where I stand the preprocesing required by Delly
> and BWA-Mem is a bit inconvenient and makes the tools not stand-alone.
>
>
> I admit that I'm not an expert so I might have got some info wrong. Any
> comments on this please?
>
> Best
>
> Miguel
>
>
>
> On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca>
> wrote:
>
>> Dear Miguel and Junjun,
>>
>> Any more attempts on testing the PCAWG sanger docker container?
>>
>> If you reproduce the same error, we will need to involve Bryan and
>> Keiran Raine <kr2 at sanger.ac.uk> (author of the container).
>>
>> Let?s get this one figured out.
>>
>> I am going to assume that the making of the docker container is what
>> needs resolving.
>>
>> Brian: We may need your input here.
>>
>> Details of our current experiment should continue to be posted here:
>>
>> https://goo.gl/XX5BG9
>>
>> Thank you all,
>>
>> francis
>>
>> PS would be good for others on list to follow directions on above google
>> doc and also see if they can succeed on this workflow.
>>
>> Junjun and Miguel have tried different clouds, but used the sanger
>> workflow, on the same data set.
>>
>> Thank you for trying to do this.
>>
>> Would be good if I heard back from anybody before Monday AM (tech call).
>>
>> @bffo
>>
>> PS I CCed Keiran, but waiting to hear back from Brian before we need to
>> involve him some more.
>> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the
>> same data set).
>>
>>
>> --
>> B.F. Francis Ouellette          http://oicr.on.ca/person/fran
>> cis-ouellette
>>
>>
>>
>> Begin forwarded message:
>>
>> *From: *Christina Yung <Christina.Yung at oicr.on.ca>
>> *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH teleconference*
>> *Date: *September 30, 2016 at 9:19:39 AM EDT
>> *To: *"pawg-tech (pawg-tech at lists.icgc.org)" <pawg-tech at lists.icgc.org>
>>
>> Hi Everyone,
>>
>>
>>
>> Below is a draft agenda for Monday?s tech call.  Please let me know if
>> you have any agenda items for discussion.
>>
>> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-
>> TECH+Teleconference
>>
>>
>>
>> Have a great weekend!
>>
>> Christina
>>
>>
>> Call Info
>>
>> *Usual Time            9 AM Eastern Time, Mondays*
>>
>> *UK                          0208 322 2500*
>>
>> *Canada                  1-866-220-6419*
>>
>> *United States        **1-877-420-0272*
>>
>> *All Others              Please see attached PDF file
>> <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with
>> a list of numbers for other countries.*
>>
>> *Participant Code  5910819#*
>> Agenda
>>
>>
>> *Time*
>>
>> *Item*
>>
>> *Who*
>>
>> *Attachments/Links*
>>
>> 5min
>>
>> Welcome. Wait for group members to log on
>>
>> Christina Yung <https://wiki.oicr.on.ca/display/%7Ecyung>, OICR
>>
>> 10min
>>
>> Overall status
>> Christina Yung <https://wiki.oicr.on.ca/display/%7Ecyung>, OICR
>>
>> ?         Linkouts to Most Current PCAWG Data
>> <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>>
>> ?         Report data issues to pcawg-data at icgc.org, GNOS issue to:
>> Help at annaisystems.com
>>
>> ?         From Boston F2F: PCAWG datasets & dependencies
>> <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>>
>> *Action Items*
>>
>> 1.       [Joachim] Consensus SV - final?
>>
>> 2.       [Jakob] Consensus SNVs - changes to "SNV near indels"
>> annotation?
>>
>> 3.       [Junjun] Specimen ID mapping for miRNA and methylation
>>
>> 4.       [Jonathan & Joachim] Consensus calls for cell lines, followed
>> by filtering
>>
>> 5.       [Matthias & Gordon] Docker containers for filtering methods
>>
>> 6.       [Christina] Run alignment & variant workflows on
>> medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to
>> estimate false negative rate
>>
>> 7.       [Christina] Follow up with institutes interested in hosting
>> PCAWG data long-term
>>
>> 8.       [All] As per Jennifer's email on Sept 16, please provide
>> authorship information again or for the first time using PCAWG Author Form (
>> http://goo.gl/forms/5Wq5x5X1DK). Save the link "Edit your response" so
>> you can go back later to provide updates, for example about your evolving
>> role in writing specific papers.
>>
>> 9.       [All] Contribute to the manuscripts on
>>
>> a.       infrastructure: https://docs.google.com/docume
>> nt/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
>>
>> b.       variants: Paper ( https://goo.gl/g9CLsu ), Supplement (
>> https://goo.gl/EWYh7e )
>>
>> c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline
>> <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2>
>> )
>>
>> 10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13
>> conference
>>
>> 10min
>>
>> Status of dockerizing workflows
>> Brian O'Connor <https://wiki.oicr.on.ca/display/%7Eboconnor>, UCSC
>>
>> Gordon Saksena
>> <https://wiki.oicr.on.ca/display/%7Egsaksena at broadinstitute.org>, Broad
>>
>> Francis Ouellette <https://wiki.oicr.on.ca/display/%7Efrancis>, OICR
>> *Status of PCAWG Workflow ports to Dockstore*:
>>
>> Denis has been porting the Dockstore entries to CWL version 1.0 which is
>> part of our effort to publish Dockstore (this doesn't affect the content of
>> the pipelines, simply their "descriptors" which allow them to be runnable
>> via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL
>> (which all work with CWL 1.0 and Kerian's test dataset) and has fixed
>> issues with DKFZ and is testing the latter with a real sample shortly.
>>
>> 1.       BWA-Mem - Ready for testing by Francis' team
>>
>> 2.       Sanger - Ready for testing by Francis' team.
>>
>> 3.       EMBL - Ready for testing by Francis' team.
>>
>> 4.       DKFZ - Ready for testing by Francis' team. I've exchanged
>> emails with Manuel Ballesteros who has been testing this pipeline.
>>
>> 5.       Broad - Variant calling (MuTect, dRanger, snowman), need some
>> work, Gordan sent details previously
>>
>> 6.       OxoG - Waiting for Dimitri to provide OxoG docker
>>
>> 7.       Variantbam
>>
>> 8.       Consensus algorithm
>>
>> PCAWG Docker (Dockstore) Testing Working Group
>> <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>>
>> 5min
>>
>> Other business?
>>
>> Group
>>
>>
>>
>>
>>
>>
>>
>> *Christina K. Yung, PhD*
>> Project Manager, Cancer Genome Collaboratory
>>
>> *Ontario Institute for Cancer Research*
>> MaRS Centre
>>
>> 661 University Avenue, Suite 510
>> Toronto, Ontario, Canada M5G 0A3
>> Tel: 416-673-8578
>>
>> www.oicr.on.ca
>>
>>
>> This message and any attachments may contain confidential and/or
>> privileged information for the sole use of the intended recipient. Any
>> review or distribution by anyone other than the person for whom it was
>> originally intended is strictly prohibited. If you have received this
>> message in error, please contact the sender and delete all copies.
>> Opinions, conclusions or other information contained in this message may
>> not be that of the organization.
>>
>>
>> _______________________________________________
>> PAWG-TECH mailing list
>> PAWG-TECH at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/pawg-tech
>>
>>
>>
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters
>>
>>
>
>
> -- The Wellcome Trust Sanger Institute is operated by Genome Research
> Limited, a charity registered in England with number 1021457 and a company
> registered in England with number 2742969, whose registered office is 215
> Euston Road, London, NW1 2BE.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161007/4832e126/attachment-0001.html>

From kr2 at sanger.ac.uk  Fri Oct  7 04:37:26 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Fri, 7 Oct 2016 09:37:26 +0100
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <CA+dx8maETzM70eNT_6wW_WUwLVV1RhiEBt2nB+Qxr5qpXMEoQg@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8maETzM70eNT_6wW_WUwLVV1RhiEBt2nB+Qxr5qpXMEoQg@mail.gmail.com>
Message-ID: <1FF2CBA3-3521-4C37-AA3B-952A115CAE5F@sanger.ac.uk>

Hi,

Can someone give me an idea what the errors you see on real data are for Sanger?  Which real data is in use?

Also what is non-standard in the BWA-mem preprocessing, I didn't work on the actual workflow but I did give input at the beginning (and have a very simple to use version in house which can run from fastq, BAM or CRAM inputs).

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 7 Oct 2016, at 07:27, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
> 
> Hi all,
> 
> The Delly workflow on DO50311 just finished correctly. I've added that to the table. It's important to point out that I consider a success just that the workflow completes, not that the results are what they need to be. That I guess we can do at a later stage. 
> 
> By the way, the Delly workflow just seems to produce SV, is that the case? no SNV? It also produces a bedpe file that I guess I can try on the DKFZ, which is what was missing. I'm going to try that now, albeit with no clear idea of what I'm doing I must say, I'm not familiar with any of this.
> 
> Current status so far as I understand it is that only Delly works straigh out of the box on real data, but only produces only SV. Sanger works on test data and fails on real data. DKFZ fails on Test data and requires bedpe file for real data (produced by Delly?) BWA-Mem requires preprocesing the files?
> 
> I have to say that from where I stand the preprocesing required by Delly and BWA-Mem is a bit inconvenient and makes the tools not stand-alone.
> 
> 
> I admit that I'm not an expert so I might have got some info wrong. Any comments on this please?
> 
> Best
> 
> Miguel
> 
> 
> 
> On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca <mailto:francis at oicr.on.ca>> wrote:
> Dear Miguel and Junjun, 
> 
> Any more attempts on testing the PCAWG sanger docker container?
> 
> If you reproduce the same error, we will need to involve Bryan and 
> Keiran Raine <kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>> (author of the container).
> 
> Let?s get this one figured out.
> 
> I am going to assume that the making of the docker container is what 
> needs resolving. 
> 
> Brian: We may need your input here.
> 
> Details of our current experiment should continue to be posted here:
> 
> https://goo.gl/XX5BG9 <https://goo.gl/XX5BG9>
> 
> Thank you all,
> 
> francis
> 
> PS would be good for others on list to follow directions on above google 
> doc and also see if they can succeed on this workflow.
> 
> Junjun and Miguel have tried different clouds, but used the sanger 
> workflow, on the same data set. 
> 
> Thank you for trying to do this.
> 
> Would be good if I heard back from anybody before Monday AM (tech call).
> 
> @bffo
> 
> PS I CCed Keiran, but waiting to hear back from Brian before we need to involve him some more.
> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same data set).
> 
>  
> -- 
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette <http://oicr.on.ca/person/francis-ouellette>    
> 
> 
> 
>> Begin forwarded message:
>> 
>> From: Christina Yung <Christina.Yung at oicr.on.ca <mailto:Christina.Yung at oicr.on.ca>>
>> Subject: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> Date: September 30, 2016 at 9:19:39 AM EDT
>> To: "pawg-tech (pawg-tech at lists.icgc.org <mailto:pawg-tech at lists.icgc.org>)" <pawg-tech at lists.icgc.org <mailto:pawg-tech at lists.icgc.org>>
>> 
>> Hi Everyone,
>> 
>>  
>> 
>> Below is a draft agenda for Monday?s tech call.  Please let me know if you have any agenda items for discussion.
>> 
>> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference <https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference>
>>  
>> 
>> Have a great weekend!
>> 
>> Christina
>> 
>>  
>> 
>> Call Info
>> Usual Time            9 AM Eastern Time, Mondays
>> UK                          0208 322 2500
>> Canada                  1-866-220-6419
>> United States        1-877-420-0272
>> All Others              Please see attached PDF file <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with a list of numbers for other countries.
>> Participant Code  5910819#
>> Agenda
>>  
>> Time
>> 
>> Item
>> 
>> Who
>> 
>> Attachments/Links
>> 
>> 5min
>> 
>> 
>> Welcome. Wait for group members to log on
>> 
>> 
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>> 
>> 
>> 
>> 10min
>> 
>> 
>> Overall status
>> 
>> 
>> 
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>> 
>> 
>> ?        
>> Linkouts to Most Current PCAWG Data <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>> 
>> ?        
>> Report data issues to pcawg-data at icgc.org <mailto:pcawg-data at icgc.org>, GNOS issue to: Help at annaisystems.com <mailto:Help at annaisystems.com>
>> 
>> ?        
>> From Boston F2F:
>> 
>> PCAWG datasets & dependencies <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>> 
>> Action Items
>> 
>> 1.      
>> [Joachim] Consensus SV - final?
>> 
>> 
>> 2.      
>> [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
>> 
>> 
>> 3.      
>> [Junjun] Specimen ID mapping for miRNA and methylation
>> 
>> 
>> 4.      
>> [Jonathan & Joachim] Consensus calls for cell lines, followed by filtering
>> 
>> 
>> 5.      
>> [Matthias & Gordon] Docker containers for filtering methods
>> 
>> 
>> 6.      
>> [Christina] Run alignment & variant workflows on medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false negative
>>  rate
>> 
>> 
>> 7.      
>> [Christina] Follow up with institutes interested in hosting PCAWG data long-term
>> 
>> 
>> 8.      
>> [All] As per Jennifer's email on Sept 16, please provide authorship information again or for the first time using PCAWG Author Form (http://goo.gl/forms/5Wq5x5X1DK <http://goo.gl/forms/5Wq5x5X1DK>).
>>  Save the link "Edit your response" so you can go back later to provide updates, for example about your evolving role in writing specific papers.
>> 
>> 
>> 9.      
>> [All] Contribute to the manuscripts on
>> 
>> 
>> a.      
>> infrastructure:
>> 
>> https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit <https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit>
>> 
>> b.      
>> variants: Paper ( https://goo.gl/g9CLsu <https://goo.gl/g9CLsu> ), Supplement ( https://goo.gl/EWYh7e <https://goo.gl/EWYh7e> )
>> 
>> 
>> c.      
>> Rogue's Gallery of Cancer Genome Sequencing Artifacts (
>> 
>> outline <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2> )
>> 
>> 
>> 10.  
>> [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13 conference
>> 
>> 
>> 10min
>> 
>> 
>> Status of dockerizing workflows
>> 
>> 
>> 
>> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>> 
>> Gordon Saksena <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>> 
>> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
>> 
>> 
>> Status of PCAWG Workflow ports to Dockstore:
>> 
>> Denis has been porting the Dockstore entries to CWL version 1.0 which is part of our effort to publish Dockstore (this doesn't affect the content of the pipelines, simply their
>>  "descriptors" which allow them to be runnable via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL (which all work with CWL 1.0 and Kerian's test dataset) and has fixed issues with DKFZ and is testing the latter with a real sample shortly.
>> 
>> 1.      
>> BWA-Mem - Ready for testing by Francis' team
>> 
>> 
>> 2.      
>> Sanger - Ready for testing by Francis' team.
>> 
>> 
>> 3.      
>> EMBL - Ready for testing by Francis' team.
>> 
>> 
>> 4.      
>> DKFZ - Ready for testing by Francis' team. I've exchanged emails with Manuel Ballesteros who has been testing this pipeline.
>> 
>> 
>> 5.      
>> Broad - Variant calling (MuTect, dRanger, snowman), need some work, Gordan sent details previously
>> 
>> 
>> 6.      
>> OxoG - Waiting for Dimitri to provide OxoG docker
>> 
>> 
>> 7.      
>> Variantbam
>> 
>> 
>> 8.      
>> Consensus algorithm
>> 
>> 
>> PCAWG Docker (Dockstore) Testing Working Group <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>> 5min
>> 
>> 
>> Other business?
>> 
>> 
>> Group
>> 
>> 
>> 
>>  
>> 
>>  
>> 
>>  
>> 
>> Christina K. Yung, PhD
>> Project Manager, Cancer Genome Collaboratory
>> 
>> Ontario Institute for Cancer Research
>> MaRS Centre
>> 
>> 661 University Avenue, Suite 510 
>> Toronto, Ontario, Canada M5G 0A3
>> Tel: 416-673-8578
>> 
>> www.oicr.on.ca <http://www.oicr.on.ca/>
>>  
>> This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.
>> 
>>  
>> 
>> _______________________________________________
>> PAWG-TECH mailing list
>> PAWG-TECH at lists.icgc.org <mailto:PAWG-TECH at lists.icgc.org>
>> https://lists.icgc.org/mailman/listinfo/pawg-tech <https://lists.icgc.org/mailman/listinfo/pawg-tech>
> 
> 
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org <mailto:docktesters at lists.icgc.org>
> https://lists.icgc.org/mailman/listinfo/docktesters <https://lists.icgc.org/mailman/listinfo/docktesters>
> 
> 




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161007/5f7b140b/attachment-0001.html>

From miguel.vazquez at cnio.es  Sat Oct  8 04:11:41 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Sat, 8 Oct 2016 10:11:41 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
Message-ID: <CA+dx8mYbHRWu_qMfLoayG89Xf_cdh5weAu-fXVBYwSmGga=H7g@mail.gmail.com>

Hi all,

Good news. The DKFZ workflow was successful for donor DO50311. I've updated
the table. I'm trying the Sanger workflow again with that donor.

Have a nice weekend

Miguel

On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca>
wrote:

> Dear Miguel and Junjun,
>
> Any more attempts on testing the PCAWG sanger docker container?
>
> If you reproduce the same error, we will need to involve Bryan and
> Keiran Raine <kr2 at sanger.ac.uk> (author of the container).
>
> Let?s get this one figured out.
>
> I am going to assume that the making of the docker container is what
> needs resolving.
>
> Brian: We may need your input here.
>
> Details of our current experiment should continue to be posted here:
>
> https://goo.gl/XX5BG9
>
> Thank you all,
>
> francis
>
> PS would be good for others on list to follow directions on above google
> doc and also see if they can succeed on this workflow.
>
> Junjun and Miguel have tried different clouds, but used the sanger
> workflow, on the same data set.
>
> Thank you for trying to do this.
>
> Would be good if I heard back from anybody before Monday AM (tech call).
>
> @bffo
>
> PS I CCed Keiran, but waiting to hear back from Brian before we need to
> involve him some more.
> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same
> data set).
>
>
> --
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette
>
>
>
>
> Begin forwarded message:
>
> *From: *Christina Yung <Christina.Yung at oicr.on.ca>
> *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH teleconference*
> *Date: *September 30, 2016 at 9:19:39 AM EDT
> *To: *"pawg-tech (pawg-tech at lists.icgc.org)" <pawg-tech at lists.icgc.org>
>
> Hi Everyone,
>
>
>
> Below is a draft agenda for Monday?s tech call.  Please let me know if you
> have any agenda items for discussion.
>
> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-
> TECH+Teleconference
>
>
>
> Have a great weekend!
>
> Christina
>
>
> Call Info
>
> *Usual Time            9 AM Eastern Time, Mondays*
>
> *UK                          0208 322 2500*
>
> *Canada                  1-866-220-6419*
>
> *United States        **1-877-420-0272*
>
> *All Others              Please see attached PDF file
> <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with
> a list of numbers for other countries.*
>
> *Participant Code  5910819#*
> Agenda
>
>
>
> *Time*
>
> *Item*
>
> *Who*
>
> *Attachments/Links*
>
> 5min
>
> Welcome. Wait for group members to log on
>
> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>
> 10min
>
> Overall status
> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>
> ?         Linkouts to Most Current PCAWG Data
> <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>
> ?         Report data issues to pcawg-data at icgc.org, GNOS issue to:
> Help at annaisystems.com
>
> ?         From Boston F2F: PCAWG datasets & dependencies
> <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>
> *Action Items*
>
> 1.       [Joachim] Consensus SV - final?
>
> 2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
>
> 3.       [Junjun] Specimen ID mapping for miRNA and methylation
>
> 4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by
> filtering
>
> 5.       [Matthias & Gordon] Docker containers for filtering methods
>
> 6.       [Christina] Run alignment & variant workflows on medulloblastoma
> sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false
> negative rate
>
> 7.       [Christina] Follow up with institutes interested in hosting
> PCAWG data long-term
>
> 8.       [All] As per Jennifer's email on Sept 16, please provide
> authorship information again or for the first time using PCAWG Author Form (
> http://goo.gl/forms/5Wq5x5X1DK). Save the link "Edit your response" so
> you can go back later to provide updates, for example about your evolving
> role in writing specific papers.
>
> 9.       [All] Contribute to the manuscripts on
>
> a.       infrastructure: https://docs.google.com/docume
> nt/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
>
> b.       variants: Paper ( https://goo.gl/g9CLsu ), Supplement (
> https://goo.gl/EWYh7e )
>
> c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline
> <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2>
> )
>
> 10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13
> conference
>
> 10min
>
> Status of dockerizing workflows
> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>
> Gordon Saksena
> <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>
> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
> *Status of PCAWG Workflow ports to Dockstore*:
>
> Denis has been porting the Dockstore entries to CWL version 1.0 which is
> part of our effort to publish Dockstore (this doesn't affect the content of
> the pipelines, simply their "descriptors" which allow them to be runnable
> via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL
> (which all work with CWL 1.0 and Kerian's test dataset) and has fixed
> issues with DKFZ and is testing the latter with a real sample shortly.
>
> 1.       BWA-Mem - Ready for testing by Francis' team
>
> 2.       Sanger - Ready for testing by Francis' team.
>
> 3.       EMBL - Ready for testing by Francis' team.
>
> 4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails
> with Manuel Ballesteros who has been testing this pipeline.
>
> 5.       Broad - Variant calling (MuTect, dRanger, snowman), need some
> work, Gordan sent details previously
>
> 6.       OxoG - Waiting for Dimitri to provide OxoG docker
>
> 7.       Variantbam
>
> 8.       Consensus algorithm
>
> PCAWG Docker (Dockstore) Testing Working Group
> <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>
> 5min
>
> Other business?
>
> Group
>
>
>
>
>
>
>
> *Christina K. Yung, PhD*
> Project Manager, Cancer Genome Collaboratory
>
> *Ontario Institute for Cancer Research*
> MaRS Centre
>
> 661 University Avenue, Suite 510
> Toronto, Ontario, Canada M5G 0A3
> Tel: 416-673-8578
>
> www.oicr.on.ca
>
>
>
> This message and any attachments may contain confidential and/or
> privileged information for the sole use of the intended recipient. Any
> review or distribution by anyone other than the person for whom it was
> originally intended is strictly prohibited. If you have received this
> message in error, please contact the sender and delete all copies.
> Opinions, conclusions or other information contained in this message may
> not be that of the organization.
>
>
> _______________________________________________
> PAWG-TECH mailing list
> PAWG-TECH at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/pawg-tech
>
>
>
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161008/81f1c67b/attachment-0001.html>

From miguel.vazquez at cnio.es  Mon Oct 10 03:11:31 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Mon, 10 Oct 2016 09:11:31 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
Message-ID: <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>

Hi all,

I've reproduced the Sanger error again. I'm attaching the result of the
command to see if this helps

Best

M

On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca>
wrote:

> Dear Miguel and Junjun,
>
> Any more attempts on testing the PCAWG sanger docker container?
>
> If you reproduce the same error, we will need to involve Bryan and
> Keiran Raine <kr2 at sanger.ac.uk> (author of the container).
>
> Let?s get this one figured out.
>
> I am going to assume that the making of the docker container is what
> needs resolving.
>
> Brian: We may need your input here.
>
> Details of our current experiment should continue to be posted here:
>
> https://goo.gl/XX5BG9
>
> Thank you all,
>
> francis
>
> PS would be good for others on list to follow directions on above google
> doc and also see if they can succeed on this workflow.
>
> Junjun and Miguel have tried different clouds, but used the sanger
> workflow, on the same data set.
>
> Thank you for trying to do this.
>
> Would be good if I heard back from anybody before Monday AM (tech call).
>
> @bffo
>
> PS I CCed Keiran, but waiting to hear back from Brian before we need to
> involve him some more.
> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same
> data set).
>
>
> --
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette
>
>
>
>
> Begin forwarded message:
>
> *From: *Christina Yung <Christina.Yung at oicr.on.ca>
> *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH teleconference*
> *Date: *September 30, 2016 at 9:19:39 AM EDT
> *To: *"pawg-tech (pawg-tech at lists.icgc.org)" <pawg-tech at lists.icgc.org>
>
> Hi Everyone,
>
>
>
> Below is a draft agenda for Monday?s tech call.  Please let me know if you
> have any agenda items for discussion.
>
> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+
> PCAWG-TECH+Teleconference
>
>
>
> Have a great weekend!
>
> Christina
>
>
> Call Info
>
> *Usual Time            9 AM Eastern Time, Mondays*
>
> *UK                          0208 322 2500*
>
> *Canada                  1-866-220-6419*
>
> *United States        **1-877-420-0272*
>
> *All Others              Please see attached PDF file
> <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with
> a list of numbers for other countries.*
>
> *Participant Code  5910819#*
> Agenda
>
>
>
> *Time*
>
> *Item*
>
> *Who*
>
> *Attachments/Links*
>
> 5min
>
> Welcome. Wait for group members to log on
>
> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>
> 10min
>
> Overall status
> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>
> ?         Linkouts to Most Current PCAWG Data
> <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>
> ?         Report data issues to pcawg-data at icgc.org, GNOS issue to:
> Help at annaisystems.com
>
> ?         From Boston F2F: PCAWG datasets & dependencies
> <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>
> *Action Items*
>
> 1.       [Joachim] Consensus SV - final?
>
> 2.       [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
>
> 3.       [Junjun] Specimen ID mapping for miRNA and methylation
>
> 4.       [Jonathan & Joachim] Consensus calls for cell lines, followed by
> filtering
>
> 5.       [Matthias & Gordon] Docker containers for filtering methods
>
> 6.       [Christina] Run alignment & variant workflows on medulloblastoma
> sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false
> negative rate
>
> 7.       [Christina] Follow up with institutes interested in hosting
> PCAWG data long-term
>
> 8.       [All] As per Jennifer's email on Sept 16, please provide
> authorship information again or for the first time using PCAWG Author Form (
> http://goo.gl/forms/5Wq5x5X1DK). Save the link "Edit your response" so
> you can go back later to provide updates, for example about your evolving
> role in writing specific papers.
>
> 9.       [All] Contribute to the manuscripts on
>
> a.       infrastructure: https://docs.google.com/
> document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
>
> b.       variants: Paper ( https://goo.gl/g9CLsu ), Supplement (
> https://goo.gl/EWYh7e )
>
> c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline
> <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2>
> )
>
> 10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13
> conference
>
> 10min
>
> Status of dockerizing workflows
> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>
> Gordon Saksena
> <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>
> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
> *Status of PCAWG Workflow ports to Dockstore*:
>
> Denis has been porting the Dockstore entries to CWL version 1.0 which is
> part of our effort to publish Dockstore (this doesn't affect the content of
> the pipelines, simply their "descriptors" which allow them to be runnable
> via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL
> (which all work with CWL 1.0 and Kerian's test dataset) and has fixed
> issues with DKFZ and is testing the latter with a real sample shortly.
>
> 1.       BWA-Mem - Ready for testing by Francis' team
>
> 2.       Sanger - Ready for testing by Francis' team.
>
> 3.       EMBL - Ready for testing by Francis' team.
>
> 4.       DKFZ - Ready for testing by Francis' team. I've exchanged emails
> with Manuel Ballesteros who has been testing this pipeline.
>
> 5.       Broad - Variant calling (MuTect, dRanger, snowman), need some
> work, Gordan sent details previously
>
> 6.       OxoG - Waiting for Dimitri to provide OxoG docker
>
> 7.       Variantbam
>
> 8.       Consensus algorithm
>
> PCAWG Docker (Dockstore) Testing Working Group
> <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>
> 5min
>
> Other business?
>
> Group
>
>
>
>
>
>
>
> *Christina K. Yung, PhD*
> Project Manager, Cancer Genome Collaboratory
>
> *Ontario Institute for Cancer Research*
> MaRS Centre
>
> 661 University Avenue, Suite 510
> Toronto, Ontario, Canada M5G 0A3
> Tel: 416-673-8578
>
> www.oicr.on.ca
>
>
>
> This message and any attachments may contain confidential and/or
> privileged information for the sole use of the intended recipient. Any
> review or distribution by anyone other than the person for whom it was
> originally intended is strictly prohibited. If you have received this
> message in error, please contact the sender and delete all copies.
> Opinions, conclusions or other information contained in this message may
> not be that of the organization.
>
>
> _______________________________________________
> PAWG-TECH mailing list
> PAWG-TECH at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/pawg-tech
>
>
>
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161010/4d860684/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Sanger.Test.log
Type: application/octet-stream
Size: 94843 bytes
Desc: not available
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161010/4d860684/attachment-0001.obj>

From kr2 at sanger.ac.uk  Mon Oct 10 04:28:04 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Mon, 10 Oct 2016 09:28:04 +0100
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
Message-ID: <C7D1E2F7-A5B4-4E7B-8E09-B7CA3477E956@sanger.ac.uk>

Hi Miguel,

It's odd that there's no error message.  Can you give me a listing of the following areas (with file sizes too)

/var/spool/cwl/0/pindel/tmpPindel/*/

And any content of the logs directory that have a non-zero file size:

/var/spool/cwl/0/pindel/tmpPindel/logs

Thanks,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 10 Oct 2016, at 08:11, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
> 
> Hi all,
> 
> I've reproduced the Sanger error again. I'm attaching the result of the command to see if this helps 
> 
> Best
> 
> M
> 
> On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca <mailto:francis at oicr.on.ca>> wrote:
> Dear Miguel and Junjun, 
> 
> Any more attempts on testing the PCAWG sanger docker container?
> 
> If you reproduce the same error, we will need to involve Bryan and 
> Keiran Raine <kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>> (author of the container).
> 
> Let?s get this one figured out.
> 
> I am going to assume that the making of the docker container is what 
> needs resolving. 
> 
> Brian: We may need your input here.
> 
> Details of our current experiment should continue to be posted here:
> 
> https://goo.gl/XX5BG9 <https://goo.gl/XX5BG9>
> 
> Thank you all,
> 
> francis
> 
> PS would be good for others on list to follow directions on above google 
> doc and also see if they can succeed on this workflow.
> 
> Junjun and Miguel have tried different clouds, but used the sanger 
> workflow, on the same data set. 
> 
> Thank you for trying to do this.
> 
> Would be good if I heard back from anybody before Monday AM (tech call).
> 
> @bffo
> 
> PS I CCed Keiran, but waiting to hear back from Brian before we need to involve him some more.
> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same data set).
> 
>  
> -- 
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette <http://oicr.on.ca/person/francis-ouellette>    
> 
> 
> 
>> Begin forwarded message:
>> 
>> From: Christina Yung <Christina.Yung at oicr.on.ca <mailto:Christina.Yung at oicr.on.ca>>
>> Subject: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> Date: September 30, 2016 at 9:19:39 AM EDT
>> To: "pawg-tech (pawg-tech at lists.icgc.org <mailto:pawg-tech at lists.icgc.org>)" <pawg-tech at lists.icgc.org <mailto:pawg-tech at lists.icgc.org>>
>> 
>> Hi Everyone,
>> 
>>  
>> 
>> Below is a draft agenda for Monday?s tech call.  Please let me know if you have any agenda items for discussion.
>> 
>> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference <https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference>
>>  
>> 
>> Have a great weekend!
>> 
>> Christina
>> 
>>  
>> 
>> Call Info
>> Usual Time            9 AM Eastern Time, Mondays
>> UK                          0208 322 2500
>> Canada                  1-866-220-6419
>> United States        1-877-420-0272
>> All Others              Please see attached PDF file <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with a list of numbers for other countries.
>> Participant Code  5910819#
>> Agenda
>>  
>> Time
>> 
>> Item
>> 
>> Who
>> 
>> Attachments/Links
>> 
>> 5min
>> 
>> 
>> Welcome. Wait for group members to log on
>> 
>> 
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>> 
>> 
>> 
>> 10min
>> 
>> 
>> Overall status
>> 
>> 
>> 
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>> 
>> 
>> ?        
>> Linkouts to Most Current PCAWG Data <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>> 
>> ?        
>> Report data issues to pcawg-data at icgc.org <mailto:pcawg-data at icgc.org>, GNOS issue to: Help at annaisystems.com <mailto:Help at annaisystems.com>
>> 
>> ?        
>> From Boston F2F:
>> 
>> PCAWG datasets & dependencies <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>> 
>> Action Items
>> 
>> 1.      
>> [Joachim] Consensus SV - final?
>> 
>> 
>> 2.      
>> [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
>> 
>> 
>> 3.      
>> [Junjun] Specimen ID mapping for miRNA and methylation
>> 
>> 
>> 4.      
>> [Jonathan & Joachim] Consensus calls for cell lines, followed by filtering
>> 
>> 
>> 5.      
>> [Matthias & Gordon] Docker containers for filtering methods
>> 
>> 
>> 6.      
>> [Christina] Run alignment & variant workflows on medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false negative
>>  rate
>> 
>> 
>> 7.      
>> [Christina] Follow up with institutes interested in hosting PCAWG data long-term
>> 
>> 
>> 8.      
>> [All] As per Jennifer's email on Sept 16, please provide authorship information again or for the first time using PCAWG Author Form (http://goo.gl/forms/5Wq5x5X1DK <http://goo.gl/forms/5Wq5x5X1DK>).
>>  Save the link "Edit your response" so you can go back later to provide updates, for example about your evolving role in writing specific papers.
>> 
>> 
>> 9.      
>> [All] Contribute to the manuscripts on
>> 
>> 
>> a.      
>> infrastructure:
>> 
>> https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit <https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit>
>> 
>> b.      
>> variants: Paper ( https://goo.gl/g9CLsu <https://goo.gl/g9CLsu> ), Supplement ( https://goo.gl/EWYh7e <https://goo.gl/EWYh7e> )
>> 
>> 
>> c.      
>> Rogue's Gallery of Cancer Genome Sequencing Artifacts (
>> 
>> outline <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2> )
>> 
>> 
>> 10.  
>> [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13 conference
>> 
>> 
>> 10min
>> 
>> 
>> Status of dockerizing workflows
>> 
>> 
>> 
>> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>> 
>> Gordon Saksena <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>> 
>> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
>> 
>> 
>> Status of PCAWG Workflow ports to Dockstore:
>> 
>> Denis has been porting the Dockstore entries to CWL version 1.0 which is part of our effort to publish Dockstore (this doesn't affect the content of the pipelines, simply their
>>  "descriptors" which allow them to be runnable via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL (which all work with CWL 1.0 and Kerian's test dataset) and has fixed issues with DKFZ and is testing the latter with a real sample shortly.
>> 
>> 1.      
>> BWA-Mem - Ready for testing by Francis' team
>> 
>> 
>> 2.      
>> Sanger - Ready for testing by Francis' team.
>> 
>> 
>> 3.      
>> EMBL - Ready for testing by Francis' team.
>> 
>> 
>> 4.      
>> DKFZ - Ready for testing by Francis' team. I've exchanged emails with Manuel Ballesteros who has been testing this pipeline.
>> 
>> 
>> 5.      
>> Broad - Variant calling (MuTect, dRanger, snowman), need some work, Gordan sent details previously
>> 
>> 
>> 6.      
>> OxoG - Waiting for Dimitri to provide OxoG docker
>> 
>> 
>> 7.      
>> Variantbam
>> 
>> 
>> 8.      
>> Consensus algorithm
>> 
>> 
>> PCAWG Docker (Dockstore) Testing Working Group <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>> 5min
>> 
>> 
>> Other business?
>> 
>> 
>> Group
>> 
>> 
>> 
>>  
>> 
>>  
>> 
>>  
>> 
>> Christina K. Yung, PhD
>> Project Manager, Cancer Genome Collaboratory
>> 
>> Ontario Institute for Cancer Research
>> MaRS Centre
>> 
>> 661 University Avenue, Suite 510 
>> Toronto, Ontario, Canada M5G 0A3
>> Tel: 416-673-8578
>> 
>> www.oicr.on.ca <http://www.oicr.on.ca/>
>>  
>> This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.
>> 
>>  
>> 
>> _______________________________________________
>> PAWG-TECH mailing list
>> PAWG-TECH at lists.icgc.org <mailto:PAWG-TECH at lists.icgc.org>
>> https://lists.icgc.org/mailman/listinfo/pawg-tech <https://lists.icgc.org/mailman/listinfo/pawg-tech>
> 
> 
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org <mailto:docktesters at lists.icgc.org>
> https://lists.icgc.org/mailman/listinfo/docktesters <https://lists.icgc.org/mailman/listinfo/docktesters>
> 
> 
> <Sanger.Test.log>




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161010/15554f04/attachment-0001.html>

From miguel.vazquez at cnio.es  Tue Oct 11 05:19:09 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Tue, 11 Oct 2016 11:19:09 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
Message-ID: <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>

Hi again,

Here is the log file for the Sanger pipeline using a different donor. I
hope this helps. Other than that there is not much I can do. The filesystem
does not seem to hold anything other than the input files that are copied
into the 'datastore' subdirectory, and the docker image has been wiped.

If someone has any other suggestion on how I can make myself useful in this
matter I'd be glad to hear it. Otherwise I'm moving on.

Regards,

Miguel

On Mon, Oct 10, 2016 at 9:11 AM, Miguel Vazquez <miguel.vazquez at cnio.es>
wrote:

> Hi all,
>
> I've reproduced the Sanger error again. I'm attaching the result of the
> command to see if this helps
>
> Best
>
> M
>
> On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca>
> wrote:
>
>> Dear Miguel and Junjun,
>>
>> Any more attempts on testing the PCAWG sanger docker container?
>>
>> If you reproduce the same error, we will need to involve Bryan and
>> Keiran Raine <kr2 at sanger.ac.uk> (author of the container).
>>
>> Let?s get this one figured out.
>>
>> I am going to assume that the making of the docker container is what
>> needs resolving.
>>
>> Brian: We may need your input here.
>>
>> Details of our current experiment should continue to be posted here:
>>
>> https://goo.gl/XX5BG9
>>
>> Thank you all,
>>
>> francis
>>
>> PS would be good for others on list to follow directions on above google
>> doc and also see if they can succeed on this workflow.
>>
>> Junjun and Miguel have tried different clouds, but used the sanger
>> workflow, on the same data set.
>>
>> Thank you for trying to do this.
>>
>> Would be good if I heard back from anybody before Monday AM (tech call).
>>
>> @bffo
>>
>> PS I CCed Keiran, but waiting to hear back from Brian before we need to
>> involve him some more.
>> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the
>> same data set).
>>
>>
>> --
>> B.F. Francis Ouellette          http://oicr.on.ca/person/fran
>> cis-ouellette
>>
>>
>>
>> Begin forwarded message:
>>
>> *From: *Christina Yung <Christina.Yung at oicr.on.ca>
>> *Subject: **[PAWG-TECH] Draft agenda for PCAWG-TECH teleconference*
>> *Date: *September 30, 2016 at 9:19:39 AM EDT
>> *To: *"pawg-tech (pawg-tech at lists.icgc.org)" <pawg-tech at lists.icgc.org>
>>
>> Hi Everyone,
>>
>>
>>
>> Below is a draft agenda for Monday?s tech call.  Please let me know if
>> you have any agenda items for discussion.
>>
>> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-
>> TECH+Teleconference
>>
>>
>>
>> Have a great weekend!
>>
>> Christina
>>
>>
>> Call Info
>>
>> *Usual Time            9 AM Eastern Time, Mondays*
>>
>> *UK                          0208 322 2500*
>>
>> *Canada                  1-866-220-6419*
>>
>> *United States        **1-877-420-0272*
>>
>> *All Others              Please see attached PDF file
>> <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with
>> a list of numbers for other countries.*
>>
>> *Participant Code  5910819#*
>> Agenda
>>
>>
>>
>> *Time*
>>
>> *Item*
>>
>> *Who*
>>
>> *Attachments/Links*
>>
>> 5min
>>
>> Welcome. Wait for group members to log on
>>
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>>
>> 10min
>>
>> Overall status
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>>
>> ?         Linkouts to Most Current PCAWG Data
>> <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>>
>> ?         Report data issues to pcawg-data at icgc.org, GNOS issue to:
>> Help at annaisystems.com
>>
>> ?         From Boston F2F: PCAWG datasets & dependencies
>> <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>>
>> *Action Items*
>>
>> 1.       [Joachim] Consensus SV - final?
>>
>> 2.       [Jakob] Consensus SNVs - changes to "SNV near indels"
>> annotation?
>>
>> 3.       [Junjun] Specimen ID mapping for miRNA and methylation
>>
>> 4.       [Jonathan & Joachim] Consensus calls for cell lines, followed
>> by filtering
>>
>> 5.       [Matthias & Gordon] Docker containers for filtering methods
>>
>> 6.       [Christina] Run alignment & variant workflows on
>> medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to
>> estimate false negative rate
>>
>> 7.       [Christina] Follow up with institutes interested in hosting
>> PCAWG data long-term
>>
>> 8.       [All] As per Jennifer's email on Sept 16, please provide
>> authorship information again or for the first time using PCAWG Author Form (
>> http://goo.gl/forms/5Wq5x5X1DK). Save the link "Edit your response" so
>> you can go back later to provide updates, for example about your evolving
>> role in writing specific papers.
>>
>> 9.       [All] Contribute to the manuscripts on
>>
>> a.       infrastructure: https://docs.google.com/docume
>> nt/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit
>>
>> b.       variants: Paper ( https://goo.gl/g9CLsu ), Supplement (
>> https://goo.gl/EWYh7e )
>>
>> c.       Rogue's Gallery of Cancer Genome Sequencing Artifacts ( outline
>> <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2>
>> )
>>
>> 10.   [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13
>> conference
>>
>> 10min
>>
>> Status of dockerizing workflows
>> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>>
>> Gordon Saksena
>> <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>>
>> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
>> *Status of PCAWG Workflow ports to Dockstore*:
>>
>> Denis has been porting the Dockstore entries to CWL version 1.0 which is
>> part of our effort to publish Dockstore (this doesn't affect the content of
>> the pipelines, simply their "descriptors" which allow them to be runnable
>> via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL
>> (which all work with CWL 1.0 and Kerian's test dataset) and has fixed
>> issues with DKFZ and is testing the latter with a real sample shortly.
>>
>> 1.       BWA-Mem - Ready for testing by Francis' team
>>
>> 2.       Sanger - Ready for testing by Francis' team.
>>
>> 3.       EMBL - Ready for testing by Francis' team.
>>
>> 4.       DKFZ - Ready for testing by Francis' team. I've exchanged
>> emails with Manuel Ballesteros who has been testing this pipeline.
>>
>> 5.       Broad - Variant calling (MuTect, dRanger, snowman), need some
>> work, Gordan sent details previously
>>
>> 6.       OxoG - Waiting for Dimitri to provide OxoG docker
>>
>> 7.       Variantbam
>>
>> 8.       Consensus algorithm
>>
>> PCAWG Docker (Dockstore) Testing Working Group
>> <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>>
>> 5min
>>
>> Other business?
>>
>> Group
>>
>>
>>
>>
>>
>>
>>
>> *Christina K. Yung, PhD*
>> Project Manager, Cancer Genome Collaboratory
>>
>> *Ontario Institute for Cancer Research*
>> MaRS Centre
>>
>> 661 University Avenue, Suite 510
>> Toronto, Ontario, Canada M5G 0A3
>> Tel: 416-673-8578
>>
>> www.oicr.on.ca
>>
>>
>>
>> This message and any attachments may contain confidential and/or
>> privileged information for the sole use of the intended recipient. Any
>> review or distribution by anyone other than the person for whom it was
>> originally intended is strictly prohibited. If you have received this
>> message in error, please contact the sender and delete all copies.
>> Opinions, conclusions or other information contained in this message may
>> not be that of the organization.
>>
>>
>> _______________________________________________
>> PAWG-TECH mailing list
>> PAWG-TECH at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/pawg-tech
>>
>>
>>
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/9888cf96/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Sanger.DO50398.log
Type: application/octet-stream
Size: 146368 bytes
Desc: not available
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/9888cf96/attachment-0001.obj>

From kr2 at sanger.ac.uk  Tue Oct 11 07:50:02 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Tue, 11 Oct 2016 12:50:02 +0100
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
Message-ID: <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>

Hi,

1. Can you confirm that the donors you are using are the standard BAMs mapped within the PanCancer project i.e. those available in GNOS as I have copied of all local?
2. Is there an MD5 check of the BAM files carried out?  When pulled from GSNO it was part of that application.
3. All the output of pindel is being written to '/var/spool/cwl/0/pindel/tmpPindel/'  Is this area part of the 1TB(or large) workspace?
4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.

If you don't have the ability for the state to be saved it's going to be very difficult to debug this,

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 11 Oct 2016, at 10:19, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
> 
> Hi again,
> 
> Here is the log file for the Sanger pipeline using a different donor. I hope this helps. Other than that there is not much I can do. The filesystem does not seem to hold anything other than the input files that are copied into the 'datastore' subdirectory, and the docker image has been wiped. 
> 
> If someone has any other suggestion on how I can make myself useful in this matter I'd be glad to hear it. Otherwise I'm moving on.
> 
> Regards,
> 
> Miguel
> 
> On Mon, Oct 10, 2016 at 9:11 AM, Miguel Vazquez <miguel.vazquez at cnio.es <mailto:miguel.vazquez at cnio.es>> wrote:
> Hi all,
> 
> I've reproduced the Sanger error again. I'm attaching the result of the command to see if this helps 
> 
> Best
> 
> M
> 
> On Fri, Sep 30, 2016 at 3:52 PM, Francis Ouellette <francis at oicr.on.ca <mailto:francis at oicr.on.ca>> wrote:
> Dear Miguel and Junjun, 
> 
> Any more attempts on testing the PCAWG sanger docker container?
> 
> If you reproduce the same error, we will need to involve Bryan and 
> Keiran Raine <kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>> (author of the container).
> 
> Let?s get this one figured out.
> 
> I am going to assume that the making of the docker container is what 
> needs resolving. 
> 
> Brian: We may need your input here.
> 
> Details of our current experiment should continue to be posted here:
> 
> https://goo.gl/XX5BG9 <https://goo.gl/XX5BG9>
> 
> Thank you all,
> 
> francis
> 
> PS would be good for others on list to follow directions on above google 
> doc and also see if they can succeed on this workflow.
> 
> Junjun and Miguel have tried different clouds, but used the sanger 
> workflow, on the same data set. 
> 
> Thank you for trying to do this.
> 
> Would be good if I heard back from anybody before Monday AM (tech call).
> 
> @bffo
> 
> PS I CCed Keiran, but waiting to hear back from Brian before we need to involve him some more.
> PPS Junjun/Miguel: maybe you can try the DKFZ docker as well? (on the same data set).
> 
>  
> -- 
> B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette <http://oicr.on.ca/person/francis-ouellette>    
> 
> 
> 
>> Begin forwarded message:
>> 
>> From: Christina Yung <Christina.Yung at oicr.on.ca <mailto:Christina.Yung at oicr.on.ca>>
>> Subject: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> Date: September 30, 2016 at 9:19:39 AM EDT
>> To: "pawg-tech (pawg-tech at lists.icgc.org <mailto:pawg-tech at lists.icgc.org>)" <pawg-tech at lists.icgc.org <mailto:pawg-tech at lists.icgc.org>>
>> 
>> Hi Everyone,
>> 
>>  
>> 
>> Below is a draft agenda for Monday?s tech call.  Please let me know if you have any agenda items for discussion.
>> 
>> https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference <https://wiki.oicr.on.ca/display/PANCANCER/2016-10-03+PCAWG-TECH+Teleconference>
>>  
>> 
>> Have a great weekend!
>> 
>> Christina
>> 
>>  
>> 
>> Call Info
>> Usual Time            9 AM Eastern Time, Mondays
>> UK                          0208 322 2500
>> Canada                  1-866-220-6419
>> United States        1-877-420-0272
>> All Others              Please see attached PDF file <https://wiki.oicr.on.ca/download/attachments/57776990/PAWG-TECH-Telecon-International-Numbers.pdf?version=1&modificationDate=1401456003000&api=v2> with a list of numbers for other countries.
>> Participant Code  5910819#
>> Agenda
>>  
>> Time
>> 
>> Item
>> 
>> Who
>> 
>> Attachments/Links
>> 
>> 5min
>> 
>> 
>> Welcome. Wait for group members to log on
>> 
>> 
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>> 
>> 
>> 
>> 10min
>> 
>> 
>> Overall status
>> 
>> 
>> 
>> Christina Yung <https://wiki.oicr.on.ca/display/~cyung>, OICR
>> 
>> 
>> ?        
>> Linkouts to Most Current PCAWG Data <https://wiki.oicr.on.ca/display/PANCANCER/Linkouts+to+Most+Current+PCAWG+Data>
>> 
>> ?        
>> Report data issues to pcawg-data at icgc.org <mailto:pcawg-data at icgc.org>, GNOS issue to: Help at annaisystems.com <mailto:Help at annaisystems.com>
>> 
>> ?        
>> From Boston F2F:
>> 
>> PCAWG datasets & dependencies <https://docs.google.com/spreadsheets/d/1VltMMLL5XDIFipM3zzLqZOGj5z-UxIMKLDbsuDiD2Q8/edit?usp=sharing>
>> 
>> Action Items
>> 
>> 1.      
>> [Joachim] Consensus SV - final?
>> 
>> 
>> 2.      
>> [Jakob] Consensus SNVs - changes to "SNV near indels" annotation?
>> 
>> 
>> 3.      
>> [Junjun] Specimen ID mapping for miRNA and methylation
>> 
>> 
>> 4.      
>> [Jonathan & Joachim] Consensus calls for cell lines, followed by filtering
>> 
>> 
>> 5.      
>> [Matthias & Gordon] Docker containers for filtering methods
>> 
>> 
>> 6.      
>> [Christina] Run alignment & variant workflows on medulloblastoma sample (tumor 40x, normal 30x) from ICGC benchmark to estimate false negative
>>  rate
>> 
>> 
>> 7.      
>> [Christina] Follow up with institutes interested in hosting PCAWG data long-term
>> 
>> 
>> 8.      
>> [All] As per Jennifer's email on Sept 16, please provide authorship information again or for the first time using PCAWG Author Form (http://goo.gl/forms/5Wq5x5X1DK <http://goo.gl/forms/5Wq5x5X1DK>).
>>  Save the link "Edit your response" so you can go back later to provide updates, for example about your evolving role in writing specific papers.
>> 
>> 
>> 9.      
>> [All] Contribute to the manuscripts on
>> 
>> 
>> a.      
>> infrastructure:
>> 
>> https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit <https://docs.google.com/document/d/10alAxrWLdLSyhci-rfNuVH13rFXCJkaY_rzf1KJn7nc/edit>
>> 
>> b.      
>> variants: Paper ( https://goo.gl/g9CLsu <https://goo.gl/g9CLsu> ), Supplement ( https://goo.gl/EWYh7e <https://goo.gl/EWYh7e> )
>> 
>> 
>> c.      
>> Rogue's Gallery of Cancer Genome Sequencing Artifacts (
>> 
>> outline <https://wiki.oicr.on.ca/download/attachments/66958609/Rogues%E2%80%99%20Gallery%20of%20Cancer%20Genome%20Sequencing%20Artefacts.pdf?version=1&modificationDate=1469802643000&api=v2> )
>> 
>> 
>> 10.  
>> [Junjun] Discuss PCAWG vs DCC glossary terms at next PCAWG-10/13 conference
>> 
>> 
>> 10min
>> 
>> 
>> Status of dockerizing workflows
>> 
>> 
>> 
>> Brian O'Connor <https://wiki.oicr.on.ca/display/~boconnor>, UCSC
>> 
>> Gordon Saksena <https://wiki.oicr.on.ca/display/~gsaksena at broadinstitute.org>, Broad
>> 
>> Francis Ouellette <https://wiki.oicr.on.ca/display/~francis>, OICR
>> 
>> 
>> Status of PCAWG Workflow ports to Dockstore:
>> 
>> Denis has been porting the Dockstore entries to CWL version 1.0 which is part of our effort to publish Dockstore (this doesn't affect the content of the pipelines, simply their
>>  "descriptors" which allow them to be runnable via Dockstore). Denis has also worked on testing BWA-Mem, Sanger, EMBL (which all work with CWL 1.0 and Kerian's test dataset) and has fixed issues with DKFZ and is testing the latter with a real sample shortly.
>> 
>> 1.      
>> BWA-Mem - Ready for testing by Francis' team
>> 
>> 
>> 2.      
>> Sanger - Ready for testing by Francis' team.
>> 
>> 
>> 3.      
>> EMBL - Ready for testing by Francis' team.
>> 
>> 
>> 4.      
>> DKFZ - Ready for testing by Francis' team. I've exchanged emails with Manuel Ballesteros who has been testing this pipeline.
>> 
>> 
>> 5.      
>> Broad - Variant calling (MuTect, dRanger, snowman), need some work, Gordan sent details previously
>> 
>> 
>> 6.      
>> OxoG - Waiting for Dimitri to provide OxoG docker
>> 
>> 
>> 7.      
>> Variantbam
>> 
>> 
>> 8.      
>> Consensus algorithm
>> 
>> 
>> PCAWG Docker (Dockstore) Testing Working Group <https://wiki.oicr.on.ca/display/PANCANCER/PCAWG+Docker+%28Dockstore%29+Testing+Working+Group>
>> 5min
>> 
>> 
>> Other business?
>> 
>> 
>> Group
>> 
>> 
>> 
>>  
>> 
>>  
>> 
>>  
>> 
>> Christina K. Yung, PhD
>> Project Manager, Cancer Genome Collaboratory
>> 
>> Ontario Institute for Cancer Research
>> MaRS Centre
>> 
>> 661 University Avenue, Suite 510 
>> Toronto, Ontario, Canada M5G 0A3
>> Tel: 416-673-8578
>> 
>> www.oicr.on.ca <http://www.oicr.on.ca/>
>>  
>> This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.
>> 
>>  
>> 
>> _______________________________________________
>> PAWG-TECH mailing list
>> PAWG-TECH at lists.icgc.org <mailto:PAWG-TECH at lists.icgc.org>
>> https://lists.icgc.org/mailman/listinfo/pawg-tech <https://lists.icgc.org/mailman/listinfo/pawg-tech>
> 
> 
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org <mailto:docktesters at lists.icgc.org>
> https://lists.icgc.org/mailman/listinfo/docktesters <https://lists.icgc.org/mailman/listinfo/docktesters>
> 
> 
> 
> <Sanger.DO50398.log>




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/215e51ee/attachment-0001.html>

From miguel.vazquez at cnio.es  Tue Oct 11 08:22:11 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Tue, 11 Oct 2016 14:22:11 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
Message-ID: <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>

> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds
> which could indicate a problem with either the headers or the absence of
> the BAS file from the expected location.
>
>
I think that you just revealed the problem. There is in fact no BAS files
only BAM and BAI. There where BAS files for the test data HCC1143 which is
the one that in fact work. It seems like BAS files are not gathered by
gnos, could that be? or that my script fails to copy them. I'll try to
gather a different sample with my client and check.

Not knowing a thing about these files explains why I didn't notice. I'll
get back to you when I know more.

Best

Miguel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/8b2b6da0/attachment.html>

From miguel.vazquez at cnio.es  Tue Oct 11 08:31:02 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Tue, 11 Oct 2016 14:31:02 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
Message-ID: <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>

Keiran,

Its downloading the files still but in fact it does not seem to download
any BAS file. Could you please educate me a bit on what are these and how I
can create them?

Best

Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es>
wrote:

>
> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds
>> which could indicate a problem with either the headers or the absence of
>> the BAS file from the expected location.
>>
>>
> I think that you just revealed the problem. There is in fact no BAS files
> only BAM and BAI. There where BAS files for the test data HCC1143 which is
> the one that in fact work. It seems like BAS files are not gathered by
> gnos, could that be? or that my script fails to copy them. I'll try to
> gather a different sample with my client and check.
>
> Not knowing a thing about these files explains why I didn't notice. I'll
> get back to you when I know more.
>
> Best
>
> Miguel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/d5aae765/attachment.html>

From kr2 at sanger.ac.uk  Tue Oct 11 08:40:02 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Tue, 11 Oct 2016 13:40:02 +0100
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
Message-ID: <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] | 	Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] | 	Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
> 
> Keiran,
> 
> Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
> 
> Best
> 
> Miguel
> 
> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es <mailto:miguel.vazquez at cnio.es>> wrote:
> 
> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.
> 
> 
> I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check. 
> 
> Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
> 
> Best
> 
> Miguel
> 




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/8cbb787d/attachment.html>

From kr2 at sanger.ac.uk  Tue Oct 11 08:44:19 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Tue, 11 Oct 2016 13:44:19 +0100
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
Message-ID: <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>

Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk> wrote:
> 
> Hi,
> 
> There is a step generating the BAS files:
> 
> [2016/10/10 07:28:37] | 	Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
> [2016/10/10 07:28:37] | 	Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh
> 
> But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.
> 
> This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.
> 
> Hope this is easier to solve now,
> 
> Keiran Raine
> Principal Bioinformatician
> Cancer Genome Project
> Wellcome Trust Sanger Institute
> 
> kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>
> Tel:+44 (0)1223 834244 Ext: 4983
> Office: H104
> 
>> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es <mailto:miguel.vazquez at cnio.es>> wrote:
>> 
>> Keiran,
>> 
>> Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
>> 
>> Best
>> 
>> Miguel
>> 
>> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es <mailto:miguel.vazquez at cnio.es>> wrote:
>> 
>> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.
>> 
>> 
>> I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check. 
>> 
>> Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
>> 
>> Best
>> 
>> Miguel
>> 
> 




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/553b87e5/attachment-0001.html>

From miguel.vazquez at cnio.es  Tue Oct 11 08:47:03 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Tue, 11 Oct 2016 14:47:03 +0200
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
Message-ID: <CA+dx8marTVbUN1xwQOEQiD4Q861XcapO1aq-jvXqCeJ_0bNHvQ@mail.gmail.com>

Hi Keiran,



On Tue, Oct 11, 2016 at 2:40 PM, Keiran Raine <kr2 at sanger.ac.uk> wrote:

> Hi,
>
> There is a step generating the BAS files:
>
> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-
> 8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_
> basFileGenerate_control_11-runner.sh
> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-
> 8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_
> basFileGenerate_tumours_12-runner.sh
>
> But if the BAM files and BAS aren't co-located then you have a problem.
> You could symlink the BAM files into the work space and have all tools work
> from that path instead, deleting the symlinks at the end.
>

I'm afraid that this is not under my control. Since I'm running this
through dockstore there is little I can do about it as far as I understand
it.

Maybe someone that knows dockstore can help out at this point?

Best

Miguel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/6fe8ca02/attachment.html>

From francis at oicr.on.ca  Tue Oct 11 09:20:32 2016
From: francis at oicr.on.ca (Francis Ouellette)
Date: Tue, 11 Oct 2016 13:20:32 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
 teleconference
In-Reply-To: <CA+dx8marTVbUN1xwQOEQiD4Q861XcapO1aq-jvXqCeJ_0bNHvQ@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <CA+dx8marTVbUN1xwQOEQiD4Q861XcapO1aq-jvXqCeJ_0bNHvQ@mail.gmail.com>
Message-ID: <CE46C114-C947-4DAA-8A64-5835252D985D@oicr.on.ca>

Brian/Dennis:

Suggestion for a tool/container:

Additional documentation (in readme.md?): checklist of which files need to be there/contributed to the existing container to make the pipeline work.

@bffo


On Oct 11, 2016, at 8:47 AM, Miguel Vazquez <miguel.vazquez at cnio.es<mailto:miguel.vazquez at cnio.es>> wrote:

Hi Keiran,



On Tue, Oct 11, 2016 at 2:40 PM, Keiran Raine <kr2 at sanger.ac.uk<mailto:kr2 at sanger.ac.uk>> wrote:
Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

I'm afraid that this is not under my control. Since I'm running this through dockstore there is little I can do about it as far as I understand it.

Maybe someone that knows dockstore can help out at this point?

Best

Miguel



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/c878318f/attachment.html>

From Denis.Yuen at oicr.on.ca  Tue Oct 11 10:55:32 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Tue, 11 Oct 2016 14:55:32 +0000
Subject: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for
	PCAWG-TECH	teleconference
In-Reply-To: <CA+dx8marTVbUN1xwQOEQiD4Q861XcapO1aq-jvXqCeJ_0bNHvQ@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>,
 <CA+dx8marTVbUN1xwQOEQiD4Q861XcapO1aq-jvXqCeJ_0bNHvQ@mail.gmail.com>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A112A@exmb2.ad.oicr.on.ca>

Hi,
Sorry, catching up with the thread after thanksgiving.

For debugging the state of the filesystem, you can instruct Dockstore to leave the filesystem in place after execution. You can subsequently start the container interactively and examine it.

 The documentation is here https://github.com/ga4gh/dockstore-ui/commit/b3fe88d706da59e6af350ff1dec9d9492a690724 but in short, you need to add `cwltool-extra-parameters: --leave-container`to your config.

For the bas files, Keiran, do you have any thoughts on how this functions differently between the test data and the donor Miguel is using? From the code snippet https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<https://webmail.oicr.on.ca/owa/redir.aspx?REF=fliLhQL1K5STxPd-1ApDZRhtddKlatekf0suF2qrynCMdSag4vHTCAFodHRwczovL2dpdGh1Yi5jb20vSUNHQy1UQ0dBLVBhbkNhbmNlci9DR1AtU29tYXRpYy1Eb2NrZXIvYmxvYi9kZXZlbG9wL3NyYy9tYWluL2phdmEvaW8vc2Vxd2FyZS9wYW5jYW5jZXIvQ2dwU29tYXRpY0NvcmUuamF2YSNMNzY5LUw3ODA.> it looks like the bas files are generated from the bam files. Miguel, I would try to to look for that resulting bas file after saving the filesystem as above and see if there appears to be anything wrong with it.




Denis Yuen
Bioinformatics Software Developer

Ontario Institute for Cancer Research
MaRS Centre
661 University Avenue
Suite 510
Toronto, Ontario, Canada M5G 0A3

Toll-free: 1-866-678-6427
Twitter: @OICR_news
www.oicr.on.ca<http://www.oicr.on.ca/>

This message and any attachments may contain confidential and/or privileged information for the sole use of the intended recipient. Any review or distribution by anyone other than the person for whom it was originally intended is strictly prohibited. If you have received this message in error, please contact the sender and delete all copies. Opinions, conclusions or other information contained in this message may not be that of the organization.

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es]
Sent: October 11, 2016 8:47 AM
To: Keiran Raine
Cc: docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] Fwd: [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Keiran,



On Tue, Oct 11, 2016 at 2:40 PM, Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=KcNownvbPs4UQA-6nvkDaABjxnk60l6YSPDuNmlbXpqQUuSo5fHTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> wrote:
Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

I'm afraid that this is not under my control. Since I'm running this through dockstore there is little I can do about it as far as I understand it.

Maybe someone that knows dockstore can help out at this point?

Best

Miguel


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161011/fc1c76e1/attachment-0001.html>

From miguel.vazquez at cnio.es  Wed Oct 12 05:37:26 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Wed, 12 Oct 2016 11:37:26 +0200
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
Message-ID: <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>

[The rest of the list where out of the loop for this part of the
conversation, I'm putting them back in. In short, the Sanger pipeline
produces the BAS file but not co-located with the BAM]

Hi Keiran,

Would it be possible then to change this and try again? what needs to
happen? I guess you'll need to change the code and a new docker image be
produced. Would this be our best alternative?


Miguel



On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk> wrote:

> In the original version we didn't do this step, if we have write access it
> can be made to do that
>
> Keiran Raine
> Principal Bioinformatician
> Cancer Genome Project
> Wellcome Trust Sanger Institute
>
> kr2 at sanger.ac.uk
> Tel:+44 (0)1223 834244 Ext: 4983
> Office: H104
>
> On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
>
> Hi Keiran,
>
> If the BAS and BAM files need to be collocated, why is it not created next
> to the BAM file?
>
> Would it not be better if it read
>
> private Job basFileBaseJob(int tumourCount, String sampleBam, String
> process, int index) {
> Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process,
> index);
> File f = new File(sampleBam);
> thisJob.getCommand()
> .addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
> .addArgument(installBase)
> .addArgument("bam_stats")
> .addArgument("-i " + sampleBam)
> .addArgument("-o " + sampleBam + ".bas")
> ;
> return thisJob;
> }
>
> Best
>
> Miguel
>
> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk> wrote:
>
>> Relevant section of code:
>>
>> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/bl
>> ob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore
>> .java#L769-L780
>>
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>
>> kr2 at sanger.ac.uk
>> Tel:+44 (0)1223 834244 Ext: 4983
>> Office: H104
>>
>> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk> wrote:
>>
>> Hi,
>>
>> There is a step generating the BAS files:
>>
>> [2016/10/10 07:28:37] |  Running command: bash
>> /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/genera
>> ted-scripts/s58_basFileGenerate_control_11-runner.sh
>> [2016/10/10 07:28:37] |  Running command: bash
>> /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/genera
>> ted-scripts/s58_basFileGenerate_tumours_12-runner.sh
>>
>> But if the BAM files and BAS aren't co-located then you have a problem.
>> You could symlink the BAM files into the work space and have all tools work
>> from that path instead, deleting the symlinks at the end.
>>
>> This is one of the changes we had to implement differently as the BAS
>> file data was being held in the GNOS xml data structures during the initial
>> processing.  Moving to this means that any BAM input is sufficient.
>>
>> Hope this is easier to solve now,
>>
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>
>> kr2 at sanger.ac.uk
>> Tel:+44 (0)1223 834244 Ext: 4983
>> Office: H104
>>
>> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
>>
>> Keiran,
>>
>> Its downloading the files still but in fact it does not seem to download
>> any BAS file. Could you please educate me a bit on what are these and how I
>> can create them?
>>
>> Best
>>
>> Miguel
>>
>> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es>
>> wrote:
>>
>>>
>>> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds
>>>> which could indicate a problem with either the headers or the absence of
>>>> the BAS file from the expected location.
>>>>
>>>>
>>> I think that you just revealed the problem. There is in fact no BAS
>>> files only BAM and BAI. There where BAS files for the test data HCC1143
>>> which is the one that in fact work. It seems like BAS files are not
>>> gathered by gnos, could that be? or that my script fails to copy them. I'll
>>> try to gather a different sample with my client and check.
>>>
>>> Not knowing a thing about these files explains why I didn't notice. I'll
>>> get back to you when I know more.
>>>
>>> Best
>>>
>>> Miguel
>>>
>>
>>
>>
>>
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research
>> Limited, a charity registered in England with number 1021457 and a company
>> registered in England with number 2742969, whose registered office is 215
>> Euston Road, London, NW1 2BE.
>>
>
>
>
> -- The Wellcome Trust Sanger Institute is operated by Genome Research
> Limited, a charity registered in England with number 1021457 and a company
> registered in England with number 2742969, whose registered office is 215
> Euston Road, London, NW1 2BE.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/dbf1043e/attachment-0001.html>

From kr2 at sanger.ac.uk  Wed Oct 12 06:16:57 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Wed, 12 Oct 2016 11:16:57 +0100
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
Message-ID: <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>

Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
> 
> [The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
> 
> Hi Keiran,
> 
> Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative? 
> 
> 
> Miguel
> 
> 
> 
> On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>> wrote:
> In the original version we didn't do this step, if we have write access it can be made to do that
> 
> Keiran Raine
> Principal Bioinformatician
> Cancer Genome Project
> Wellcome Trust Sanger Institute
> 
> kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>
> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
> Office: H104
> 
>> On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es <mailto:miguel.vazquez at cnio.es>> wrote:
>> 
>> Hi Keiran,
>> 
>> If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
>> 
>> Would it not be better if it read
>> 
>> private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
>> Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
>> File f = new File(sampleBam);
>> thisJob.getCommand()
>> .addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
>> .addArgument(installBase)
>> .addArgument("bam_stats")
>> .addArgument("-i " + sampleBam)
>> .addArgument("-o " + sampleBam + ".bas")
>> ;
>> return thisJob;
>> }
>> 
>> Best
>> 
>> Miguel
>> 
>> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>> wrote:
>> Relevant section of code:
>> 
>> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780>
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>> 
>> kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>> 
>>> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>> wrote:
>>> 
>>> Hi,
>>> 
>>> There is a step generating the BAS files:
>>> 
>>> [2016/10/10 07:28:37] | 	Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
>>> [2016/10/10 07:28:37] | 	Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh
>>> 
>>> But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.
>>> 
>>> This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.
>>> 
>>> Hope this is easier to solve now,
>>> 
>>> Keiran Raine
>>> Principal Bioinformatician
>>> Cancer Genome Project
>>> Wellcome Trust Sanger Institute
>>> 
>>> kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>
>>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>>> Office: H104
>>> 
>>>> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es <mailto:miguel.vazquez at cnio.es>> wrote:
>>>> 
>>>> Keiran,
>>>> 
>>>> Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
>>>> 
>>>> Best
>>>> 
>>>> Miguel
>>>> 
>>>> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es <mailto:miguel.vazquez at cnio.es>> wrote:
>>>> 
>>>> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.
>>>> 
>>>> 
>>>> I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check. 
>>>> 
>>>> Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
>>>> 
>>>> Best
>>>> 
>>>> Miguel
>>>> 
>>> 
>> 
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>> 
> 
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
> 




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/6f250a69/attachment-0001.html>

From miguel.vazquez at cnio.es  Wed Oct 12 07:17:10 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Wed, 12 Oct 2016 13:17:10 +0200
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
Message-ID: <CA+dx8mZ5fV_U1HbxFS1HUg=tG4M_fxCoTsBUKJBV0JErVytewA@mail.gmail.com>

Ok Keiran, I leave it up to you guys then. I'll try again when the issue is
resolved somehow.

Thanks for you help

Miguel

On Wed, Oct 12, 2016 at 12:16 PM, Keiran Raine <kr2 at sanger.ac.uk> wrote:

> Hi,
>
> This is assuming that it is possible to write to the location the BAM are
> in.
>
> I think Denis would be best placed to make the minor modification as I
> don't know the process they are using for build and deploy of the images (I
> made modifications and then handed over for CWL).
>
> Regards,
>
> Keiran Raine
> Principal Bioinformatician
> Cancer Genome Project
> Wellcome Trust Sanger Institute
>
> kr2 at sanger.ac.uk
> Tel:+44 (0)1223 834244 Ext: 4983
> Office: H104
>
> On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
>
> [The rest of the list where out of the loop for this part of the
> conversation, I'm putting them back in. In short, the Sanger pipeline
> produces the BAS file but not co-located with the BAM]
>
> Hi Keiran,
>
> Would it be possible then to change this and try again? what needs to
> happen? I guess you'll need to change the code and a new docker image be
> produced. Would this be our best alternative?
>
>
> Miguel
>
>
>
> On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk> wrote:
>
>> In the original version we didn't do this step, if we have write access
>> it can be made to do that
>>
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>
>> kr2 at sanger.ac.uk
>> Tel:+44 (0)1223 834244 Ext: 4983
>> Office: H104
>>
>> On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
>>
>> Hi Keiran,
>>
>> If the BAS and BAM files need to be collocated, why is it not created
>> next to the BAM file?
>>
>> Would it not be better if it read
>>
>> private Job basFileBaseJob(int tumourCount, String sampleBam, String
>> process, int index) {
>> Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process,
>> index);
>> File f = new File(sampleBam);
>> thisJob.getCommand()
>> .addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
>> .addArgument(installBase)
>> .addArgument("bam_stats")
>> .addArgument("-i " + sampleBam)
>> .addArgument("-o " + sampleBam + ".bas")
>> ;
>> return thisJob;
>> }
>>
>> Best
>>
>> Miguel
>>
>> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk> wrote:
>>
>>> Relevant section of code:
>>>
>>> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/bl
>>> ob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore
>>> .java#L769-L780
>>>
>>> Keiran Raine
>>> Principal Bioinformatician
>>> Cancer Genome Project
>>> Wellcome Trust Sanger Institute
>>>
>>> kr2 at sanger.ac.uk
>>> Tel:+44 (0)1223 834244 Ext: 4983
>>> Office: H104
>>>
>>> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk> wrote:
>>>
>>> Hi,
>>>
>>> There is a step generating the BAS files:
>>>
>>> [2016/10/10 07:28:37] |  Running command: bash
>>> /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/genera
>>> ted-scripts/s58_basFileGenerate_control_11-runner.sh
>>> [2016/10/10 07:28:37] |  Running command: bash
>>> /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/genera
>>> ted-scripts/s58_basFileGenerate_tumours_12-runner.sh
>>>
>>> But if the BAM files and BAS aren't co-located then you have a problem.
>>> You could symlink the BAM files into the work space and have all tools work
>>> from that path instead, deleting the symlinks at the end.
>>>
>>> This is one of the changes we had to implement differently as the BAS
>>> file data was being held in the GNOS xml data structures during the initial
>>> processing.  Moving to this means that any BAM input is sufficient.
>>>
>>> Hope this is easier to solve now,
>>>
>>> Keiran Raine
>>> Principal Bioinformatician
>>> Cancer Genome Project
>>> Wellcome Trust Sanger Institute
>>>
>>> kr2 at sanger.ac.uk
>>> Tel:+44 (0)1223 834244 Ext: 4983
>>> Office: H104
>>>
>>> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es> wrote:
>>>
>>> Keiran,
>>>
>>> Its downloading the files still but in fact it does not seem to download
>>> any BAS file. Could you please educate me a bit on what are these and how I
>>> can create them?
>>>
>>> Best
>>>
>>> Miguel
>>>
>>> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es>
>>> wrote:
>>>
>>>>
>>>> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds
>>>>> which could indicate a problem with either the headers or the absence of
>>>>> the BAS file from the expected location.
>>>>>
>>>>>
>>>> I think that you just revealed the problem. There is in fact no BAS
>>>> files only BAM and BAI. There where BAS files for the test data HCC1143
>>>> which is the one that in fact work. It seems like BAS files are not
>>>> gathered by gnos, could that be? or that my script fails to copy them. I'll
>>>> try to gather a different sample with my client and check.
>>>>
>>>> Not knowing a thing about these files explains why I didn't notice.
>>>> I'll get back to you when I know more.
>>>>
>>>> Best
>>>>
>>>> Miguel
>>>>
>>>
>>>
>>>
>>>
>>> -- The Wellcome Trust Sanger Institute is operated by Genome Research
>>> Limited, a charity registered in England with number 1021457 and a company
>>> registered in England with number 2742969, whose registered office is 215
>>> Euston Road, London, NW1 2BE.
>>>
>>
>>
>>
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research
>> Limited, a charity registered in England with number 1021457 and a company
>> registered in England with number 2742969, whose registered office is 215
>> Euston Road, London, NW1 2BE.
>>
>
>
>
> -- The Wellcome Trust Sanger Institute is operated by Genome Research
> Limited, a charity registered in England with number 1021457 and a company
> registered in England with number 2742969, whose registered office is 215
> Euston Road, London, NW1 2BE.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/a49a991e/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Wed Oct 12 10:36:58 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Wed, 12 Oct 2016 14:36:58 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for
	PCAWG-TECH	teleconference
In-Reply-To: <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>,
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>

Hi,
I can make the modification, I'll run it through the test data and that should finish in roughly a day.
In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Keiran Raine [kr2 at sanger.ac.uk]
Sent: October 12, 2016 6:16 AM
To: Miguel Vazquez
Cc: docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=F46rw9DX4AXQvEjmTDF0k8PzjFoocSnJlahDqCMSnlA-dzeqrPLTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:

[The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]

Hi Keiran,

Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative?


Miguel



On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> wrote:
In the original version we didn't do this step, if we have write access it can be made to do that

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=F46rw9DX4AXQvEjmTDF0k8PzjFoocSnJlahDqCMSnlA-dzeqrPLTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:

Hi Keiran,

If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?

Would it not be better if it read

private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
File f = new File(sampleBam);
thisJob.getCommand()
.addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
.addArgument(installBase)
.addArgument("bam_stats")
.addArgument("-i " + sampleBam)
.addArgument("-o " + sampleBam + ".bas")
;
return thisJob;
}

Best

Miguel

On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> wrote:
Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<redir.aspx?REF=zCVU_6JvYkLiMhy3OP2CK3EOh5uPDCaP0xoAupVCznI-dzeqrPLTCAFodHRwczovL2dpdGh1Yi5jb20vSUNHQy1UQ0dBLVBhbkNhbmNlci9DR1AtU29tYXRpYy1Eb2NrZXIvYmxvYi9kZXZlbG9wL3NyYy9tYWluL2phdmEvaW8vc2Vxd2FyZS9wYW5jYW5jZXIvQ2dwU29tYXRpY0NvcmUuamF2YSNMNzY5LUw3ODA.>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> wrote:

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=F46rw9DX4AXQvEjmTDF0k8PzjFoocSnJlahDqCMSnlA-dzeqrPLTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:

Keiran,

Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?

Best

Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=F46rw9DX4AXQvEjmTDF0k8PzjFoocSnJlahDqCMSnlA-dzeqrPLTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:

4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.


I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check.

Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.

Best

Miguel




-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/9077d260/attachment-0001.html>

From kr2 at sanger.ac.uk  Wed Oct 12 10:49:27 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Wed, 12 Oct 2016 15:49:27 +0100
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
Message-ID: <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>

Hi Denis,

I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:
> 
> Hi,
> I can make the modification, I'll run it through the test data and that should finish in roughly a day. 
> In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?
> 
> 
> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Keiran Raine [kr2 at sanger.ac.uk]
> Sent: October 12, 2016 6:16 AM
> To: Miguel Vazquez
> Cc: docktesters at lists.icgc.org
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi,
> 
> This is assuming that it is possible to write to the location the BAM are in.
> 
> I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).
> 
> Regards,
> 
> Keiran Raine
> Principal Bioinformatician
> Cancer Genome Project
> Wellcome Trust Sanger Institute
> 
> kr2 at sanger.ac.uk <x-msg://29/redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
> Tel:+44 (0)1223 834244 Ext: 4983
> Office: H104
> 
>> On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://29/redir.aspx?REF=F46rw9DX4AXQvEjmTDF0k8PzjFoocSnJlahDqCMSnlA-dzeqrPLTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:
>> 
>> [The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
>> 
>> Hi Keiran,
>> 
>> Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative? 
>> 
>> 
>> Miguel
>> 
>> 
>> 
>> On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://29/redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> wrote:
>> In the original version we didn't do this step, if we have write access it can be made to do that
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>> 
>> kr2 at sanger.ac.uk <x-msg://29/redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>> 
>>> On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://29/redir.aspx?REF=F46rw9DX4AXQvEjmTDF0k8PzjFoocSnJlahDqCMSnlA-dzeqrPLTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:
>>> 
>>> Hi Keiran,
>>> 
>>> If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
>>> 
>>> Would it not be better if it read
>>> 
>>> private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
>>> Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
>>> File f = new File(sampleBam);
>>> thisJob.getCommand()
>>> .addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
>>> .addArgument(installBase)
>>> .addArgument("bam_stats")
>>> .addArgument("-i " + sampleBam)
>>> .addArgument("-o " + sampleBam + ".bas")
>>> ;
>>> return thisJob;
>>> }
>>> 
>>> Best
>>> 
>>> Miguel
>>> 
>>> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://29/redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> wrote:
>>> Relevant section of code:
>>> 
>>> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <x-msg://29/redir.aspx?REF=zCVU_6JvYkLiMhy3OP2CK3EOh5uPDCaP0xoAupVCznI-dzeqrPLTCAFodHRwczovL2dpdGh1Yi5jb20vSUNHQy1UQ0dBLVBhbkNhbmNlci9DR1AtU29tYXRpYy1Eb2NrZXIvYmxvYi9kZXZlbG9wL3NyYy9tYWluL2phdmEvaW8vc2Vxd2FyZS9wYW5jYW5jZXIvQ2dwU29tYXRpY0NvcmUuamF2YSNMNzY5LUw3ODA.>
>>> 
>>> Keiran Raine
>>> Principal Bioinformatician
>>> Cancer Genome Project
>>> Wellcome Trust Sanger Institute
>>> 
>>> kr2 at sanger.ac.uk <x-msg://29/redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
>>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>>> Office: H104
>>> 
>>>> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk <x-msg://29/redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>> wrote:
>>>> 
>>>> Hi,
>>>> 
>>>> There is a step generating the BAS files:
>>>> 
>>>> [2016/10/10 07:28:37] | 
>>>> Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
>>>> [2016/10/10 07:28:37] | 
>>>> Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh
>>>> 
>>>> But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.
>>>> 
>>>> This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.
>>>> 
>>>> Hope this is easier to solve now,
>>>> 
>>>> Keiran Raine
>>>> Principal Bioinformatician
>>>> Cancer Genome Project
>>>> Wellcome Trust Sanger Institute
>>>> 
>>>> kr2 at sanger.ac.uk <x-msg://29/redir.aspx?REF=tMZ0FjU7Kgm89it3zX1rIeGk_Zd2_xzeB1YH6GIYBZo-dzeqrPLTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
>>>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>>>> Office: H104
>>>> 
>>>>> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://29/redir.aspx?REF=F46rw9DX4AXQvEjmTDF0k8PzjFoocSnJlahDqCMSnlA-dzeqrPLTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:
>>>>> 
>>>>> Keiran,
>>>>> 
>>>>> Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
>>>>> 
>>>>> Best
>>>>> 
>>>>> Miguel
>>>>> 
>>>>> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://29/redir.aspx?REF=F46rw9DX4AXQvEjmTDF0k8PzjFoocSnJlahDqCMSnlA-dzeqrPLTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>> wrote:
>>>>> 
>>>>> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.
>>>>> 
>>>>> 
>>>>> I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check. 
>>>>> 
>>>>> Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
>>>>> 
>>>>> Best
>>>>> 
>>>>> Miguel
>>>>> 
>>>> 
>>> 
>>> 
>>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>>> 
>> 
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>> 
> 
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/4495f8cc/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Wed Oct 12 10:59:32 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Wed, 12 Oct 2016 14:59:32 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
 teleconference
In-Reply-To: <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>,
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca>

Hi,

While that would have been a good explanation, unfortunately, it doesn't seem to be the case.
In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl ) , the bam files are described like


inputs:
  tumor:
    type: File
    inputBinding:
      position: 1
      prefix: --tumor
    secondaryFiles:
    - .bai

  refFrom:
    type: File
    inputBinding:
      position: 3
      prefix: --refFrom
  bbFrom:
    type: File
    inputBinding:
      position: 4
      prefix: --bbFrom
  normal:
    type: File
    inputBinding:
      position: 2
      prefix: --normal
    secondaryFiles:
    - .bai


The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime.

________________________________
From: Keiran Raine [kr2 at sanger.ac.uk]
Sent: October 12, 2016 10:49 AM
To: Denis Yuen
Cc: Miguel Vazquez; docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Denis,

I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=J1koWwfjkq5EAdaIuQMRk95_ySl3wotqeE8pmPxjmS9wARJyr_LTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca<redir.aspx?REF=CiFHvlnft--70vaHhkCfTkibUdEQZ0jJu493cQ9nD6FwARJyr_LTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:

Hi,
I can make the modification, I'll run it through the test data and that should finish in roughly a day.
In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=POTlcWOY4NGvVrBhF5zcLO2SdwvkHeTOjluUtEPtlfJwARJyr_LTCAFtYWlsdG86ZG9ja3Rlc3RlcnMtYm91bmNlcytkZW5pcy55dWVuPW9pY3Iub24uY2FAbGlzdHMuaWNnYy5vcmc.> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=POTlcWOY4NGvVrBhF5zcLO2SdwvkHeTOjluUtEPtlfJwARJyr_LTCAFtYWlsdG86ZG9ja3Rlc3RlcnMtYm91bmNlcytkZW5pcy55dWVuPW9pY3Iub24uY2FAbGlzdHMuaWNnYy5vcmc.>] on behalf of Keiran Raine [kr2 at sanger.ac.uk<redir.aspx?REF=J1koWwfjkq5EAdaIuQMRk95_ySl3wotqeE8pmPxjmS9wARJyr_LTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>]
Sent: October 12, 2016 6:16 AM
To: Miguel Vazquez
Cc: docktesters at lists.icgc.org<redir.aspx?REF=WnRYWRCxTfjIWXAX1VfEuNFz6QJ-EOMRQJn6dJiu3qNwARJyr_LTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

[The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]

Hi Keiran,

Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative?


Miguel



On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
In the original version we didn't do this step, if we have write access it can be made to do that

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Hi Keiran,

If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?

Would it not be better if it read

private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
File f = new File(sampleBam);
thisJob.getCommand()
.addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
.addArgument(installBase)
.addArgument("bam_stats")
.addArgument("-i " + sampleBam)
.addArgument("-o " + sampleBam + ".bas")
;
return thisJob;
}

Best

Miguel

On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<UrlBlockedError.aspx>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Keiran,

Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?

Best

Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.


I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check.

Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.

Best

Miguel




-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/de0aa558/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Wed Oct 12 12:04:47 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Wed, 12 Oct 2016 16:04:47 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
 teleconference
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>,
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>,
 <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A1314@exmb2.ad.oicr.on.ca>

Hi,

Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
I'm attaching the build log from the Dockerfile and the log from inside the container.



________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca]
Sent: October 12, 2016 10:59 AM
To: Keiran Raine
Cc: docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

While that would have been a good explanation, unfortunately, it doesn't seem to be the case.
In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl<redir.aspx?REF=Gv5o-fd4-K3pN2kTcoCO56SkL2SXzWK1AA64wrhkr3G8JRoxufLTCAFodHRwczovL2dpdGh1Yi5jb20vSUNHQy1UQ0dBLVBhbkNhbmNlci9DR1AtU29tYXRpYy1Eb2NrZXIvYmxvYi9kZXZlbG9wL0RvY2tzdG9yZS5jd2w.> ) , the bam files are described like


inputs:
  tumor:
    type: File
    inputBinding:
      position: 1
      prefix: --tumor
    secondaryFiles:
    - .bai

  refFrom:
    type: File
    inputBinding:
      position: 3
      prefix: --refFrom
  bbFrom:
    type: File
    inputBinding:
      position: 4
      prefix: --bbFrom
  normal:
    type: File
    inputBinding:
      position: 2
      prefix: --normal
    secondaryFiles:
    - .bai


The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime.

________________________________
From: Keiran Raine [kr2 at sanger.ac.uk]
Sent: October 12, 2016 10:49 AM
To: Denis Yuen
Cc: Miguel Vazquez; docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Denis,

I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>> wrote:

Hi,
I can make the modification, I'll run it through the test data and that should finish in roughly a day.
In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx>] on behalf of Keiran Raine [kr2 at sanger.ac.uk<UrlBlockedError.aspx>]
Sent: October 12, 2016 6:16 AM
To: Miguel Vazquez
Cc: docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

[The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]

Hi Keiran,

Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative?


Miguel



On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
In the original version we didn't do this step, if we have write access it can be made to do that

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Hi Keiran,

If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?

Would it not be better if it read

private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
File f = new File(sampleBam);
thisJob.getCommand()
.addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
.addArgument(installBase)
.addArgument("bam_stats")
.addArgument("-i " + sampleBam)
.addArgument("-o " + sampleBam + ".bas")
;
return thisJob;
}

Best

Miguel

On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<UrlBlockedError.aspx>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Keiran,

Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?

Best

Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.


I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check.

Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.

Best

Miguel




-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/040286b4/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: build.log
Type: text/x-log
Size: 32586 bytes
Desc: build.log
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/040286b4/attachment-0002.bin>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: outer.build.log
Type: text/x-log
Size: 19806 bytes
Desc: outer.build.log
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/040286b4/attachment-0003.bin>

From kr2 at sanger.ac.uk  Wed Oct 12 14:09:36 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Wed, 12 Oct 2016 19:09:36 +0100
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A1314@exmb2.ad.oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca> <27512884B2D8
 1B41AAB7BB266248F240C09A1314@exmb2.ad.oicr.on.ca>
Message-ID: <66DF88B3-B90D-419B-8E9E-D9864BE237FA@sanger.ac.uk>

Hi Denis,

You've hit an issue that only has occurred in the last few weeks for us also.

BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.

The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:

RUN cpanm --mirror http://cpan.metacpan.org -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
     rm -rf ~/.cpanm

	to

RUN cpanm --mirror http://cpan.metacpan.org -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

Thankfully something I could identify immediately.

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:
> 
> Hi, 
> 
> Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
> Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
> I'm attaching the build log from the Dockerfile and the log from inside the container.
> 
> 
> 
> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca]
> Sent: October 12, 2016 10:59 AM
> To: Keiran Raine
> Cc: docktesters at lists.icgc.org
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi,
> 
> While that would have been a good explanation, unfortunately, it doesn't seem to be the case. 
> In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl <x-msg://35/redir.aspx?REF=Gv5o-fd4-K3pN2kTcoCO56SkL2SXzWK1AA64wrhkr3G8JRoxufLTCAFodHRwczovL2dpdGh1Yi5jb20vSUNHQy1UQ0dBLVBhbkNhbmNlci9DR1AtU29tYXRpYy1Eb2NrZXIvYmxvYi9kZXZlbG9wL0RvY2tzdG9yZS5jd2w.> ) , the bam files are described like 
> 
> inputs:
>   tumor:
>     type: File
>     inputBinding:
>       position: 1
>       prefix: --tumor
>     secondaryFiles:
>     - .bai
> 
>   refFrom:
>     type: File
>     inputBinding:
>       position: 3
>       prefix: --refFrom
>   bbFrom:
>     type: File
>     inputBinding:
>       position: 4
>       prefix: --bbFrom
>   normal:
>     type: File
>     inputBinding:
>       position: 2
>       prefix: --normal
>     secondaryFiles:
>     - .bai
> The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime. 
> 
> From: Keiran Raine [kr2 at sanger.ac.uk]
> Sent: October 12, 2016 10:49 AM
> To: Denis Yuen
> Cc: Miguel Vazquez; docktesters at lists.icgc.org
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi Denis,
> 
> I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.
> 
> Keiran Raine
> Principal Bioinformatician
> Cancer Genome Project
> Wellcome Trust Sanger Institute
> 
> kr2 at sanger.ac.uk <x-msg://35/UrlBlockedError.aspx>
> Tel:+44 (0)1223 834244 Ext: 4983
> Office: H104
> 
>> On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://35/UrlBlockedError.aspx>> wrote:
>> 
>> Hi,
>> I can make the modification, I'll run it through the test data and that should finish in roughly a day. 
>> In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?
>> 
>> 
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://35/UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://35/UrlBlockedError.aspx>] on behalf of Keiran Raine [kr2 at sanger.ac.uk <x-msg://35/UrlBlockedError.aspx>]
>> Sent: October 12, 2016 6:16 AM
>> To: Miguel Vazquez
>> Cc: docktesters at lists.icgc.org <x-msg://35/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi,
>> 
>> This is assuming that it is possible to write to the location the BAM are in.
>> 
>> I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).
>> 
>> Regards,
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>> 
>> kr2 at sanger.ac.uk <x-msg://35/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983
>> Office: H104
>> 
>>> On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://35/UrlBlockedError.aspx>> wrote:
>>> 
>>> [The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
>>> 
>>> Hi Keiran,
>>> 
>>> Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative? 
>>> 
>>> 
>>> Miguel
>>> 
>>> 
>>> 
>>> On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://35/UrlBlockedError.aspx>> wrote:
>>> In the original version we didn't do this step, if we have write access it can be made to do that
>>> 
>>> Keiran Raine
>>> Principal Bioinformatician
>>> Cancer Genome Project
>>> Wellcome Trust Sanger Institute
>>> 
>>> kr2 at sanger.ac.uk <x-msg://35/UrlBlockedError.aspx>
>>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>>> Office: H104
>>> 
>>>> On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://35/UrlBlockedError.aspx>> wrote:
>>>> 
>>>> Hi Keiran,
>>>> 
>>>> If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
>>>> 
>>>> Would it not be better if it read
>>>> 
>>>> private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
>>>> Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
>>>> File f = new File(sampleBam);
>>>> thisJob.getCommand()
>>>> .addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
>>>> .addArgument(installBase)
>>>> .addArgument("bam_stats")
>>>> .addArgument("-i " + sampleBam)
>>>> .addArgument("-o " + sampleBam + ".bas")
>>>> ;
>>>> return thisJob;
>>>> }
>>>> 
>>>> Best
>>>> 
>>>> Miguel
>>>> 
>>>> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://35/UrlBlockedError.aspx>> wrote:
>>>> Relevant section of code:
>>>> 
>>>> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <x-msg://35/UrlBlockedError.aspx>
>>>> 
>>>> Keiran Raine
>>>> Principal Bioinformatician
>>>> Cancer Genome Project
>>>> Wellcome Trust Sanger Institute
>>>> 
>>>> kr2 at sanger.ac.uk <x-msg://35/UrlBlockedError.aspx>
>>>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>>>> Office: H104
>>>> 
>>>>> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk <x-msg://35/UrlBlockedError.aspx>> wrote:
>>>>> 
>>>>> Hi,
>>>>> 
>>>>> There is a step generating the BAS files:
>>>>> 
>>>>> [2016/10/10 07:28:37] | 
>>>>> Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
>>>>> [2016/10/10 07:28:37] | 
>>>>> Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh
>>>>> 
>>>>> But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.
>>>>> 
>>>>> This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.
>>>>> 
>>>>> Hope this is easier to solve now,
>>>>> 
>>>>> Keiran Raine
>>>>> Principal Bioinformatician
>>>>> Cancer Genome Project
>>>>> Wellcome Trust Sanger Institute
>>>>> 
>>>>> kr2 at sanger.ac.uk <x-msg://35/UrlBlockedError.aspx>
>>>>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>>>>> Office: H104
>>>>> 
>>>>>> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://35/UrlBlockedError.aspx>> wrote:
>>>>>> 
>>>>>> Keiran,
>>>>>> 
>>>>>> Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
>>>>>> 
>>>>>> Best
>>>>>> 
>>>>>> Miguel
>>>>>> 
>>>>>> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://35/UrlBlockedError.aspx>> wrote:
>>>>>> 
>>>>>> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.
>>>>>> 
>>>>>> 
>>>>>> I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check. 
>>>>>> 
>>>>>> Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
>>>>>> 
>>>>>> Best
>>>>>> 
>>>>>> Miguel
>>>>>> 
>>>>> 
>>>> 
>>>> 
>>>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>>>> 
>>> 
>>> 
>>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>>> 
>> 
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
> 
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
> <build.log><outer.build.log>




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/532cea22/attachment-0001.html>

From gsaksena at broadinstitute.org  Wed Oct 12 15:11:07 2016
From: gsaksena at broadinstitute.org (Gordon Saksena)
Date: Wed, 12 Oct 2016 15:11:07 -0400
Subject: [DOCKTESTERS] Broad dockers
Message-ID: <CAJkv8nB2KahNmZOCADPD-wmNbR-NJ1wGWk6KN4thGUtgvGcE1A@mail.gmail.com>

Hi,

I have approval for the Broad PCAWG dockers to go on the staging
(non-password protected) portion of Dockstore.  The Github Repo and
DockerHub image have permissions granted to folks who sent me their github
and docker usernames.  This should be adequate for the initial rounds of
testing.

The tokens portion of the pipeline should be ready for folks to give it a
spin.  The non-protected reference files are passed in via http in the
inputs file, and it only needs the normal BAM.  It takes about 5 hours on a
full size file using a couple cores.  Other portions will be added as they
are split out and tested.

While the current permissions setup is fine for testing, something
different will be needed for post publication.  Many of the algorithms are
(or will be) free only for educational or research use, but require a
separate license for commercial use.  We should discuss how that use case
can be supported, and whether it has implications on testing.


https://hub.docker.com/r/broadinstitute/pcawg_tokens/

https://github.com/broadinstitute/pcawg
https://github.com/broadinstitute/pcawg/blob/master/tasks/tokens/taskdef.tokens.wdl
https://github.com/broadinstitute/pcawg/blob/master/tasks/tokens/inputtest_http_refdata.tokens.json

Gordon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/31ea3031/attachment.html>

From gsaksena at broadinstitute.org  Wed Oct 12 17:42:27 2016
From: gsaksena at broadinstitute.org (Gordon Saksena)
Date: Wed, 12 Oct 2016 17:42:27 -0400
Subject: [DOCKTESTERS] Broad dockers
In-Reply-To: <CAJkv8nB2KahNmZOCADPD-wmNbR-NJ1wGWk6KN4thGUtgvGcE1A@mail.gmail.com>
References: <CAJkv8nB2KahNmZOCADPD-wmNbR-NJ1wGWk6KN4thGUtgvGcE1A@mail.gmail.com>
Message-ID: <CAJkv8nDSuZm47Sot_mzHcQAVOU4K2=0KSuav9KvH-iTtU7g2hA@mail.gmail.com>

Btw the Broad docker MTA is now all set for OICR, UCSC, and OHSU.
Gordon

On Oct 12, 2016 3:11 PM, "Gordon Saksena" <gsaksena at broadinstitute.org>
wrote:

> Hi,
>
> I have approval for the Broad PCAWG dockers to go on the staging
> (non-password protected) portion of Dockstore.  The Github Repo and
> DockerHub image have permissions granted to folks who sent me their github
> and docker usernames.  This should be adequate for the initial rounds of
> testing.
>
> The tokens portion of the pipeline should be ready for folks to give it a
> spin.  The non-protected reference files are passed in via http in the
> inputs file, and it only needs the normal BAM.  It takes about 5 hours on a
> full size file using a couple cores.  Other portions will be added as they
> are split out and tested.
>
> While the current permissions setup is fine for testing, something
> different will be needed for post publication.  Many of the algorithms are
> (or will be) free only for educational or research use, but require a
> separate license for commercial use.  We should discuss how that use case
> can be supported, and whether it has implications on testing.
>
>
> https://hub.docker.com/r/broadinstitute/pcawg_tokens/
>
> https://github.com/broadinstitute/pcawg
> https://github.com/broadinstitute/pcawg/blob/master/tasks/tokens/taskdef.
> tokens.wdl
> https://github.com/broadinstitute/pcawg/blob/
> master/tasks/tokens/inputtest_http_refdata.tokens.json
>
> Gordon
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/4ade3535/attachment.html>

From Denis.Yuen at oicr.on.ca  Thu Oct 13 10:46:24 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Thu, 13 Oct 2016 14:46:24 +0000
Subject: [DOCKTESTERS] Broad dockers
In-Reply-To: <CAJkv8nB2KahNmZOCADPD-wmNbR-NJ1wGWk6KN4thGUtgvGcE1A@mail.gmail.com>
References: <CAJkv8nB2KahNmZOCADPD-wmNbR-NJ1wGWk6KN4thGUtgvGcE1A@mail.gmail.com>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A141C@exmb2.ad.oicr.on.ca>

Hi,
Thanks for the heads-up, we'll look into these containers and see what we can do in terms of testing them and getting them posted to the Dockstore.

I do have a few questions:
1) What versions of Cromwell and wdl4s was this portion of the pipeline tested with?
2) This release is for the tokens portion of the pipeline, how many portions of the pipeline do you anticipate will be available in the end? (and do you have a handy graph/chart that we can use to describe this?)
3) For post-publication, are you thinking about a dual-license model ( something like https://www.quora.com/What-is-the-best-license-to-apply-on-an-open-source-project-that-I-intend-to-sell-commercially-as-well ) or are you thinking about some form of DRM in the Docker image?


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Gordon Saksena [gsaksena at broadinstitute.org]
Sent: October 12, 2016 3:11 PM
To: docktesters
Cc: Gad Getz
Subject: [DOCKTESTERS] Broad dockers

Hi,

I have approval for the Broad PCAWG dockers to go on the staging (non-password protected) portion of Dockstore.  The Github Repo and DockerHub image have permissions granted to folks who sent me their github and docker usernames.  This should be adequate for the initial rounds of testing.

The tokens portion of the pipeline should be ready for folks to give it a spin.  The non-protected reference files are passed in via http in the inputs file, and it only needs the normal BAM.  It takes about 5 hours on a full size file using a couple cores.  Other portions will be added as they are split out and tested.

While the current permissions setup is fine for testing, something different will be needed for post publication.  Many of the algorithms are (or will be) free only for educational or research use, but require a separate license for commercial use.  We should discuss how that use case can be supported, and whether it has implications on testing.


https://hub.docker.com/r/broadinstitute/pcawg_tokens/<redir.aspx?REF=t2oyfEuDAgvNSbbfIv6vDmA3IdQFqBlgBMQyYyaIaE76V1PAdfPTCAFodHRwczovL2h1Yi5kb2NrZXIuY29tL3IvYnJvYWRpbnN0aXR1dGUvcGNhd2dfdG9rZW5zLw..>

https://github.com/broadinstitute/pcawg<redir.aspx?REF=YRuHl29pr_J2zGxyN2fVpymfwWxOPaImHYhnj94xV5P6V1PAdfPTCAFodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvcGNhd2c.>
https://github.com/broadinstitute/pcawg/blob/master/tasks/tokens/taskdef.tokens.wdl<redir.aspx?REF=FGY08LTLLTocjDsGPbicTMRuN2l47cI66PmvalxNDgf6V1PAdfPTCAFodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvcGNhd2cvYmxvYi9tYXN0ZXIvdGFza3MvdG9rZW5zL3Rhc2tkZWYudG9rZW5zLndkbA..>
https://github.com/broadinstitute/pcawg/blob/master/tasks/tokens/inputtest_http_refdata.tokens.json<redir.aspx?REF=TIcioMOk8LkXN0dYIggrha-l4JfAM0989TTSW2YBUkL6V1PAdfPTCAFodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvcGNhd2cvYmxvYi9tYXN0ZXIvdGFza3MvdG9rZW5zL2lucHV0dGVzdF9odHRwX3JlZmRhdGEudG9rZW5zLmpzb24.>

Gordon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161013/8dc2f553/attachment.html>

From gsaksena at broadinstitute.org  Thu Oct 13 11:57:37 2016
From: gsaksena at broadinstitute.org (Gordon Saksena)
Date: Thu, 13 Oct 2016 11:57:37 -0400
Subject: [DOCKTESTERS] Broad dockers
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A141C@exmb2.ad.oicr.on.ca>
References: <CAJkv8nB2KahNmZOCADPD-wmNbR-NJ1wGWk6KN4thGUtgvGcE1A@mail.gmail.com>
 <27512884B2D81B41AAB7BB266248F240C09A141C@exmb2.ad.oicr.on.ca>
Message-ID: <CAJkv8nAhszjejz5eXx2Z0NpT6SFWXTLmJmAz+3cauzHBjDWH7w@mail.gmail.com>

1) I tested under Cromwell 0.19.3.  I will likely move over to 0.21 soon.
I used wdltool 0.4.

2) At the moment I have almost 20 dockers listed, including some that are
filters and some that have known buggy algorithms.  More discussion is
needed, probably both internally and externally, to develop a more stable
list and map out timelines.  Let me discuss more internal to Broad first
before sharing the list.

The intent is to allow users to both A) reproduce the PCAWG work, and B)
let them apply the algorithms to their own new project.

A) (reproducibility) could be mostly served by one big docker, as was run
in production, but there are currently issues around a) distributing the
aggregated panel of normals for MuTect and dRanger, b) some GPL code needs
to be unlinked from the mini-bam creator, and c) the MuTect-ContEst rescue
code needs to be patched in.   The one big docker is not ideal for B)
(re-application), due to the additional issues: a) wanting bug fixes, b)
you need to wait for algorithms you don't care about, c) the SV caller
algorithms demand a ton of RAM and CPU time on certain samples, making them
bad neighbors on cheap VMs, d) some algorithms (eg aggregators, filters)
have not been dockerized yet and would delay the release of others, and e)
even portions licensed for free commercial use would be bundled under the
more restrictive GATK license.

3) The GATK dual-license model is documented here:
https://software.broadinstitute.org/gatk/download/licensing.php
And, something like it will probably apply to certain portions that do not
use GATK.  We have no plans to use DRM.

Gordon

On Thu, Oct 13, 2016 at 10:46 AM, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:

> Hi,
> Thanks for the heads-up, we'll look into these containers and see what we
> can do in terms of testing them and getting them posted to the Dockstore.
>
> I do have a few questions:
> 1) What versions of Cromwell and wdl4s was this portion of the pipeline
> tested with?
> 2) This release is for the tokens portion of the pipeline, how many
> portions of the pipeline do you anticipate will be available in the end?
> (and do you have a handy graph/chart that we can use to describe this?)
> 3) For post-publication, are you thinking about a dual-license model (
> something like https://www.quora.com/What-is-the-best-license-to-apply-on-
> an-open-source-project-that-I-intend-to-sell-commercially-as-well ) or
> are you thinking about some form of DRM in the Docker image?
>
>
> ------------------------------
> *From:* docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org
> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of
> Gordon Saksena [gsaksena at broadinstitute.org]
> *Sent:* October 12, 2016 3:11 PM
> *To:* docktesters
> *Cc:* Gad Getz
> *Subject:* [DOCKTESTERS] Broad dockers
>
> Hi,
>
> I have approval for the Broad PCAWG dockers to go on the staging
> (non-password protected) portion of Dockstore.  The Github Repo and
> DockerHub image have permissions granted to folks who sent me their github
> and docker usernames.  This should be adequate for the initial rounds of
> testing.
>
> The tokens portion of the pipeline should be ready for folks to give it a
> spin.  The non-protected reference files are passed in via http in the
> inputs file, and it only needs the normal BAM.  It takes about 5 hours on a
> full size file using a couple cores.  Other portions will be added as they
> are split out and tested.
>
> While the current permissions setup is fine for testing, something
> different will be needed for post publication.  Many of the algorithms are
> (or will be) free only for educational or research use, but require a
> separate license for commercial use.  We should discuss how that use case
> can be supported, and whether it has implications on testing.
>
>
> https://hub.docker.com/r/broadinstitute/pcawg_tokens/
> <http://redir.aspx?REF=t2oyfEuDAgvNSbbfIv6vDmA3IdQFqBlgBMQyYyaIaE76V1PAdfPTCAFodHRwczovL2h1Yi5kb2NrZXIuY29tL3IvYnJvYWRpbnN0aXR1dGUvcGNhd2dfdG9rZW5zLw..>
>
> https://github.com/broadinstitute/pcawg
> <http://redir.aspx?REF=YRuHl29pr_J2zGxyN2fVpymfwWxOPaImHYhnj94xV5P6V1PAdfPTCAFodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvcGNhd2c.>
> https://github.com/broadinstitute/pcawg/blob/master/tasks/tokens/taskdef.
> tokens.wdl
> <http://redir.aspx?REF=FGY08LTLLTocjDsGPbicTMRuN2l47cI66PmvalxNDgf6V1PAdfPTCAFodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvcGNhd2cvYmxvYi9tYXN0ZXIvdGFza3MvdG9rZW5zL3Rhc2tkZWYudG9rZW5zLndkbA..>
> https://github.com/broadinstitute/pcawg/blob/
> master/tasks/tokens/inputtest_http_refdata.tokens.json
> <http://redir.aspx?REF=TIcioMOk8LkXN0dYIggrha-l4JfAM0989TTSW2YBUkL6V1PAdfPTCAFodHRwczovL2dpdGh1Yi5jb20vYnJvYWRpbnN0aXR1dGUvcGNhd2cvYmxvYi9tYXN0ZXIvdGFza3MvdG9rZW5zL2lucHV0dGVzdF9odHRwX3JlZmRhdGEudG9rZW5zLmpzb24.>
>
> Gordon
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161013/9bb9b902/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Fri Oct 14 17:55:33 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Fri, 14 Oct 2016 21:55:33 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
 teleconference
In-Reply-To: <66DF88B3-B90D-419B-8E9E-D9864BE237FA@sanger.ac.uk>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca> <27512884B2D8
 1B41AAB7BB266248F240C09A1314@exmb2.ad.oicr.on.ca>,
 <66DF88B3-B90D-419B-8E9E-D9864BE237FA@sanger.ac.uk>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A165C@exmb2.ad.oicr.on.ca>

Hi,

Just as a heads-up for the end-of-week in this thread.

> RUN cpanm --mirror http://cpan.metacpan.org<https://webmail.oicr.on.ca/owa/redir.aspx?REF=eiJ8sg5AzKWDmyf5Pyeos7Jkxos8aUr_J0TMU46DrwZyjUE3e_TTCAFodHRwOi8vY3Bhbi5tZXRhY3Bhbi5vcmc.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

This got me on the right track, I actually needed the following syntax


RUN cpanm --mirror https://cpan.metacpan.org -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \
     rm -rf ~/.cpanm


However, it looks like making the suggested change breaks the workflow when attempting to run with the test data. In short, the bas file is definitely being generated inside the Docker container. Moving it to the suggested location breaks the workflow later.

I'm currently attempting to run the donor DO50311 to see if I can get more insight into what is going on.

________________________________
From: Keiran Raine [kr2 at sanger.ac.uk]
Sent: October 12, 2016 2:09 PM
To: Denis Yuen
Cc: docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Denis,

You've hit an issue that only has occurred in the last few weeks for us also.

BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.

The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:

RUN cpanm --mirror http://cpan.metacpan.org<redir.aspx?REF=eiJ8sg5AzKWDmyf5Pyeos7Jkxos8aUr_J0TMU46DrwZyjUE3e_TTCAFodHRwOi8vY3Bhbi5tZXRhY3Bhbi5vcmc.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
     rm -rf ~/.cpanm

to

RUN cpanm --mirror http://cpan.metacpan.org<redir.aspx?REF=eiJ8sg5AzKWDmyf5Pyeos7Jkxos8aUr_J0TMU46DrwZyjUE3e_TTCAFodHRwOi8vY3Bhbi5tZXRhY3Bhbi5vcmc.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

Thankfully something I could identify immediately.

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=V5Abe-SStuOqYQx5YdRisU7BV90nK9H8T6dioasb9FlyjUE3e_TTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca<redir.aspx?REF=hS48QCaXDgHI-KBBoRTpgNwsniqfzvg6l-PbcWcc7ixyjUE3e_TTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:

Hi,

Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
I'm attaching the build log from the Dockerfile and the log from inside the container.



________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=BXOcyV55OgoSZDrIwYotXj8Er18mYWJvzzYvfp44-9xyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnMtYm91bmNlcytkZW5pcy55dWVuPW9pY3Iub24uY2FAbGlzdHMuaWNnYy5vcmc.> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=BXOcyV55OgoSZDrIwYotXj8Er18mYWJvzzYvfp44-9xyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnMtYm91bmNlcytkZW5pcy55dWVuPW9pY3Iub24uY2FAbGlzdHMuaWNnYy5vcmc.>] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca<redir.aspx?REF=hS48QCaXDgHI-KBBoRTpgNwsniqfzvg6l-PbcWcc7ixyjUE3e_TTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>]
Sent: October 12, 2016 10:59 AM
To: Keiran Raine
Cc: docktesters at lists.icgc.org<redir.aspx?REF=5ztPaPyZn3quYjxDLHvFSLp1HBgQ1NV6NTGiMx5BNIVyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

While that would have been a good explanation, unfortunately, it doesn't seem to be the case.
In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl<UrlBlockedError.aspx> ) , the bam files are described like


inputs:
  tumor:
    type: File
    inputBinding:
      position: 1
      prefix: --tumor
    secondaryFiles:
    - .bai

  refFrom:
    type: File
    inputBinding:
      position: 3
      prefix: --refFrom
  bbFrom:
    type: File
    inputBinding:
      position: 4
      prefix: --bbFrom
  normal:
    type: File
    inputBinding:
      position: 2
      prefix: --normal
    secondaryFiles:
    - .bai


The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime.

________________________________
From: Keiran Raine [kr2 at sanger.ac.uk<redir.aspx?REF=V5Abe-SStuOqYQx5YdRisU7BV90nK9H8T6dioasb9FlyjUE3e_TTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>]
Sent: October 12, 2016 10:49 AM
To: Denis Yuen
Cc: Miguel Vazquez; docktesters at lists.icgc.org<redir.aspx?REF=5ztPaPyZn3quYjxDLHvFSLp1HBgQ1NV6NTGiMx5BNIVyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Denis,

I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>> wrote:

Hi,
I can make the modification, I'll run it through the test data and that should finish in roughly a day.
In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx>] on behalf of Keiran Raine [kr2 at sanger.ac.uk<UrlBlockedError.aspx>]
Sent: October 12, 2016 6:16 AM
To: Miguel Vazquez
Cc: docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

[The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]

Hi Keiran,

Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative?


Miguel



On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
In the original version we didn't do this step, if we have write access it can be made to do that

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Hi Keiran,

If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?

Would it not be better if it read

private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
File f = new File(sampleBam);
thisJob.getCommand()
.addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
.addArgument(installBase)
.addArgument("bam_stats")
.addArgument("-i " + sampleBam)
.addArgument("-o " + sampleBam + ".bas")
;
return thisJob;
}

Best

Miguel

On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<UrlBlockedError.aspx>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Keiran,

Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?

Best

Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.


I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check.

Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.

Best

Miguel




-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
<build.log><outer.build.log>


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161014/0b41517d/attachment-0001.html>

From strucka at ohsu.edu  Fri Oct 14 18:10:14 2016
From: strucka at ohsu.edu (Adam Struck)
Date: Fri, 14 Oct 2016 22:10:14 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A165C@exmb2.ad.oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca>
 <66DF88B3-B90D-419B-8E9E-D9864BE237FA@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A165C@exmb2.ad.oicr.on.ca>
Message-ID: <7DDCBF2C-66B0-42F2-B1CF-60508098BDD8@ohsu.edu>

Hi Denis,

Sorry, to chime in late.  The bas file and input BAMs should be getting colocalized already (see below). Where are these files ending up when you run the workflow?

Inputs are symlinked to the OUTDIR.
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L1035-L1039

Bas files are written to OUTDIR
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780

I have now run 25 donors worth of data (from PRAD-UK) through this workflow using the WDL descriptor and the cromwell engine on the CCC platform without an issue.

-Adam

From: <docktesters-bounces+strucka=ohsu.edu at lists.icgc.org> on behalf of Denis Yuen <Denis.Yuen at oicr.on.ca>
Date: Friday, October 14, 2016 at 2:55 PM
To: Keiran Raine <kr2 at sanger.ac.uk>
Cc: "docktesters at lists.icgc.org" <docktesters at lists.icgc.org>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

Just as a heads-up for the end-of-week in this thread.

> RUN cpanm --mirror http://cpan.metacpan.org<https://webmail.oicr.on.ca/owa/redir.aspx?REF=eiJ8sg5AzKWDmyf5Pyeos7Jkxos8aUr_J0TMU46DrwZyjUE3e_TTCAFodHRwOi8vY3Bhbi5tZXRhY3Bhbi5vcmc.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

This got me on the right track, I actually needed the following syntax

RUN cpanm --mirror https://cpan.metacpan.org -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \

     rm -rf ~/.cpanm



However, it looks like making the suggested change breaks the workflow when attempting to run with the test data. In short, the bas file is definitely being generated inside the Docker container. Moving it to the suggested location breaks the workflow later.

I'm currently attempting to run the donor DO50311 to see if I can get more insight into what is going on.
________________________________
From: Keiran Raine [kr2 at sanger.ac.uk]
Sent: October 12, 2016 2:09 PM
To: Denis Yuen
Cc: docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

You've hit an issue that only has occurred in the last few weeks for us also.

BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.

The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:

RUN cpanm --mirror http://cpan.metacpan.org<redir.aspx?REF=eiJ8sg5AzKWDmyf5Pyeos7Jkxos8aUr_J0TMU46DrwZyjUE3e_TTCAFodHRwOi8vY3Bhbi5tZXRhY3Bhbi5vcmc.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
     rm -rf ~/.cpanm

to

RUN cpanm --mirror http://cpan.metacpan.org<redir.aspx?REF=eiJ8sg5AzKWDmyf5Pyeos7Jkxos8aUr_J0TMU46DrwZyjUE3e_TTCAFodHRwOi8vY3Bhbi5tZXRhY3Bhbi5vcmc.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

Thankfully something I could identify immediately.

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=V5Abe-SStuOqYQx5YdRisU7BV90nK9H8T6dioasb9FlyjUE3e_TTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca<redir.aspx?REF=hS48QCaXDgHI-KBBoRTpgNwsniqfzvg6l-PbcWcc7ixyjUE3e_TTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:

Hi,

Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
I'm attaching the build log from the Dockerfile and the log from inside the container.


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=BXOcyV55OgoSZDrIwYotXj8Er18mYWJvzzYvfp44-9xyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnMtYm91bmNlcytkZW5pcy55dWVuPW9pY3Iub24uY2FAbGlzdHMuaWNnYy5vcmc.> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=BXOcyV55OgoSZDrIwYotXj8Er18mYWJvzzYvfp44-9xyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnMtYm91bmNlcytkZW5pcy55dWVuPW9pY3Iub24uY2FAbGlzdHMuaWNnYy5vcmc.>] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca<redir.aspx?REF=hS48QCaXDgHI-KBBoRTpgNwsniqfzvg6l-PbcWcc7ixyjUE3e_TTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>]
Sent: October 12, 2016 10:59 AM
To: Keiran Raine
Cc: docktesters at lists.icgc.org<redir.aspx?REF=5ztPaPyZn3quYjxDLHvFSLp1HBgQ1NV6NTGiMx5BNIVyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

While that would have been a good explanation, unfortunately, it doesn't seem to be the case.
In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl<UrlBlockedError.aspx> ) , the bam files are described like

inputs:

  tumor:

    type: File

    inputBinding:

      position: 1

      prefix: --tumor

    secondaryFiles:

    - .bai



  refFrom:

    type: File

    inputBinding:

      position: 3

      prefix: --refFrom

  bbFrom:

    type: File

    inputBinding:

      position: 4

      prefix: --bbFrom

  normal:

    type: File

    inputBinding:

      position: 2

      prefix: --normal

    secondaryFiles:

    - .bai


The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime.

________________________________
From: Keiran Raine [kr2 at sanger.ac.uk<redir.aspx?REF=V5Abe-SStuOqYQx5YdRisU7BV90nK9H8T6dioasb9FlyjUE3e_TTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>]
Sent: October 12, 2016 10:49 AM
To: Denis Yuen
Cc: Miguel Vazquez; docktesters at lists.icgc.org<redir.aspx?REF=5ztPaPyZn3quYjxDLHvFSLp1HBgQ1NV6NTGiMx5BNIVyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>> wrote:

Hi,
I can make the modification, I'll run it through the test data and that should finish in roughly a day.
In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx>] on behalf of Keiran Raine [kr2 at sanger.ac.uk<UrlBlockedError.aspx>]
Sent: October 12, 2016 6:16 AM
To: Miguel Vazquez
Cc: docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

[The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
Hi Keiran,

Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative?

Miguel


On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
In the original version we didn't do this step, if we have write access it can be made to do that

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Hi Keiran,
If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
Would it not be better if it read

private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);



File f = new File(sampleBam);



thisJob.getCommand()



.addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")



.addArgument(installBase)



.addArgument("bam_stats")



.addArgument("-i " + sampleBam)



.addArgument("-o " + sampleBam + ".bas")



;



return thisJob;


}

Best
Miguel

On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<UrlBlockedError.aspx>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Keiran,
Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
Best
Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.


I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check.
Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
Best
Miguel




-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
<build.log><outer.build.log>


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161014/16aed1e9/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Fri Oct 14 18:20:46 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Fri, 14 Oct 2016 22:20:46 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
 teleconference
In-Reply-To: <7DDCBF2C-66B0-42F2-B1CF-60508098BDD8@ohsu.edu>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca>
 <66DF88B3-B90D-419B-8E9E-D9864BE237FA@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A165C@exmb2.ad.oicr.on.ca>,
 <7DDCBF2C-66B0-42F2-B1CF-60508098BDD8@ohsu.edu>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A169F@exmb2.ad.oicr.on.ca>

Hi,

Adam, to summarise:
My observations seem to match yours, the bas file and input bams are generated inside the Docker container with the test data. However, Miguel has observed that something else seems to be happening with DO50311 that looks like the bas file being missing. I'm currently running that donor to see if I can extract more information and determine what is occurring.


________________________________
From: Adam Struck [strucka at ohsu.edu]
Sent: October 14, 2016 6:10 PM
To: Denis Yuen; Keiran Raine
Cc: docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Denis,

Sorry, to chime in late.  The bas file and input BAMs should be getting colocalized already (see below). Where are these files ending up when you run the workflow?

Inputs are symlinked to the OUTDIR.
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L1035-L1039<redir.aspx?REF=wh2FSjXBBWFHO3yilLgUKx-6F_t0RKTuNfMfdozuKfqyzCQcf_TTCAFodHRwczovL2dpdGh1Yi5jb20vYWRhbXN0cnVjay9DR1AtU29tYXRpYy1Eb2NrZXIvYmxvYi9kZXZlbG9wL3NyYy9tYWluL2phdmEvaW8vc2Vxd2FyZS9wYW5jYW5jZXIvQ2dwU29tYXRpY0NvcmUuamF2YSNMMTAzNS1MMTAzOQ..>

Bas files are written to OUTDIR
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<redir.aspx?REF=QDWzSA3Tp4IrlbNbPM9uuOnAh88WrTGLO9-dh7ITegiyzCQcf_TTCAFodHRwczovL2dpdGh1Yi5jb20vYWRhbXN0cnVjay9DR1AtU29tYXRpYy1Eb2NrZXIvYmxvYi9kZXZlbG9wL3NyYy9tYWluL2phdmEvaW8vc2Vxd2FyZS9wYW5jYW5jZXIvQ2dwU29tYXRpY0NvcmUuamF2YSNMNzY5LUw3ODA.>

I have now run 25 donors worth of data (from PRAD-UK) through this workflow using the WDL descriptor and the cromwell engine on the CCC platform without an issue.

-Adam

From: <docktesters-bounces+strucka=ohsu.edu at lists.icgc.org> on behalf of Denis Yuen <Denis.Yuen at oicr.on.ca>
Date: Friday, October 14, 2016 at 2:55 PM
To: Keiran Raine <kr2 at sanger.ac.uk>
Cc: "docktesters at lists.icgc.org" <docktesters at lists.icgc.org>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

Just as a heads-up for the end-of-week in this thread.

> RUN cpanm --mirror http://cpan.metacpan.org<redir.aspx?REF=RQAmkB4bpbTDWerytcYROM04Roxwq8hEC0yi66bgidOyzCQcf_TTCAFodHRwczovL3dlYm1haWwub2ljci5vbi5jYS9vd2EvcmVkaXIuYXNweD9SRUY9ZWlKOHNnNUF6S1dEbXlmNVB5ZW9zN0preG9zOGFVcl9KMFRNVTQ2RHJ3WnlqVUUzZV9UVENBRm9kSFJ3T2k4dlkzQmhiaTV0WlhSaFkzQmhiaTV2Y21jLg..> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

This got me on the right track, I actually needed the following syntax

RUN cpanm --mirror https://cpan.metacpan.org -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \

     rm -rf ~/.cpanm



However, it looks like making the suggested change breaks the workflow when attempting to run with the test data. In short, the bas file is definitely being generated inside the Docker container. Moving it to the suggested location breaks the workflow later.

I'm currently attempting to run the donor DO50311 to see if I can get more insight into what is going on.
________________________________
From: Keiran Raine [kr2 at sanger.ac.uk]
Sent: October 12, 2016 2:09 PM
To: Denis Yuen
Cc: docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

You've hit an issue that only has occurred in the last few weeks for us also.

BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.

The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:

RUN cpanm --mirror http://cpan.metacpan.org<UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
     rm -rf ~/.cpanm

to

RUN cpanm --mirror http://cpan.metacpan.org<UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

Thankfully something I could identify immediately.

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>> wrote:

Hi,

Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
I'm attaching the build log from the Dockerfile and the log from inside the container.


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx>] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>]
Sent: October 12, 2016 10:59 AM
To: Keiran Raine
Cc: docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

While that would have been a good explanation, unfortunately, it doesn't seem to be the case.
In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl<UrlBlockedError.aspx> ) , the bam files are described like

inputs:

  tumor:

    type: File

    inputBinding:

      position: 1

      prefix: --tumor

    secondaryFiles:

    - .bai



  refFrom:

    type: File

    inputBinding:

      position: 3

      prefix: --refFrom

  bbFrom:

    type: File

    inputBinding:

      position: 4

      prefix: --bbFrom

  normal:

    type: File

    inputBinding:

      position: 2

      prefix: --normal

    secondaryFiles:

    - .bai


The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime.

________________________________
From: Keiran Raine [kr2 at sanger.ac.uk<UrlBlockedError.aspx>]
Sent: October 12, 2016 10:49 AM
To: Denis Yuen
Cc: Miguel Vazquez; docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>> wrote:

Hi,
I can make the modification, I'll run it through the test data and that should finish in roughly a day.
In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx>] on behalf of Keiran Raine [kr2 at sanger.ac.uk<UrlBlockedError.aspx>]
Sent: October 12, 2016 6:16 AM
To: Miguel Vazquez
Cc: docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

[The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
Hi Keiran,

Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative?

Miguel


On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
In the original version we didn't do this step, if we have write access it can be made to do that

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Hi Keiran,
If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
Would it not be better if it read

private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);



File f = new File(sampleBam);



thisJob.getCommand()



.addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")



.addArgument(installBase)



.addArgument("bam_stats")



.addArgument("-i " + sampleBam)



.addArgument("-o " + sampleBam + ".bas")



;



return thisJob;


}

Best
Miguel

On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<UrlBlockedError.aspx>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Keiran,
Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
Best
Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.


I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check.
Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
Best
Miguel




-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
<build.log><outer.build.log>


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161014/e875eeb4/attachment-0001.html>

From miguel.vazquez at cnio.es  Sat Oct 15 02:52:19 2016
From: miguel.vazquez at cnio.es (Miguel Vazquez)
Date: Sat, 15 Oct 2016 08:52:19 +0200
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A169F@exmb2.ad.oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca>
 <66DF88B3-B90D-419B-8E9E-D9864BE237FA@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A165C@exmb2.ad.oicr.on.ca>
 <7DDCBF2C-66B0-42F2-B1CF-60508098BDD8@ohsu.edu>
 <27512884B2D81B41AAB7BB266248F240C09A169F@exmb2.ad.oicr.on.ca>
Message-ID: <CA+dx8ma3aKAkKKmXH8fPaQHMUT96u3QGe-o2gCBkhLdXcUwTng@mail.gmail.com>

Just to clarify Denis, the BAS file was not present in the download of the
donor data, while it was present in the download of the test data. That is
as much as I observed, and this matched Keiran comment that a missing BAS
file was consistent with the pindel error.I have no idea of what the
workflow was doing so as far as I know the BAS could have been created
correctly and the error was something else.

Best regards

On Sat, Oct 15, 2016 at 12:20 AM, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:

> Hi,
>
> Adam, to summarise:
> My observations seem to match yours, the bas file and input bams are
> generated inside the Docker container with the test data. However, Miguel
> has observed that something else seems to be happening with DO50311 that
> looks like the bas file being missing. I'm currently running that donor to
> see if I can extract more information and determine what is occurring.
>
>
> ------------------------------
> *From:* Adam Struck [strucka at ohsu.edu]
> *Sent:* October 14, 2016 6:10 PM
> *To:* Denis Yuen; Keiran Raine
>
> *Cc:* docktesters at lists.icgc.org
> *Subject:* Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
> teleconference
>
> Hi Denis,
>
>
>
> Sorry, to chime in late.  The bas file and input BAMs should be getting
> colocalized already (see below). Where are these files ending up when you
> run the workflow?
>
>
>
> Inputs are symlinked to the OUTDIR.
>
> https://github.com/adamstruck/CGP-Somatic-Docker/blob/
> develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L1035-L1039
> <http://redir.aspx?REF=wh2FSjXBBWFHO3yilLgUKx-6F_t0RKTuNfMfdozuKfqyzCQcf_TTCAFodHRwczovL2dpdGh1Yi5jb20vYWRhbXN0cnVjay9DR1AtU29tYXRpYy1Eb2NrZXIvYmxvYi9kZXZlbG9wL3NyYy9tYWluL2phdmEvaW8vc2Vxd2FyZS9wYW5jYW5jZXIvQ2dwU29tYXRpY0NvcmUuamF2YSNMMTAzNS1MMTAzOQ..>
>
>
>
> Bas files are written to OUTDIR
>
> https://github.com/adamstruck/CGP-Somatic-Docker/blob/
> develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780
> <http://redir.aspx?REF=QDWzSA3Tp4IrlbNbPM9uuOnAh88WrTGLO9-dh7ITegiyzCQcf_TTCAFodHRwczovL2dpdGh1Yi5jb20vYWRhbXN0cnVjay9DR1AtU29tYXRpYy1Eb2NrZXIvYmxvYi9kZXZlbG9wL3NyYy9tYWluL2phdmEvaW8vc2Vxd2FyZS9wYW5jYW5jZXIvQ2dwU29tYXRpY0NvcmUuamF2YSNMNzY5LUw3ODA.>
>
>
>
> I have now run 25 donors worth of data (from PRAD-UK) through this
> workflow using the WDL descriptor and the cromwell engine on the CCC
> platform without an issue.
>
>
>
> -Adam
>
>
>
> *From: *<docktesters-bounces+strucka=ohsu.edu at lists.icgc.org> on behalf
> of Denis Yuen <Denis.Yuen at oicr.on.ca>
> *Date: *Friday, October 14, 2016 at 2:55 PM
> *To: *Keiran Raine <kr2 at sanger.ac.uk>
> *Cc: *"docktesters at lists.icgc.org" <docktesters at lists.icgc.org>
> *Subject: *Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
> teleconference
>
>
>
> Hi,
>
> Just as a heads-up for the end-of-week in this thread.
>
> > RUN cpanm --mirror http://cpan.metacpan.org
> <http://redir.aspx?REF=RQAmkB4bpbTDWerytcYROM04Roxwq8hEC0yi66bgidOyzCQcf_TTCAFodHRwczovL3dlYm1haWwub2ljci5vbi5jYS9vd2EvcmVkaXIuYXNweD9SRUY9ZWlKOHNnNUF6S1dEbXlmNVB5ZW9zN0preG9zOGFVcl9KMFRNVTQ2RHJ3WnlqVUUzZV9UVENBRm9kSFJ3T2k4dlkzQmhiaTV0WlhSaFkzQmhiaTV2Y21jLg..>
> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924
> Const::Fast Graph && \
>      rm -rf ~/.cpanm
>
> This got me on the right track, I actually needed the following syntax
>
> RUN cpanm --mirror https://cpan.metacpan.org -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \
>
>      rm -rf ~/.cpanm
>
>
> However, it looks like making the suggested change breaks the workflow
> when attempting to run with the test data. In short, the bas file is
> definitely being generated inside the Docker container. Moving it to the
> suggested location breaks the workflow later.
>
> I'm currently attempting to run the donor DO50311 to see if I can get
> more insight into what is going on.
> ------------------------------
>
> *From:* Keiran Raine [kr2 at sanger.ac.uk]
> *Sent:* October 12, 2016 2:09 PM
> *To:* Denis Yuen
> *Cc:* docktesters at lists.icgc.org
> *Subject:* Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
> teleconference
>
> Hi Denis,
>
>
>
> You've hit an issue that only has occurred in the last few weeks for us
> also.
>
>
>
> BioPerl released a new version (first in ~20 months) that split the
> repository moving a whole section into a different package.
>
>
>
> The fix would be to force the first install of BioPerl to a specific
> version.  Modify line 25/26 of the Dockerfile from:
>
>
> RUN cpanm --mirror http://cpan.metacpan.org <http://UrlBlockedError.aspx>
> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version
> Const::Fast Graph && \
>      rm -rf ~/.cpanm
>
>
>
> to
>
>
>
> RUN cpanm --mirror http://cpan.metacpan.org <http://UrlBlockedError.aspx>
> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924
> Const::Fast Graph && \
>      rm -rf ~/.cpanm
>
>
>
> Thankfully something I could identify immediately.
>
>
>
> Regards,
>
>
> Keiran Raine
>
> Principal Bioinformatician
>
> Cancer Genome Project
>
> Wellcome Trust Sanger Institute
>
>
>
> kr2 at sanger.ac.uk <http://UrlBlockedError.aspx>
>
> Tel:+44 (0)1223 834244 Ext: 4983
>
> Office: H104
>
>
>
> On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca
> <http://UrlBlockedError.aspx>> wrote:
>
>
>
> Hi,
>
> Keiran, I'm having trouble rebuilding the Sanger docker container in what
> I think is an unrelated section.
> Has anything changed about the build dependencies (for example, if there
> is a floating version that changed over time)?
> I'm attaching the build log from the Dockerfile and the log from inside
> the container.
>
>
> ------------------------------
>
> *From:* docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org
> <http://UrlBlockedError.aspx> [docktesters-bounces+denis.
> yuen=oicr.on.ca at lists.icgc.org <http://UrlBlockedError.aspx>] on behalf
> of Denis Yuen [Denis.Yuen at oicr.on.ca <http://UrlBlockedError.aspx>]
> *Sent:* October 12, 2016 10:59 AM
> *To:* Keiran Raine
> *Cc:* docktesters at lists.icgc.org <http://UrlBlockedError.aspx>
> *Subject:* Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
> teleconference
>
> Hi,
>
> While that would have been a good explanation, unfortunately, it doesn't
> seem to be the case.
> In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-
> Docker/blob/develop/Dockstore.cwl <http://UrlBlockedError.aspx> ) , the
> bam files are described like
>
> inputs:
>
>   tumor:
>
>     type: File
>
>     inputBinding:
>
>       position: 1
>
>       prefix: --tumor
>
>     secondaryFiles:
>
>     - .bai
>
>
>
>   refFrom:
>
>     type: File
>
>     inputBinding:
>
>       position: 3
>
>       prefix: --refFrom
>
>   bbFrom:
>
>     type: File
>
>     inputBinding:
>
>       position: 4
>
>       prefix: --bbFrom
>
>   normal:
>
>     type: File
>
>     inputBinding:
>
>       position: 2
>
>       prefix: --normal
>
>     secondaryFiles:
>
>     - .bai
>
> The type of File (as opposed to directory) means that while the bam and
> bai files are individually mounted into the docker container while it runs,
> the bas files never were. If Miguel has the "docker run" output from the
> run (should just be in the stdout of the run), we should be able to verify
> this by looking at what gets mounted into the container at runtime.
>
>
> ------------------------------
>
> *From:* Keiran Raine [kr2 at sanger.ac.uk <http://UrlBlockedError.aspx>]
> *Sent:* October 12, 2016 10:49 AM
> *To:* Denis Yuen
> *Cc:* Miguel Vazquez; docktesters at lists.icgc.org
> <http://UrlBlockedError.aspx>
> *Subject:* Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
> teleconference
>
> Hi Denis,
>
>
>
> I expect when you unpack the the test data the BAS files exist in the
> archive in that area so the fact it runs the out of that step to a
> different location isn't detected.
>
>
> Keiran Raine
>
> Principal Bioinformatician
>
> Cancer Genome Project
>
> Wellcome Trust Sanger Institute
>
>
>
> kr2 at sanger.ac.uk <http://UrlBlockedError.aspx>
>
> Tel:+44 (0)1223 834244 Ext: 4983
>
> Office: H104
>
>
>
> On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca
> <http://UrlBlockedError.aspx>> wrote:
>
>
>
> Hi,
> I can make the modification, I'll run it through the test data and that
> should finish in roughly a day.
> In the meantime though, I am puzzled. Why would an issue like this affect
> a donor dataset, but not the test data?
>
>
> ------------------------------
>
> *From:* docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org
> <http://UrlBlockedError.aspx> [docktesters-bounces+
> denis.yuen=oicr.on.ca at lists.icgc.org <http://UrlBlockedError.aspx>] on
> behalf of Keiran Raine [kr2 at sanger.ac.uk <http://UrlBlockedError.aspx>]
> *Sent:* October 12, 2016 6:16 AM
> *To:* Miguel Vazquez
> *Cc:* docktesters at lists.icgc.org <http://UrlBlockedError.aspx>
> *Subject:* Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
> teleconference
>
> Hi,
>
>
>
> This is assuming that it is possible to write to the location the BAM are
> in.
>
>
>
> I think Denis would be best placed to make the minor modification as I
> don't know the process they are using for build and deploy of the images (I
> made modifications and then handed over for CWL).
>
>
>
> Regards,
>
>
> Keiran Raine
>
> Principal Bioinformatician
>
> Cancer Genome Project
>
> Wellcome Trust Sanger Institute
>
>
>
> kr2 at sanger.ac.uk <http://UrlBlockedError.aspx>
>
> Tel:+44 (0)1223 834244 Ext: 4983
>
> Office: H104
>
>
>
> On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es
> <http://UrlBlockedError.aspx>> wrote:
>
>
>
> [The rest of the list where out of the loop for this part of the
> conversation, I'm putting them back in. In short, the Sanger pipeline
> produces the BAS file but not co-located with the BAM]
>
> Hi Keiran,
>
>
> Would it be possible then to change this and try again? what needs to
> happen? I guess you'll need to change the code and a new docker image be
> produced. Would this be our best alternative?
>
>
>
> Miguel
>
>
>
> On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk
> <http://UrlBlockedError.aspx>> wrote:
>
> In the original version we didn't do this step, if we have write access it
> can be made to do that
>
>
> Keiran Raine
>
> Principal Bioinformatician
>
> Cancer Genome Project
>
> Wellcome Trust Sanger Institute
>
>
>
> kr2 at sanger.ac.uk <http://UrlBlockedError.aspx>
>
> Tel:+44 (0)1223 834244 Ext: 4983
>
> Office: H104
>
>
>
> On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es
> <http://UrlBlockedError.aspx>> wrote:
>
>
>
> Hi Keiran,
>
> If the BAS and BAM files need to be collocated, why is it not created next
> to the BAM file?
>
> Would it not be better if it read
>
> private Job basFileBaseJob(int tumourCount, String sampleBam, String
> process, int index) {
>
> Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process,
> index);
>
>
>
> File f = new File(sampleBam);
>
>
>
> thisJob.getCommand()
>
>
>
> .addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
>
>
>
> .addArgument(installBase)
>
>
>
> .addArgument("bam_stats")
>
>
>
> .addArgument("-i " + sampleBam)
>
>
>
> .addArgument("-o " + sampleBam + ".bas")
>
>
>
> ;
>
>
>
> return thisJob;
>
> }
>
>
>
> Best
>
> Miguel
>
>
>
> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk
> <http://UrlBlockedError.aspx>> wrote:
>
> Relevant section of code:
>
>
>
> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/
> blob/develop/src/main/java/io/seqware/pancancer/
> CgpSomaticCore.java#L769-L780 <http://UrlBlockedError.aspx>
>
>
> Keiran Raine
>
> Principal Bioinformatician
>
> Cancer Genome Project
>
> Wellcome Trust Sanger Institute
>
>
>
> kr2 at sanger.ac.uk <http://UrlBlockedError.aspx>
>
> Tel:+44 (0)1223 834244 Ext: 4983
>
> Office: H104
>
>
>
> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk
> <http://UrlBlockedError.aspx>> wrote:
>
>
>
> Hi,
>
>
>
> There is a step generating the BAS files:
>
>
>
> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-
> 8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_
> basFileGenerate_control_11-runner.sh
> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-
> 8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_
> basFileGenerate_tumours_12-runner.sh
>
>
>
> But if the BAM files and BAS aren't co-located then you have a problem.
> You could symlink the BAM files into the work space and have all tools work
> from that path instead, deleting the symlinks at the end.
>
>
>
> This is one of the changes we had to implement differently as the BAS file
> data was being held in the GNOS xml data structures during the initial
> processing.  Moving to this means that any BAM input is sufficient.
>
>
>
> Hope this is easier to solve now,
>
>
> Keiran Raine
>
> Principal Bioinformatician
>
> Cancer Genome Project
>
> Wellcome Trust Sanger Institute
>
>
>
> kr2 at sanger.ac.uk <http://UrlBlockedError.aspx>
>
> Tel:+44 (0)1223 834244 Ext: 4983
>
> Office: H104
>
>
>
> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es
> <http://UrlBlockedError.aspx>> wrote:
>
>
>
> Keiran,
>
> Its downloading the files still but in fact it does not seem to download
> any BAS file. Could you please educate me a bit on what are these and how I
> can create them?
>
> Best
>
> Miguel
>
>
>
> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es
> <http://UrlBlockedError.aspx>> wrote:
>
>
>
> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds
> which could indicate a problem with either the headers or the absence of
> the BAS file from the expected location.
>
>
>
>
>
> I think that you just revealed the problem. There is in fact no BAS files
> only BAM and BAI. There where BAS files for the test data HCC1143 which is
> the one that in fact work. It seems like BAS files are not gathered by
> gnos, could that be? or that my script fails to copy them. I'll try to
> gather a different sample with my client and check.
>
> Not knowing a thing about these files explains why I didn't notice. I'll
> get back to you when I know more.
>
> Best
>
> Miguel
>
>
>
>
>
>
>
>
> -- The Wellcome Trust Sanger Institute is operated by Genome Research
> Limited, a charity registered in England with number 1021457 and a company
> registered in England with number 2742969, whose registered office is 215
> Euston Road, London, NW1 2BE.
>
>
>
>
>
> -- The Wellcome Trust Sanger Institute is operated by Genome Research
> Limited, a charity registered in England with number 1021457 and a company
> registered in England with number 2742969, whose registered office is 215
> Euston Road, London, NW1 2BE.
>
>
>
>
>
>
> -- The Wellcome Trust Sanger Institute is operated by Genome Research
> Limited, a charity registered in England with number 1021457 and a company
> registered in England with number 2742969, whose registered office is 215
> Euston Road, London, NW1 2BE.
>
>
>
>
> -- The Wellcome Trust Sanger Institute is operated by Genome Research
> Limited, a charity registered in England with number 1021457 and a company
> registered in England with number 2742969, whose registered office is 215
> Euston Road, London, NW1 2BE.
>
> <build.log><outer.build.log>
>
>
>
>
> -- The Wellcome Trust Sanger Institute is operated by Genome Research
> Limited, a charity registered in England with number 1021457 and a company
> registered in England with number 2742969, whose registered office is 215
> Euston Road, London, NW1 2BE.
>
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161015/8850e028/attachment-0001.html>

From Denis.Yuen at oicr.on.ca  Sat Oct 15 17:10:04 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Sat, 15 Oct 2016 21:10:04 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
 teleconference
In-Reply-To: <CA+dx8ma3aKAkKKmXH8fPaQHMUT96u3QGe-o2gCBkhLdXcUwTng@mail.gmail.com>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca>
 <66DF88B3-B90D-419B-8E9E-D9864BE237FA@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A165C@exmb2.ad.oicr.on.ca>
 <7DDCBF2C-66B0-42F2-B1CF-60508098BDD8@ohsu.edu>
 <27512884B2D81B41AAB7BB266248F240C09A169F@exmb2.ad.oicr.on.ca>,
 <CA+dx8ma3aKAkKKmXH8fPaQHMUT96u3QGe-o2gCBkhLdXcUwTng@mail.gmail.com>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A1713@exmb2.ad.oicr.on.ca>

Hi,

Agreed, to sum up:

1) The donor test set includes bas files. The real donor sets do not.
2) That said, the way the CWL file is written, regardless of whether a bas file is provided in the test set, they don't actually make it into the docker container. Instead, they get generated inside the container while it is running.
3) The pindel step does indeed fail in DO50311 on a host that successfully ran the test data.

Keiran, some additional info for debugging.

The CWL file results in this docker invocation:

[job temp8674499429956656923.cwl] /tmp/tmp0NOg7v$ docker \
    run \
    -i \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam.bai:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/ab975a04-937f-40fc-b3e5-40b41c2295fc/GRCh37d5_CGP_refBundle.tar.gz:/var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/d3ae586e-1251-470b-bbf8-f498e5895312/GRCh37d5_battenberg.tar.gz:/var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz:ro \
    --volume=/tmp/tmp0NOg7v:/var/spool/cwl:rw \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/workingQriPMs:/tmp:rw \
    --workdir=/var/spool/cwl \
    --read-only=true \
    --user=1000 \
    --env=TMPDIR=/tmp \
    --env=HOME=/var/spool/cwl \
    quay.io/pancancer/pcawg-sanger-cgp-workflow:2.0.0-cwl1 \
    python \
    /home/seqware/CGP-Somatic-Docker/scripts/run_seqware_workflow.py \
    --tumor \
    /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam \
    --normal \
    /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam \
    --refFrom \
    /var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz \
    --bbFrom \
    /var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz

The listing of the working directory (/var/spool/cwl) is as follows and does seem to include generated bas files:

ubuntu at sanger-retest:/tmp/tmp0NOg7v$ ls -alhtr
total 92K
-rw-r--r--  1 ubuntu ubuntu 1.6K Oct 14 22:07 workflow.ini
-rw-r--r--  1 ubuntu ubuntu   28 Oct 14 22:07 .Rprofile
drwxr-xr-x  3 ubuntu root   4.0K Oct 14 22:07 .seqware
drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 ngsCounts
lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam
lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam.bai -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai
lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam.bai -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai
drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 14 22:07 1
drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 genotype
drwxr-xr-x  8 ubuntu ubuntu 4.0K Oct 14 22:19 reference_files
drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:19 genotype_b02b4bba-6e66-44fb-a48f-38c309aaaac5
-rw-r--r--  1 ubuntu ubuntu 2.4K Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz
-rw-r--r--  1 ubuntu ubuntu   33 Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz.md5
-rw-r--r--  1 ubuntu ubuntu 1.5K Oct 14 22:58 fdcb1bd7cffca69d15383ca9566c58e0.bam.bas
-rw-r--r--  1 ubuntu ubuntu 2.3K Oct 14 23:17 7875b5196f6b8b52847f99bf370aada0.bam.bas
-rw-r--r--  1 ubuntu ubuntu   33 Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz.md5
-rw-r--r--  1 ubuntu ubuntu 2.4K Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz
drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 15 10:02 timings
drwxr-xr-x  5 ubuntu ubuntu 4.0K Oct 15 10:02 0
drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 15 10:06 bbCounts
drwx------ 11 ubuntu ubuntu 4.0K Oct 15 20:28 .
drwxrwxrwt 21 root   root   4.0K Oct 15 20:29 ..

The full output of the failing script is:

Errors from command: /usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz

Unknown sort order field: unknown
Collated 500000 readpairs (in 6 sec.)
[V] 1   34.4825MB/s     133279
Thread Worker 1: started
Thread 1 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
Collated 500000 readpairs (in 4 sec.)
[V] 2   39.9836MB/s     154626
Thread Worker 2: started
Thread 2 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
Collated 500000 readpairs (in 4 sec.)
Thread Worker 3: started
Thread 3 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03'
[V] 3   42.4188MB/s     164102
Collated 500000 readpairs (in 4 sec.)
Thread Worker 4: started
Thread 4 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
[V] 4   43.7799MB/s     169368
Collated 500000 readpairs (in 4 sec.)
An error occurred while running:
        /opt/wtsi-cgp/bin/bamcollate2 outputformat=sam colsbs=268435456 collate=1 classes=F,F2 exclude=DUP,SECONDARY,QCFAIL,SUPPLEMENTARY T=/var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c/tmp1kNw/collate_tmp filename=/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
ERROR: Converter thread error: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''

Perl exited with active threads:
        0 running and unjoined
        3 finished and unjoined
        0 running and detached
Thread 2 terminated abnormally: main=HASH(0x50044b0) at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 115.
Thread error: "/usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz" unexpectedly returned exit value 29 at (eval 410) line 13 thread 2.
 at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 190

Command exited with non-zero status 25
10.23user 8.79system 0:32.33elapsed 58%CPU (0avgtext+0avgdata 10819936maxresident)k
1184inputs+8552outputs (2major+711948minor)pagefaults 0swaps

Please let me know if any of the files on that host would be useful to debug this.



________________________________
From: mikisvaz at gmail.com [mikisvaz at gmail.com] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es]
Sent: October 15, 2016 2:52 AM
To: Denis Yuen
Cc: Adam Struck; Keiran Raine; docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Just to clarify Denis, the BAS file was not present in the download of the donor data, while it was present in the download of the test data. That is as much as I observed, and this matched Keiran comment that a missing BAS file was consistent with the pindel error.I have no idea of what the workflow was doing so as far as I know the BAS could have been created correctly and the error was something else.

Best regards

On Sat, Oct 15, 2016 at 12:20 AM, Denis Yuen <Denis.Yuen at oicr.on.ca<redir.aspx?REF=pdXc3tLgyH1l3nCACyO7t60Zlm6wagDt69rPJrvutaboefIoPvXTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:
Hi,

Adam, to summarise:
My observations seem to match yours, the bas file and input bams are generated inside the Docker container with the test data. However, Miguel has observed that something else seems to be happening with DO50311 that looks like the bas file being missing. I'm currently running that donor to see if I can extract more information and determine what is occurring.


________________________________
From: Adam Struck [strucka at ohsu.edu<redir.aspx?REF=e3Bb_0OXe1XHYVTj8ArmiAyg7BPppngtpWhFji-xoYvoefIoPvXTCAFtYWlsdG86c3RydWNrYUBvaHN1LmVkdQ..>]
Sent: October 14, 2016 6:10 PM
To: Denis Yuen; Keiran Raine

Cc: docktesters at lists.icgc.org<redir.aspx?REF=OLVV037EZQ_oNg0dw6j8CjmcRLX5SDA94DNZ9CuUmlPoefIoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Denis,

Sorry, to chime in late.  The bas file and input BAMs should be getting colocalized already (see below). Where are these files ending up when you run the workflow?

Inputs are symlinked to the OUTDIR.
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L1035-L1039<redir.aspx?REF=9sxlgQySOjyiArzZHkvUEFmv7XZNtn7-nmwxwo9q02roefIoPvXTCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9d2gyRlNqWEJCV0ZITzN5aWxMZ1VLeC02Rl90MFJLVHVOZk1mZG96dUtmcXl6Q1FjZl9UVENBRm9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZZV1JoYlhOMGNuVmpheTlEUjFBdFUyOXRZWFJwWXkxRWIyTnJaWEl2WW14dllpOWtaWFpsYkc5d0wzTnlZeTl0WVdsdUwycGhkbUV2YVc4dmMyVnhkMkZ5WlM5d1lXNWpZVzVqWlhJdlEyZHdVMjl0WVhScFkwTnZjbVV1YW1GMllTTk1NVEF6TlMxTU1UQXpPUS4u>

Bas files are written to OUTDIR
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<redir.aspx?REF=nMZKB5yEsF1hOq-bI1Rl-HGQ9uMTzFrRZHaqeNBi9DDoefIoPvXTCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9UURXelNBM1RwNElybGJOYlBNOXV1T25BaDg4V3JUR0xPOS1kaDdJVGVnaXl6Q1FjZl9UVENBRm9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZZV1JoYlhOMGNuVmpheTlEUjFBdFUyOXRZWFJwWXkxRWIyTnJaWEl2WW14dllpOWtaWFpsYkc5d0wzTnlZeTl0WVdsdUwycGhkbUV2YVc4dmMyVnhkMkZ5WlM5d1lXNWpZVzVqWlhJdlEyZHdVMjl0WVhScFkwTnZjbVV1YW1GMllTTk1Oelk1TFV3M09EQS4.>

I have now run 25 donors worth of data (from PRAD-UK) through this workflow using the WDL descriptor and the cromwell engine on the CCC platform without an issue.

-Adam

From: <docktesters-bounces+strucka=ohsu.edu at lists.icgc.org<redir.aspx?REF=8Jvw_X_sBlK8e4JvARHiU3J6q2_V5WsHbDLBblbblu7oefIoPvXTCAFtYWlsdG86b2hzdS5lZHVAbGlzdHMuaWNnYy5vcmc.>> on behalf of Denis Yuen <Denis.Yuen at oicr.on.ca<redir.aspx?REF=pdXc3tLgyH1l3nCACyO7t60Zlm6wagDt69rPJrvutaboefIoPvXTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>>
Date: Friday, October 14, 2016 at 2:55 PM
To: Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=MwoQC4T4UthwrvybjgAxpgXBl8iVDiWHQJPLp05vQkfoefIoPvXTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>>
Cc: "docktesters at lists.icgc.org<redir.aspx?REF=OLVV037EZQ_oNg0dw6j8CjmcRLX5SDA94DNZ9CuUmlPoefIoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>" <docktesters at lists.icgc.org<redir.aspx?REF=J1xLM-ZHdFcuIJoDUngSAGOWZovkF6bW3MQ55JfVgERC3PQoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

Just as a heads-up for the end-of-week in this thread.

> RUN cpanm --mirror http://cpan.metacpan.org<redir.aspx?REF=GCLBU8dKn6QvsjpW7CdADuiWvyBFmNzUsfP_4fo9Nr9C3PQoPvXTCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9UlFBbWtCNGJwYlREV2VyeXRjWVJPTTA0Um94d3E4aEVDMHlpNjZiZ2lkT3l6Q1FjZl9UVENBRm9kSFJ3Y3pvdkwzZGxZbTFoYVd3dWIybGpjaTV2Ymk1allTOXZkMkV2Y21Wa2FYSXVZWE53ZUQ5U1JVWTlaV2xLT0hObk5VRjZTMWRFYlhsbU5WQjVaVzl6TjBwcmVHOXpPR0ZWY2w5S01GUk5WVFEyUkhKM1dubHFWVVV6WlY5VVZFTkJSbTlrU0ZKM1QyazRkbGt6UW1oaWFUVjBXbGhTYUZrelFtaGlhVFYyWTIxakxnLi4.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

This got me on the right track, I actually needed the following syntax

RUN cpanm --mirror https://cpan.metacpan.org<redir.aspx?REF=M0uZ9D1dfWugNF2rWRaP_ci0k_TufqkfJPyoxnzuQiBC3PQoPvXTCAFodHRwczovL2NwYW4ubWV0YWNwYW4ub3Jn> -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \

     rm -rf ~/.cpanm



However, it looks like making the suggested change breaks the workflow when attempting to run with the test data. In short, the bas file is definitely being generated inside the Docker container. Moving it to the suggested location breaks the workflow later.

I'm currently attempting to run the donor DO50311 to see if I can get more insight into what is going on.
________________________________
From: Keiran Raine [kr2 at sanger.ac.uk<redir.aspx?REF=GpopcQzDji-UuYCWuCyn3sz_Aa2RgvMQllBpw7JmerVC3PQoPvXTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>]
Sent: October 12, 2016 2:09 PM
To: Denis Yuen
Cc: docktesters at lists.icgc.org<redir.aspx?REF=J1xLM-ZHdFcuIJoDUngSAGOWZovkF6bW3MQ55JfVgERC3PQoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

You've hit an issue that only has occurred in the last few weeks for us also.

BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.

The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:

RUN cpanm --mirror http://cpan.metacpan.org<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
     rm -rf ~/.cpanm

to

RUN cpanm --mirror http://cpan.metacpan.org<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

Thankfully something I could identify immediately.

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:

Hi,

Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
I'm attaching the build log from the Dockerfile and the log from inside the container.


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>]
Sent: October 12, 2016 10:59 AM
To: Keiran Raine
Cc: docktesters at lists.icgc.org<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

While that would have been a good explanation, unfortunately, it doesn't seem to be the case.
In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> ) , the bam files are described like

inputs:

  tumor:

    type: File

    inputBinding:

      position: 1

      prefix: --tumor

    secondaryFiles:

    - .bai



  refFrom:

    type: File

    inputBinding:

      position: 3

      prefix: --refFrom

  bbFrom:

    type: File

    inputBinding:

      position: 4

      prefix: --bbFrom

  normal:

    type: File

    inputBinding:

      position: 2

      prefix: --normal

    secondaryFiles:

    - .bai


The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime.

________________________________
From: Keiran Raine [kr2 at sanger.ac.uk<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>]
Sent: October 12, 2016 10:49 AM
To: Denis Yuen
Cc: Miguel Vazquez; docktesters at lists.icgc.org<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:

Hi,
I can make the modification, I'll run it through the test data and that should finish in roughly a day.
In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>] on behalf of Keiran Raine [kr2 at sanger.ac.uk<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>]
Sent: October 12, 2016 6:16 AM
To: Miguel Vazquez
Cc: docktesters at lists.icgc.org<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:

[The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
Hi Keiran,

Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative?

Miguel


On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
In the original version we didn't do this step, if we have write access it can be made to do that

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:

Hi Keiran,
If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
Would it not be better if it read

private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);



File f = new File(sampleBam);



thisJob.getCommand()



.addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")



.addArgument(installBase)



.addArgument("bam_stats")



.addArgument("-i " + sampleBam)



.addArgument("-o " + sampleBam + ".bas")



;



return thisJob;


}

Best
Miguel

On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk<redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:

Keiran,
Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
Best
Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es<redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:

4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.


I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check.
Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
Best
Miguel




-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
<build.log><outer.build.log>


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.

_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<redir.aspx?REF=JZZvNMiYrkfoy-7gYb4imZLAxfvR8Zf5IudHtB5aSXicPvcoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
https://lists.icgc.org/mailman/listinfo/docktesters<redir.aspx?REF=6dBvDfvGYqdzjIw44f0ufI0PD05iNplZFPq_T_TCU1ycPvcoPvXTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161015/59119d9d/attachment-0001.html>

From kr2 at sanger.ac.uk  Mon Oct 17 04:25:12 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Mon, 17 Oct 2016 09:25:12 +0100
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH
	teleconference
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A1713@exmb2.ad.oicr.on.ca>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca> <66DF88B3-B90
 D-419B-8E9E-D9864BE237FA@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A165C@exmb2.ad.oicr.on.ca>
 <7DDCBF2C-66B0-42F2-B1CF-60508098BDD8@ohsu.edu>
 <27512884B2D81B41AAB7BB266248F240C09A169F@exmb2.ad.oicr.on.ca>
 <CA+dx8ma3aKAkKKmXH8fPaQHMUT96u3QGe-o2gCBkhLdXcUwTng@mail.gmail.com>
 <27512884B2D81B41AAB7BB266248F240C09A1713@exmb2.ad.oicr.on.ca>
Message-ID: <D9A4E800-08E7-42FA-9E84-22383456767E@sanger.ac.uk>

Hi Denis,

The commands executed by the Pindel step appear to be being handed the original BAM file location rather (/var/lib/cwl) than the symlinks in the output area (/var/spool/cwl).  This would be the problem.

All the jobs that execute after the BAS generation should use the symlinked BAMs in the output area (although I think it's only important for pindel and brass).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 15 Oct 2016, at 22:10, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:
> 
> Hi,
> 
> Agreed, to sum up:
> 
> 1) The donor test set includes bas files. The real donor sets do not. 
> 2) That said, the way the CWL file is written, regardless of whether a bas file is provided in the test set, they don't actually make it into the docker container. Instead, they get generated inside the container while it is running.
> 3) The pindel step does indeed fail in DO50311 on a host that successfully ran the test data. 
> 
> Keiran, some additional info for debugging.
> 
> The CWL file results in this docker invocation:
> 
> [job temp8674499429956656923.cwl] /tmp/tmp0NOg7v$ docker \
>     run \
>     -i \
>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:ro \
>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam:ro \
>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam.bai:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai:ro \
>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/ab975a04-937f-40fc-b3e5-40b41c2295fc/GRCh37d5_CGP_refBundle.tar.gz:/var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz:ro \
>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam:ro \
>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/d3ae586e-1251-470b-bbf8-f498e5895312/GRCh37d5_battenberg.tar.gz:/var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz:ro \
>     --volume=/tmp/tmp0NOg7v:/var/spool/cwl:rw \
>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/workingQriPMs:/tmp:rw \
>     --workdir=/var/spool/cwl \
>     --read-only=true \
>     --user=1000 \
>     --env=TMPDIR=/tmp \
>     --env=HOME=/var/spool/cwl \
>     quay.io/pancancer/pcawg-sanger-cgp-workflow:2.0.0-cwl1 <http://quay.io/pancancer/pcawg-sanger-cgp-workflow:2.0.0-cwl1> \
>     python \
>     /home/seqware/CGP-Somatic-Docker/scripts/run_seqware_workflow.py \
>     --tumor \
>     /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam \
>     --normal \
>     /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam \
>     --refFrom \
>     /var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz \
>     --bbFrom \
>     /var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz
> 
> The listing of the working directory (/var/spool/cwl) is as follows and does seem to include generated bas files:
> 
> ubuntu at sanger-retest:/tmp/tmp0NOg7v$ ls -alhtr
> total 92K
> -rw-r--r--  1 ubuntu ubuntu 1.6K Oct 14 22:07 workflow.ini
> -rw-r--r--  1 ubuntu ubuntu   28 Oct 14 22:07 .Rprofile
> drwxr-xr-x  3 ubuntu root   4.0K Oct 14 22:07 .seqware
> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 ngsCounts
> lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam
> lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam.bai -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai
> lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
> lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam.bai -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai
> drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 14 22:07 1
> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 genotype
> drwxr-xr-x  8 ubuntu ubuntu 4.0K Oct 14 22:19 reference_files
> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:19 genotype_b02b4bba-6e66-44fb-a48f-38c309aaaac5
> -rw-r--r--  1 ubuntu ubuntu 2.4K Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz
> -rw-r--r--  1 ubuntu ubuntu   33 Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz.md5
> -rw-r--r--  1 ubuntu ubuntu 1.5K Oct 14 22:58 fdcb1bd7cffca69d15383ca9566c58e0.bam.bas
> -rw-r--r--  1 ubuntu ubuntu 2.3K Oct 14 23:17 7875b5196f6b8b52847f99bf370aada0.bam.bas
> -rw-r--r--  1 ubuntu ubuntu   33 Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz.md5
> -rw-r--r--  1 ubuntu ubuntu 2.4K Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz
> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 15 10:02 timings
> drwxr-xr-x  5 ubuntu ubuntu 4.0K Oct 15 10:02 0
> drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 15 10:06 bbCounts
> drwx------ 11 ubuntu ubuntu 4.0K Oct 15 20:28 .
> drwxrwxrwt 21 root   root   4.0K Oct 15 20:29 ..
> 
> The full output of the failing script is:
> 
> Errors from command: /usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz
> 
> Unknown sort order field: unknown
> Collated 500000 readpairs (in 6 sec.)
> [V] 1   34.4825MB/s     133279
> Thread Worker 1: started
> Thread 1 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
> Collated 500000 readpairs (in 4 sec.)
> [V] 2   39.9836MB/s     154626
> Thread Worker 2: started
> Thread 2 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
> Collated 500000 readpairs (in 4 sec.)
> Thread Worker 3: started
> Thread 3 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03'
> [V] 3   42.4188MB/s     164102
> Collated 500000 readpairs (in 4 sec.)
> Thread Worker 4: started
> Thread 4 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
> [V] 4   43.7799MB/s     169368
> Collated 500000 readpairs (in 4 sec.)
> An error occurred while running:
>         /opt/wtsi-cgp/bin/bamcollate2 outputformat=sam colsbs=268435456 collate=1 classes=F,F2 exclude=DUP,SECONDARY,QCFAIL,SUPPLEMENTARY T=/var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c/tmp1kNw/collate_tmp filename=/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
> ERROR: Converter thread error: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
> 
> Perl exited with active threads:
>         0 running and unjoined
>         3 finished and unjoined
>         0 running and detached
> Thread 2 terminated abnormally: main=HASH(0x50044b0) at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 115.
> Thread error: "/usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz" unexpectedly returned exit value 29 at (eval 410) line 13 thread 2.
>  at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 190
> 
> Command exited with non-zero status 25
> 10.23user 8.79system 0:32.33elapsed 58%CPU (0avgtext+0avgdata 10819936maxresident)k
> 1184inputs+8552outputs (2major+711948minor)pagefaults 0swaps 
> 
> Please let me know if any of the files on that host would be useful to debug this.
> 
> 
> From: mikisvaz at gmail.com [mikisvaz at gmail.com] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es]
> Sent: October 15, 2016 2:52 AM
> To: Denis Yuen
> Cc: Adam Struck; Keiran Raine; docktesters at lists.icgc.org
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Just to clarify Denis, the BAS file was not present in the download of the donor data, while it was present in the download of the test data. That is as much as I observed, and this matched Keiran comment that a missing BAS file was consistent with the pindel error.I have no idea of what the workflow was doing so as far as I know the BAS could have been created correctly and the error was something else. 
> 
> Best regards
> 
> On Sat, Oct 15, 2016 at 12:20 AM, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://96/redir.aspx?REF=pdXc3tLgyH1l3nCACyO7t60Zlm6wagDt69rPJrvutaboefIoPvXTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:
> Hi,
> 
> Adam, to summarise:
> My observations seem to match yours, the bas file and input bams are generated inside the Docker container with the test data. However, Miguel has observed that something else seems to be happening with DO50311 that looks like the bas file being missing. I'm currently running that donor to see if I can extract more information and determine what is occurring. 
> 
> 
> From: Adam Struck [strucka at ohsu.edu <x-msg://96/redir.aspx?REF=e3Bb_0OXe1XHYVTj8ArmiAyg7BPppngtpWhFji-xoYvoefIoPvXTCAFtYWlsdG86c3RydWNrYUBvaHN1LmVkdQ..>]
> Sent: October 14, 2016 6:10 PM
> To: Denis Yuen; Keiran Raine
> 
> Cc: docktesters at lists.icgc.org <x-msg://96/redir.aspx?REF=OLVV037EZQ_oNg0dw6j8CjmcRLX5SDA94DNZ9CuUmlPoefIoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi Denis,
> 
>  
> Sorry, to chime in late.  The bas file and input BAMs should be getting colocalized already (see below). Where are these files ending up when you run the workflow?
> 
>  
> Inputs are symlinked to the OUTDIR.
> 
> https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L1035-L1039 <x-msg://96/redir.aspx?REF=9sxlgQySOjyiArzZHkvUEFmv7XZNtn7-nmwxwo9q02roefIoPvXTCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9d2gyRlNqWEJCV0ZITzN5aWxMZ1VLeC02Rl90MFJLVHVOZk1mZG96dUtmcXl6Q1FjZl9UVENBRm9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZZV1JoYlhOMGNuVmpheTlEUjFBdFUyOXRZWFJwWXkxRWIyTnJaWEl2WW14dllpOWtaWFpsYkc5d0wzTnlZeTl0WVdsdUwycGhkbUV2YVc4dmMyVnhkMkZ5WlM5d1lXNWpZVzVqWlhJdlEyZHdVMjl0WVhScFkwTnZjbVV1YW1GMllTTk1NVEF6TlMxTU1UQXpPUS4u>
>  
> Bas files are written to OUTDIR
> 
> https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <x-msg://96/redir.aspx?REF=nMZKB5yEsF1hOq-bI1Rl-HGQ9uMTzFrRZHaqeNBi9DDoefIoPvXTCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9UURXelNBM1RwNElybGJOYlBNOXV1T25BaDg4V3JUR0xPOS1kaDdJVGVnaXl6Q1FjZl9UVENBRm9kSFJ3Y3pvdkwyZHBkR2gxWWk1amIyMHZZV1JoYlhOMGNuVmpheTlEUjFBdFUyOXRZWFJwWXkxRWIyTnJaWEl2WW14dllpOWtaWFpsYkc5d0wzTnlZeTl0WVdsdUwycGhkbUV2YVc4dmMyVnhkMkZ5WlM5d1lXNWpZVzVqWlhJdlEyZHdVMjl0WVhScFkwTnZjbVV1YW1GMllTTk1Oelk1TFV3M09EQS4.>
>  
> I have now run 25 donors worth of data (from PRAD-UK) through this workflow using the WDL descriptor and the cromwell engine on the CCC platform without an issue.
> 
>  
> -Adam 
> 
>  
> From: <docktesters-bounces+strucka=ohsu.edu at lists.icgc.org <x-msg://96/redir.aspx?REF=8Jvw_X_sBlK8e4JvARHiU3J6q2_V5WsHbDLBblbblu7oefIoPvXTCAFtYWlsdG86b2hzdS5lZHVAbGlzdHMuaWNnYy5vcmc.>> on behalf of Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://96/redir.aspx?REF=pdXc3tLgyH1l3nCACyO7t60Zlm6wagDt69rPJrvutaboefIoPvXTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>>
> Date: Friday, October 14, 2016 at 2:55 PM
> To: Keiran Raine <kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=MwoQC4T4UthwrvybjgAxpgXBl8iVDiWHQJPLp05vQkfoefIoPvXTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>>
> Cc: "docktesters at lists.icgc.org <x-msg://96/redir.aspx?REF=OLVV037EZQ_oNg0dw6j8CjmcRLX5SDA94DNZ9CuUmlPoefIoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>" <docktesters at lists.icgc.org <x-msg://96/redir.aspx?REF=J1xLM-ZHdFcuIJoDUngSAGOWZovkF6bW3MQ55JfVgERC3PQoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>>
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
>  
> Hi,
> 
> Just as a heads-up for the end-of-week in this thread. 
> 
> > RUN cpanm --mirror http://cpan.metacpan.org <x-msg://96/redir.aspx?REF=GCLBU8dKn6QvsjpW7CdADuiWvyBFmNzUsfP_4fo9Nr9C3PQoPvXTCAFodHRwOi8vcmVkaXIuYXNweD9SRUY9UlFBbWtCNGJwYlREV2VyeXRjWVJPTTA0Um94d3E4aEVDMHlpNjZiZ2lkT3l6Q1FjZl9UVENBRm9kSFJ3Y3pvdkwzZGxZbTFoYVd3dWIybGpjaTV2Ymk1allTOXZkMkV2Y21Wa2FYSXVZWE53ZUQ5U1JVWTlaV2xLT0hObk5VRjZTMWRFYlhsbU5WQjVaVzl6TjBwcmVHOXpPR0ZWY2w5S01GUk5WVFEyUkhKM1dubHFWVVV6WlY5VVZFTkJSbTlrU0ZKM1QyazRkbGt6UW1oaWFUVjBXbGhTYUZrelFtaGlhVFYyWTIxakxnLi4.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
>      rm -rf ~/.cpanm
> 
> This got me on the right track, I actually needed the following syntax
> 
> RUN cpanm --mirror https://cpan.metacpan.org <x-msg://96/redir.aspx?REF=M0uZ9D1dfWugNF2rWRaP_ci0k_TufqkfJPyoxnzuQiBC3PQoPvXTCAFodHRwczovL2NwYW4ubWV0YWNwYW4ub3Jn> -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \
>      rm -rf ~/.cpanm
> 
> However, it looks like making the suggested change breaks the workflow when attempting to run with the test data. In short, the bas file is definitely being generated inside the Docker container. Moving it to the suggested location breaks the workflow later. 
> 
> I'm currently attempting to run the donor DO50311 to see if I can get more insight into what is going on.
> 
> From: Keiran Raine [kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=GpopcQzDji-UuYCWuCyn3sz_Aa2RgvMQllBpw7JmerVC3PQoPvXTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>]
> Sent: October 12, 2016 2:09 PM
> To: Denis Yuen
> Cc: docktesters at lists.icgc.org <x-msg://96/redir.aspx?REF=J1xLM-ZHdFcuIJoDUngSAGOWZovkF6bW3MQ55JfVgERC3PQoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi Denis,
> 
>  
> You've hit an issue that only has occurred in the last few weeks for us also.
> 
>  
> BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.
> 
>  
> The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:
> 
> 
> RUN cpanm --mirror http://cpan.metacpan.org <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
>      rm -rf ~/.cpanm
> 
>  
> to
> 
>  
> RUN cpanm --mirror http://cpan.metacpan.org <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
>      rm -rf ~/.cpanm
> 
>  
> Thankfully something I could identify immediately.
> 
>  
> Regards,
> 
> 
> Keiran Raine
> 
> Principal Bioinformatician
> 
> Cancer Genome Project
> 
> Wellcome Trust Sanger Institute
> 
>  
> kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
> Office: H104
> 
>  
> On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
> 
>  
> Hi, 
> 
> Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
> Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
> I'm attaching the build log from the Dockerfile and the log from inside the container.
> 
> 
>  
> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>]
> Sent: October 12, 2016 10:59 AM
> To: Keiran Raine
> Cc: docktesters at lists.icgc.org <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi,
> 
> While that would have been a good explanation, unfortunately, it doesn't seem to be the case. 
> In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> ) , the bam files are described like 
> 
> inputs:
>   tumor:
>     type: File
>     inputBinding:
>       position: 1
>       prefix: --tumor
>     secondaryFiles:
>     - .bai
>  
>   refFrom:
>     type: File
>     inputBinding:
>       position: 3
>       prefix: --refFrom
>   bbFrom:
>     type: File
>     inputBinding:
>       position: 4
>       prefix: --bbFrom
>   normal:
>     type: File
>     inputBinding:
>       position: 2
>       prefix: --normal
>     secondaryFiles:
>     - .bai
> The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime. 
> 
>  
> From: Keiran Raine [kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>]
> Sent: October 12, 2016 10:49 AM
> To: Denis Yuen
> Cc: Miguel Vazquez; docktesters at lists.icgc.org <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi Denis, 
> 
>  
> I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.
> 
> 
> Keiran Raine
> 
> Principal Bioinformatician
> 
> Cancer Genome Project
> 
> Wellcome Trust Sanger Institute
> 
>  
> kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
> Office: H104
> 
>  
> On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
> 
>  
> Hi,
> I can make the modification, I'll run it through the test data and that should finish in roughly a day. 
> In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?
> 
>  
> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>] on behalf of Keiran Raine [kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>]
> Sent: October 12, 2016 6:16 AM
> To: Miguel Vazquez
> Cc: docktesters at lists.icgc.org <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi, 
> 
>  
> This is assuming that it is possible to write to the location the BAM are in.
> 
>  
> I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).
> 
>  
> Regards,
> 
> 
> Keiran Raine
> 
> Principal Bioinformatician
> 
> Cancer Genome Project
> 
> Wellcome Trust Sanger Institute
> 
>  
> kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
> Office: H104
> 
>  
> On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
> 
>  
> [The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
> 
> Hi Keiran,
> 
> 
> Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative? 
> 
>  
> Miguel
> 
> 
>  
> On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
> 
> In the original version we didn't do this step, if we have write access it can be made to do that
> 
> 
> Keiran Raine
> 
> Principal Bioinformatician
> 
> Cancer Genome Project
> 
> Wellcome Trust Sanger Institute
> 
>  
> kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
> Office: H104
> 
>  
> On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://96/redir.aspx?REF=gMH-5LAicq8S5yMOqPZvse2s_RgVxz6JNq1MjJxBgGtC3PQoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
> 
>  
> Hi Keiran,
> 
> If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
> 
> Would it not be better if it read
> 
> private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) { 
> 
> Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
> 
>  
> File f = new File(sampleBam);
> 
>  
> thisJob.getCommand()
> 
>  
> .addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
> 
>  
> .addArgument(installBase)
> 
>  
> .addArgument("bam_stats")
> 
>  
> .addArgument("-i " + sampleBam)
> 
>  
> .addArgument("-o " + sampleBam + ".bas")
> 
>  
> ;
> 
>  
> return thisJob;
> 
> }
> 
>  
> Best
> 
> Miguel
> 
>  
> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
> 
> Relevant section of code: 
> 
>  
> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <x-msg://96/redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> 
> Keiran Raine
> 
> Principal Bioinformatician
> 
> Cancer Genome Project
> 
> Wellcome Trust Sanger Institute
> 
>  
> kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
> Office: H104
> 
>  
> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
> 
>  
> Hi, 
> 
>  
> There is a step generating the BAS files:
> 
>  
> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh
> 
>  
> But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.
> 
>  
> This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.
> 
>  
> Hope this is easier to solve now,
> 
> 
> Keiran Raine
> 
> Principal Bioinformatician
> 
> Cancer Genome Project
> 
> Wellcome Trust Sanger Institute
> 
>  
> kr2 at sanger.ac.uk <x-msg://96/redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>
> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
> Office: H104
> 
>  
> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://96/redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
> 
>  
> Keiran,
> 
> Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
> 
> Best
> 
> Miguel
> 
>  
> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://96/redir.aspx?REF=zEZt4HhRc3vEsFUYw7AbmSRLYx5BsmuKSs_sOlyc6_GcPvcoPvXTCAFodHRwOi8vVXJsQmxvY2tlZEVycm9yLmFzcHg.>> wrote:
> 
>  
> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.
> 
>  
>  
> I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check. 
> 
> Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
> 
> Best
> 
> Miguel
> 
>  
>  
>  
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
> 
>  
> 
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
> 
>  
>  
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
> 
>  
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
> 
> <build.log><outer.build.log>
> 
>  
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
> 
> 
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org <x-msg://96/redir.aspx?REF=JZZvNMiYrkfoy-7gYb4imZLAxfvR8Zf5IudHtB5aSXicPvcoPvXTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
> https://lists.icgc.org/mailman/listinfo/docktesters <x-msg://96/redir.aspx?REF=6dBvDfvGYqdzjIw44f0ufI0PD05iNplZFPq_T_TCU1ycPvcoPvXTCAFodHRwczovL2xpc3RzLmljZ2Mub3JnL21haWxtYW4vbGlzdGluZm8vZG9ja3Rlc3RlcnM.>



-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161017/ed36af76/attachment-0001.html>

From francis at oicr.on.ca  Mon Oct 17 08:50:41 2016
From: francis at oicr.on.ca (Francis Ouellette)
Date: Mon, 17 Oct 2016 12:50:41 +0000
Subject: [DOCKTESTERS] [PAWG-TECH] Draft agenda for
	PCAWG-TECH	teleconference
In-Reply-To: <7DDCBF2C-66B0-42F2-B1CF-60508098BDD8@ohsu.edu>
References: <0F84ED6166CE664E8563B61CB2ECB98CCBA7F1FA@exmb2.ad.oicr.on.ca>
 <16D5F0B4-2278-4A78-A038-02A3C61737CF@oicr.on.ca>
 <CA+dx8mYFfMbd3m_-1shwZD-EAHs8rNmmzBsoicQZAaPZdFMPxQ@mail.gmail.com>
 <CA+dx8maaxwYAQSMHzhBWH6dqi=Ny9EEOq19f3J-XaBXEn_bLGg@mail.gmail.com>
 <6D379955-753C-4F00-A4C8-5E32C654349E@sanger.ac.uk>
 <CA+dx8mbJusAtgiMC3++T7D6GThmGgdzTLk-S0DnAhmzp2KfTsA@mail.gmail.com>
 <CA+dx8mboe5ksJZk=tm9rpG=u=oBc0_4Wj5s3xvVnmoZYm_ZNBA@mail.gmail.com>
 <FEB70E5A-C7CD-4629-B37B-0A22531A9AD9@sanger.ac.uk>
 <3AD4BF40-3610-4BFF-BCBF-19D63BA88820@sanger.ac.uk>
 <CA+dx8mYZG9nRGbmn=Gkazj-CK+eUh8H8zO0LNEJxU5zKSHx_JQ@mail.gmail.com>
 <3C1FBE27-69BD-4C2C-A683-0AB8541A1602@sanger.ac.uk>
 <CA+dx8mYQTjPXu6cVs3n5L9sYP7S6v5qK=4Y-9R=Joj9t55abdw@mail.gmail.com>
 <689D9C27-0DC6-4FAF-A8BB-4885477E6AC9@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A1297@exmb2.ad.oicr.on.ca>
 <BA201A2A-6616-49A3-961F-67C2BA3C5A70@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A12E1@exmb2.ad.oicr.on.ca>
 <66DF88B3-B90D-419B-8E9E-D9864BE237FA@sanger.ac.uk>
 <27512884B2D81B41AAB7BB266248F240C09A165C@exmb2.ad.oicr.on.ca>
 <7DDCBF2C-66B0-42F2-B1CF-60508098BDD8@ohsu.edu>
Message-ID: <3EEB41D2-872B-44CC-9597-4C8FA121DB88@oicr.on.ca>

Adam,

Can you post your success with Sanger workflow on

https://wiki.oicr.on.ca/display/PANCANCER/Workflow+Testing+Data

Thank you,

@bffo


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette



On Oct 14, 2016, at 3:10 PM, Adam Struck <strucka at ohsu.edu<mailto:strucka at ohsu.edu>> wrote:

Hi Denis,

Sorry, to chime in late.  The bas file and input BAMs should be getting colocalized already (see below). Where are these files ending up when you run the workflow?

Inputs are symlinked to the OUTDIR.
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L1035-L1039

Bas files are written to OUTDIR
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780

I have now run 25 donors worth of data (from PRAD-UK) through this workflow using the WDL descriptor and the cromwell engine on the CCC platform without an issue.

-Adam

From: <docktesters-bounces+strucka=ohsu.edu at lists.icgc.org<mailto:docktesters-bounces+strucka=ohsu.edu at lists.icgc.org>> on behalf of Denis Yuen <Denis.Yuen at oicr.on.ca<mailto:Denis.Yuen at oicr.on.ca>>
Date: Friday, October 14, 2016 at 2:55 PM
To: Keiran Raine <kr2 at sanger.ac.uk<mailto:kr2 at sanger.ac.uk>>
Cc: "docktesters at lists.icgc.org<mailto:docktesters at lists.icgc.org>" <docktesters at lists.icgc.org<mailto:docktesters at lists.icgc.org>>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

Just as a heads-up for the end-of-week in this thread.

> RUN cpanm --mirror http://cpan.metacpan.org<https://webmail.oicr.on.ca/owa/redir.aspx?REF=eiJ8sg5AzKWDmyf5Pyeos7Jkxos8aUr_J0TMU46DrwZyjUE3e_TTCAFodHRwOi8vY3Bhbi5tZXRhY3Bhbi5vcmc.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

This got me on the right track, I actually needed the following syntax

RUN cpanm --mirror https://cpan.metacpan.org -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \

     rm -rf ~/.cpanm



However, it looks like making the suggested change breaks the workflow when attempting to run with the test data. In short, the bas file is definitely being generated inside the Docker container. Moving it to the suggested location breaks the workflow later.

I'm currently attempting to run the donor DO50311 to see if I can get more insight into what is going on.
________________________________
From: Keiran Raine [kr2 at sanger.ac.uk<mailto:kr2 at sanger.ac.uk>]
Sent: October 12, 2016 2:09 PM
To: Denis Yuen
Cc: docktesters at lists.icgc.org<mailto:docktesters at lists.icgc.org>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

You've hit an issue that only has occurred in the last few weeks for us also.

BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.

The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:

RUN cpanm --mirror http://cpan.metacpan.org<x-msg://6/redir.aspx?REF=eiJ8sg5AzKWDmyf5Pyeos7Jkxos8aUr_J0TMU46DrwZyjUE3e_TTCAFodHRwOi8vY3Bhbi5tZXRhY3Bhbi5vcmc.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
     rm -rf ~/.cpanm

to

RUN cpanm --mirror http://cpan.metacpan.org<x-msg://6/redir.aspx?REF=eiJ8sg5AzKWDmyf5Pyeos7Jkxos8aUr_J0TMU46DrwZyjUE3e_TTCAFodHRwOi8vY3Bhbi5tZXRhY3Bhbi5vcmc.> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

Thankfully something I could identify immediately.

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<x-msg://6/redir.aspx?REF=V5Abe-SStuOqYQx5YdRisU7BV90nK9H8T6dioasb9FlyjUE3e_TTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca<x-msg://6/redir.aspx?REF=hS48QCaXDgHI-KBBoRTpgNwsniqfzvg6l-PbcWcc7ixyjUE3e_TTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:

Hi,

Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
I'm attaching the build log from the Dockerfile and the log from inside the container.


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<x-msg://6/redir.aspx?REF=BXOcyV55OgoSZDrIwYotXj8Er18mYWJvzzYvfp44-9xyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnMtYm91bmNlcytkZW5pcy55dWVuPW9pY3Iub24uY2FAbGlzdHMuaWNnYy5vcmc.> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<x-msg://6/redir.aspx?REF=BXOcyV55OgoSZDrIwYotXj8Er18mYWJvzzYvfp44-9xyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnMtYm91bmNlcytkZW5pcy55dWVuPW9pY3Iub24uY2FAbGlzdHMuaWNnYy5vcmc.>] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca<x-msg://6/redir.aspx?REF=hS48QCaXDgHI-KBBoRTpgNwsniqfzvg6l-PbcWcc7ixyjUE3e_TTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>]
Sent: October 12, 2016 10:59 AM
To: Keiran Raine
Cc: docktesters at lists.icgc.org<x-msg://6/redir.aspx?REF=5ztPaPyZn3quYjxDLHvFSLp1HBgQ1NV6NTGiMx5BNIVyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

While that would have been a good explanation, unfortunately, it doesn't seem to be the case.
In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl<x-msg://6/UrlBlockedError.aspx> ) , the bam files are described like

inputs:

  tumor:

    type: File

    inputBinding:

      position: 1

      prefix: --tumor

    secondaryFiles:

    - .bai



  refFrom:

    type: File

    inputBinding:

      position: 3

      prefix: --refFrom

  bbFrom:

    type: File

    inputBinding:

      position: 4

      prefix: --bbFrom

  normal:

    type: File

    inputBinding:

      position: 2

      prefix: --normal

    secondaryFiles:

    - .bai


The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime.

________________________________
From: Keiran Raine [kr2 at sanger.ac.uk<x-msg://6/redir.aspx?REF=V5Abe-SStuOqYQx5YdRisU7BV90nK9H8T6dioasb9FlyjUE3e_TTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>]
Sent: October 12, 2016 10:49 AM
To: Denis Yuen
Cc: Miguel Vazquez; docktesters at lists.icgc.org<x-msg://6/redir.aspx?REF=5ztPaPyZn3quYjxDLHvFSLp1HBgQ1NV6NTGiMx5BNIVyjUE3e_TTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<x-msg://6/UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca<x-msg://6/UrlBlockedError.aspx>> wrote:

Hi,
I can make the modification, I'll run it through the test data and that should finish in roughly a day.
In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<x-msg://6/UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<x-msg://6/UrlBlockedError.aspx>] on behalf of Keiran Raine [kr2 at sanger.ac.uk<x-msg://6/UrlBlockedError.aspx>]
Sent: October 12, 2016 6:16 AM
To: Miguel Vazquez
Cc: docktesters at lists.icgc.org<x-msg://6/UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<x-msg://6/UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es<x-msg://6/UrlBlockedError.aspx>> wrote:

[The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
Hi Keiran,

Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative?

Miguel


On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk<x-msg://6/UrlBlockedError.aspx>> wrote:
In the original version we didn't do this step, if we have write access it can be made to do that

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<x-msg://6/UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es<x-msg://6/UrlBlockedError.aspx>> wrote:

Hi Keiran,
If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
Would it not be better if it read

private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);



File f = new File(sampleBam);



thisJob.getCommand()



.addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")



.addArgument(installBase)



.addArgument("bam_stats")



.addArgument("-i " + sampleBam)



.addArgument("-o " + sampleBam + ".bas")



;



return thisJob;


}

Best
Miguel

On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk<x-msg://6/UrlBlockedError.aspx>> wrote:
Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<x-msg://6/UrlBlockedError.aspx>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<x-msg://6/UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk<x-msg://6/UrlBlockedError.aspx>> wrote:

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<x-msg://6/UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es<x-msg://6/UrlBlockedError.aspx>> wrote:

Keiran,
Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
Best
Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es<x-msg://6/UrlBlockedError.aspx>> wrote:

4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.


I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check.
Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
Best
Miguel




-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
<build.log><outer.build.log>


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<mailto:docktesters at lists.icgc.org>
https://lists.icgc.org/mailman/listinfo/docktesters

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161017/c78ad127/attachment-0001.html>

From i.buchhalter at dkfz-heidelberg.de  Tue Oct 18 03:06:10 2016
From: i.buchhalter at dkfz-heidelberg.de (Ivo Buchhalter)
Date: Tue, 18 Oct 2016 09:06:10 +0200
Subject: [DOCKTESTERS] DKFZ bias filter docker
Message-ID: <8b96b9c2-d0a4-d8ea-b2ca-7dabfc3a785d@dkfz.de>

Dear dockertesters,

I was told to contact you regarding the DKFZ bias filter docker. The
docker is basically ready and it also passed internal testing. The
scripts and Dockerfile can be found here:
https://github.com/eilslabs/DKFZBiasFilter
Johannes and Manuel (CCed) have been working on bringing it into
Dockstore (they ran into a NFS problem). Johannes is currently on
vacation (until October 23rd).
Please let me know if it is sufficient to have the docker available on
Dockstore some time next week. Alternatively it might be possible that
you work with the scripts and Dockerfile on GitHub. If none of this
works I (or probably Manuel) can also try to get it running on Dockstore
some time later this week.

Best,
Ivo

PS: Sorry to the DKFZ people the email before bounced back because the 
link of the email address on the Wiki had a typo.

From francis at oicr.on.ca  Tue Oct 18 03:32:02 2016
From: francis at oicr.on.ca (Francis Ouellette)
Date: Tue, 18 Oct 2016 07:32:02 +0000
Subject: [DOCKTESTERS] Fwd:  DKFZ bias filter docker
References: <8b96b9c2-d0a4-d8ea-b2ca-7dabfc3a785d@dkfz.de>
Message-ID: <2CFD3EE1-FB12-448F-8B99-391F7CE46CA2@oicr.on.ca>


Dennis and Brian: this is for you. (from today?s tech call)

@bffo


--
B.F. Francis Ouellette          http://oicr.on.ca/person/francis-ouellette



Begin forwarded message:

From: Ivo Buchhalter <i.buchhalter at dkfz-heidelberg.de<mailto:i.buchhalter at dkfz-heidelberg.de>>
Subject: [DOCKTESTERS] DKFZ bias filter docker
Date: October 18, 2016 at 12:06:10 AM PDT
To: <docktesters at lists.icgc.org<mailto:docktesters at lists.icgc.org>>
Cc: "Werner, Johannes" <j.werner at dkfz-heidelberg.de<mailto:j.werner at dkfz-heidelberg.de>>, prinz <m.prinz at dkfz-heidelberg.de<mailto:m.prinz at dkfz-heidelberg.de>>, "Schlesner, Matthias" <m.schlesner at Dkfz-Heidelberg.de<mailto:m.schlesner at Dkfz-Heidelberg.de>>

Dear dockertesters,

I was told to contact you regarding the DKFZ bias filter docker. The
docker is basically ready and it also passed internal testing. The
scripts and Dockerfile can be found here:
https://github.com/eilslabs/DKFZBiasFilter
Johannes and Manuel (CCed) have been working on bringing it into
Dockstore (they ran into a NFS problem). Johannes is currently on
vacation (until October 23rd).
Please let me know if it is sufficient to have the docker available on
Dockstore some time next week. Alternatively it might be possible that
you work with the scripts and Dockerfile on GitHub. If none of this
works I (or probably Manuel) can also try to get it running on Dockstore
some time later this week.

Best,
Ivo

PS: Sorry to the DKFZ people the email before bounced back because the link of the email address on the Wiki had a typo.
_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org
https://lists.icgc.org/mailman/listinfo/docktesters

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161018/1976a5d4/attachment.html>

From Denis.Yuen at oicr.on.ca  Tue Oct 18 11:38:00 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Tue, 18 Oct 2016 15:38:00 +0000
Subject: [DOCKTESTERS] DKFZ bias filter docker
In-Reply-To: <8b96b9c2-d0a4-d8ea-b2ca-7dabfc3a785d@dkfz.de>
References: <8b96b9c2-d0a4-d8ea-b2ca-7dabfc3a785d@dkfz.de>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A1875@exmb2.ad.oicr.on.ca>

Hi,

Thanks for the heads-up, we can probably help out with writing the CWL descriptor for this, but I do have a few questions.

1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
2) Could we get a readme that describes how to use this?
3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?

Thanks!

________________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
Sent: October 18, 2016 3:06 AM
To: docktesters at lists.icgc.org
Cc: Werner, Johannes; prinz; Schlesner, Matthias
Subject: [DOCKTESTERS] DKFZ bias filter docker

Dear dockertesters,

I was told to contact you regarding the DKFZ bias filter docker. The
docker is basically ready and it also passed internal testing. The
scripts and Dockerfile can be found here:
https://github.com/eilslabs/DKFZBiasFilter
Johannes and Manuel (CCed) have been working on bringing it into
Dockstore (they ran into a NFS problem). Johannes is currently on
vacation (until October 23rd).
Please let me know if it is sufficient to have the docker available on
Dockstore some time next week. Alternatively it might be possible that
you work with the scripts and Dockerfile on GitHub. If none of this
works I (or probably Manuel) can also try to get it running on Dockstore
some time later this week.

Best,
Ivo

PS: Sorry to the DKFZ people the email before bounced back because the
link of the email address on the Wiki had a typo.
_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org
https://lists.icgc.org/mailman/listinfo/docktesters

From i.buchhalter at dkfz-heidelberg.de  Wed Oct 19 02:19:56 2016
From: i.buchhalter at dkfz-heidelberg.de (Ivo Buchhalter)
Date: Wed, 19 Oct 2016 08:19:56 +0200
Subject: [DOCKTESTERS] DKFZ bias filter docker
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A1875@exmb2.ad.oicr.on.ca>
References: <8b96b9c2-d0a4-d8ea-b2ca-7dabfc3a785d@dkfz.de>
 <27512884B2D81B41AAB7BB266248F240C09A1875@exmb2.ad.oicr.on.ca>
Message-ID: <95c07a22-98c6-8602-a6ce-f17ca178ec9b@dkfz.de>

Hi Denis,

Sorry for the missing information. I updated the README in the 
repository. I hope things are more clear now.
> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
The filter is part of the DKFZ workflow. Since the other workflows don't 
use similar filters the DKFZ stand alone filter was run on the complete 
data set after merging the calls (only somatic SNV calls).
> 2) Could we get a readme that describes how to use this?
I updated the README. I hope it's more clear now.
> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
I will check if we can provide this later but the filter generally runs 
only a couple of minutes (on a normal somatic "PASS" vcf with <= 10 000 
variants).

Best,
Ivo


> Thanks!
>
> ________________________________________
> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
> Sent: October 18, 2016 3:06 AM
> To: docktesters at lists.icgc.org
> Cc: Werner, Johannes; prinz; Schlesner, Matthias
> Subject: [DOCKTESTERS] DKFZ bias filter docker
>
> Dear dockertesters,
>
> I was told to contact you regarding the DKFZ bias filter docker. The
> docker is basically ready and it also passed internal testing. The
> scripts and Dockerfile can be found here:
> https://github.com/eilslabs/DKFZBiasFilter
> Johannes and Manuel (CCed) have been working on bringing it into
> Dockstore (they ran into a NFS problem). Johannes is currently on
> vacation (until October 23rd).
> Please let me know if it is sufficient to have the docker available on
> Dockstore some time next week. Alternatively it might be possible that
> you work with the scripts and Dockerfile on GitHub. If none of this
> works I (or probably Manuel) can also try to get it running on Dockstore
> some time later this week.
>
> Best,
> Ivo
>
> PS: Sorry to the DKFZ people the email before bounced back because the
> link of the email address on the Wiki had a typo.
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters
On 10/18/2016 05:38 PM, Denis Yuen wrote:
> Hi,
>
> Thanks for the heads-up, we can probably help out with writing the CWL descriptor for this, but I do have a few questions.
>
> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
> 2) Could we get a readme that describes how to use this?
> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
>
> Thanks!
>
> ________________________________________
> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
> Sent: October 18, 2016 3:06 AM
> To: docktesters at lists.icgc.org
> Cc: Werner, Johannes; prinz; Schlesner, Matthias
> Subject: [DOCKTESTERS] DKFZ bias filter docker
>
> Dear dockertesters,
>
> I was told to contact you regarding the DKFZ bias filter docker. The
> docker is basically ready and it also passed internal testing. The
> scripts and Dockerfile can be found here:
> https://github.com/eilslabs/DKFZBiasFilter
> Johannes and Manuel (CCed) have been working on bringing it into
> Dockstore (they ran into a NFS problem). Johannes is currently on
> vacation (until October 23rd).
> Please let me know if it is sufficient to have the docker available on
> Dockstore some time next week. Alternatively it might be possible that
> you work with the scripts and Dockerfile on GitHub. If none of this
> works I (or probably Manuel) can also try to get it running on Dockstore
> some time later this week.
>
> Best,
> Ivo
>
> PS: Sorry to the DKFZ people the email before bounced back because the
> link of the email address on the Wiki had a typo.
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters


From Denis.Yuen at oicr.on.ca  Wed Oct 19 15:33:07 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Wed, 19 Oct 2016 19:33:07 +0000
Subject: [DOCKTESTERS] DKFZ bias filter docker
In-Reply-To: <95c07a22-98c6-8602-a6ce-f17ca178ec9b@dkfz.de>
References: <8b96b9c2-d0a4-d8ea-b2ca-7dabfc3a785d@dkfz.de>
 <27512884B2D81B41AAB7BB266248F240C09A1875@exmb2.ad.oicr.on.ca>,
 <95c07a22-98c6-8602-a6ce-f17ca178ec9b@dkfz.de>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A19D9@exmb2.ad.oicr.on.ca>

Hi,

Thanks, this definitely helps to make it more clear. 
I think this will give us enough information for us to start working on a CWL descriptor or to assist one being written. 

________________________________________
From: Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
Sent: October 19, 2016 2:19 AM
To: Denis Yuen; Ivo Buchhalter; docktesters at lists.icgc.org
Cc: Werner, Johannes; prinz; Schlesner, Matthias
Subject: Re: [DOCKTESTERS] DKFZ bias filter docker

Hi Denis,

Sorry for the missing information. I updated the README in the
repository. I hope things are more clear now.
> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
The filter is part of the DKFZ workflow. Since the other workflows don't
use similar filters the DKFZ stand alone filter was run on the complete
data set after merging the calls (only somatic SNV calls).
> 2) Could we get a readme that describes how to use this?
I updated the README. I hope it's more clear now.
> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
I will check if we can provide this later but the filter generally runs
only a couple of minutes (on a normal somatic "PASS" vcf with <= 10 000
variants).

Best,
Ivo


> Thanks!
>
> ________________________________________
> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
> Sent: October 18, 2016 3:06 AM
> To: docktesters at lists.icgc.org
> Cc: Werner, Johannes; prinz; Schlesner, Matthias
> Subject: [DOCKTESTERS] DKFZ bias filter docker
>
> Dear dockertesters,
>
> I was told to contact you regarding the DKFZ bias filter docker. The
> docker is basically ready and it also passed internal testing. The
> scripts and Dockerfile can be found here:
> https://github.com/eilslabs/DKFZBiasFilter
> Johannes and Manuel (CCed) have been working on bringing it into
> Dockstore (they ran into a NFS problem). Johannes is currently on
> vacation (until October 23rd).
> Please let me know if it is sufficient to have the docker available on
> Dockstore some time next week. Alternatively it might be possible that
> you work with the scripts and Dockerfile on GitHub. If none of this
> works I (or probably Manuel) can also try to get it running on Dockstore
> some time later this week.
>
> Best,
> Ivo
>
> PS: Sorry to the DKFZ people the email before bounced back because the
> link of the email address on the Wiki had a typo.
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters
On 10/18/2016 05:38 PM, Denis Yuen wrote:
> Hi,
>
> Thanks for the heads-up, we can probably help out with writing the CWL descriptor for this, but I do have a few questions.
>
> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
> 2) Could we get a readme that describes how to use this?
> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
>
> Thanks!
>
> ________________________________________
> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
> Sent: October 18, 2016 3:06 AM
> To: docktesters at lists.icgc.org
> Cc: Werner, Johannes; prinz; Schlesner, Matthias
> Subject: [DOCKTESTERS] DKFZ bias filter docker
>
> Dear dockertesters,
>
> I was told to contact you regarding the DKFZ bias filter docker. The
> docker is basically ready and it also passed internal testing. The
> scripts and Dockerfile can be found here:
> https://github.com/eilslabs/DKFZBiasFilter
> Johannes and Manuel (CCed) have been working on bringing it into
> Dockstore (they ran into a NFS problem). Johannes is currently on
> vacation (until October 23rd).
> Please let me know if it is sufficient to have the docker available on
> Dockstore some time next week. Alternatively it might be possible that
> you work with the scripts and Dockerfile on GitHub. If none of this
> works I (or probably Manuel) can also try to get it running on Dockstore
> some time later this week.
>
> Best,
> Ivo
>
> PS: Sorry to the DKFZ people the email before bounced back because the
> link of the email address on the Wiki had a typo.
> _______________________________________________
> docktesters mailing list
> docktesters at lists.icgc.org
> https://lists.icgc.org/mailman/listinfo/docktesters


From Denis.Yuen at oicr.on.ca  Wed Oct 19 16:36:39 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Wed, 19 Oct 2016 20:36:39 +0000
Subject: [DOCKTESTERS] Sanger symlinked input file issue
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A19FA@exmb2.ad.oicr.on.ca>

Hi,

FYI, breaking this out into a thread so hopefully this renders better in threaded email clients.

Keiran, I took a look at running that /usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl command while pointing it at the symlinked version in /var/spool/cwl and surprisingly it works (or at least executes well past the displayed error).

Unfortunately, this command is generated and it doesn't seem to be part of the CGP-Somatic-Docker<https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Dockerhttp://> codebase.
Basically, the SeqWare code that is in the that repo encodes this command (note that it refers to the version in /var/spool/cwl)

seqware at 83bd876f1b5d:/datastore/oozie-76d2e11f-9e92-44aa-841e-a7ddf70a4aab/generated-scripts$ cat s58_cgpPindel_input_70.sh
#!/usr/bin/env bash
set -o errexit
set -o pipefail

export SEQWARE_SETTINGS=/var/spool/cwl/.seqware/settings
cd /datastore/oozie-76d2e11f-9e92-44aa-841e-a7ddf70a4aab
/usr/bin/time /usr/bin/time --format="Wall_s %e\nUser_s %U\nSystem_s %S\nMax_kb %M" --output=/var/spool/cwl/timings/0_cgpPindel_input_2 /home/seqware/CGP-Somatic-Docker/target/Workflow_Bundle_CgpSomaticCore_0.0.0_SeqWare_1.1.1/Workflow_Bundle_CgpSomaticCore/0.0.0/bin/wrapper.sh /opt/wtsi-cgp pindel.pl -p input -r /var/spool/cwl/reference_files/genome.fa -e MT,GL%,hs37d5,NC_007605 -st WGS -as GRCh37 -sp human -s /var/spool/cwl/reference_files/pindel/simpleRepeats.bed.gz -f /var/spool/cwl/reference_files/pindel/genomicRules.lst -g /var/spool/cwl/reference_files/pindel/human.GRCh37.indelCoding.bed.gz -u /var/spool/cwl/reference_files/pindel/pindel_np.gff3.gz -sf /var/spool/cwl/reference_files/pindel/softRules.lst -b /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz -o /var/spool/cwl/0/pindel -t /var/spool/cwl/7875b5196f6b8b52847f99bf370aada0.bam -n /var/spool/cwl/fdcb1bd7cffca69d15383ca9566c58e0.bam -i 2 -c 4

I think /opt/wtsi-cgp pindel.pl must then be generating the failing command (using  /opt/wtsi-cgp/bin/pindel_input_gen.pl  ) that I listed below with the original symlinked location.
I believe that the culprit is this section of pindel.pl which must be tracing the input back to the original target of the symlink and using that instead.

  # make all things that appear to be paths absolute
  for (keys %opts) {
    $opts{$_} = abs_path($opts{$_}) if(defined $opts{$_} && -e $opts{$_});
  }

Not entirely sure why this affects this particular donor, but that's what I've found so far. Should we attempt to modify pindel or is there a configuration setting we can take advantage of?



________________________________
From: Keiran Raine [kr2 at sanger.ac.uk]
Sent: October 17, 2016 4:25 AM
To: Denis Yuen
Cc: Miguel Vazquez; Adam Struck; docktesters at lists.icgc.org
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Denis,

The commands executed by the Pindel step appear to be being handed the original BAM file location rather (/var/lib/cwl) than the symlinks in the output area (/var/spool/cwl).  This would be the problem.

All the jobs that execute after the BAS generation should use the symlinked BAMs in the output area (although I think it's only important for pindel and brass).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<redir.aspx?REF=4zfyWFME5zuNg3Iu2duWBTIs04TZffesqfdqwRC7VeM4Kn9QXvjTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

On 15 Oct 2016, at 22:10, Denis Yuen <Denis.Yuen at oicr.on.ca<redir.aspx?REF=EEPuTl7_Q12Px7_fSgo92oc2O0HCcrAbJ6FakT0TcB04Kn9QXvjTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:

Hi,

Agreed, to sum up:

1) The donor test set includes bas files. The real donor sets do not.
2) That said, the way the CWL file is written, regardless of whether a bas file is provided in the test set, they don't actually make it into the docker container. Instead, they get generated inside the container while it is running.
3) The pindel step does indeed fail in DO50311 on a host that successfully ran the test data.

Keiran, some additional info for debugging.

The CWL file results in this docker invocation:

[job temp8674499429956656923.cwl] /tmp/tmp0NOg7v$ docker \
    run \
    -i \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam.bai:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/ab975a04-937f-40fc-b3e5-40b41c2295fc/GRCh37d5_CGP_refBundle.tar.gz:/var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam:ro \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/d3ae586e-1251-470b-bbf8-f498e5895312/GRCh37d5_battenberg.tar.gz:/var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz:ro \
    --volume=/tmp/tmp0NOg7v:/var/spool/cwl:rw \
    --volume=/home/ubuntu/CGP-Somatic-Docker-original/datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/workingQriPMs:/tmp:rw \
    --workdir=/var/spool/cwl \
    --read-only=true \
    --user=1000 \
    --env=TMPDIR=/tmp \
    --env=HOME=/var/spool/cwl \
    quay.io/pancancer/pcawg-sanger-cgp-workflow:2.0.0-cwl1<redir.aspx?REF=4xVT1d2OiypnFeCFXosdCvpxbtXo4eyJ-2eROBgvFKOSjIFQXvjTCAFodHRwOi8vcXVheS5pby9wYW5jYW5jZXIvcGNhd2ctc2FuZ2VyLWNncC13b3JrZmxvdzoyLjAuMC1jd2wx> \
    python \
    /home/seqware/CGP-Somatic-Docker/scripts/run_seqware_workflow.py \
    --tumor \
    /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam \
    --normal \
    /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam \
    --refFrom \
    /var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz \
    --bbFrom \
    /var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz

The listing of the working directory (/var/spool/cwl) is as follows and does seem to include generated bas files:

ubuntu at sanger-retest:/tmp/tmp0NOg7v$ ls -alhtr
total 92K
-rw-r--r--  1 ubuntu ubuntu 1.6K Oct 14 22:07 workflow.ini
-rw-r--r--  1 ubuntu ubuntu   28 Oct 14 22:07 .Rprofile
drwxr-xr-x  3 ubuntu root   4.0K Oct 14 22:07 .seqware
drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 ngsCounts
lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam
lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam.bai -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai
lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam.bai -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai
drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 14 22:07 1
drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 genotype
drwxr-xr-x  8 ubuntu ubuntu 4.0K Oct 14 22:19 reference_files
drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:19 genotype_b02b4bba-6e66-44fb-a48f-38c309aaaac5
-rw-r--r--  1 ubuntu ubuntu 2.4K Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz
-rw-r--r--  1 ubuntu ubuntu   33 Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz.md5
-rw-r--r--  1 ubuntu ubuntu 1.5K Oct 14 22:58 fdcb1bd7cffca69d15383ca9566c58e0.bam.bas
-rw-r--r--  1 ubuntu ubuntu 2.3K Oct 14 23:17 7875b5196f6b8b52847f99bf370aada0.bam.bas
-rw-r--r--  1 ubuntu ubuntu   33 Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz.md5
-rw-r--r--  1 ubuntu ubuntu 2.4K Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz
drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 15 10:02 timings
drwxr-xr-x  5 ubuntu ubuntu 4.0K Oct 15 10:02 0
drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 15 10:06 bbCounts
drwx------ 11 ubuntu ubuntu 4.0K Oct 15 20:28 .
drwxrwxrwt 21 root   root   4.0K Oct 15 20:29 ..

The full output of the failing script is:

Errors from command: /usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz

Unknown sort order field: unknown
Collated 500000 readpairs (in 6 sec.)
[V] 1   34.4825MB/s     133279
Thread Worker 1: started
Thread 1 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
Collated 500000 readpairs (in 4 sec.)
[V] 2   39.9836MB/s     154626
Thread Worker 2: started
Thread 2 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
Collated 500000 readpairs (in 4 sec.)
Thread Worker 3: started
Thread 3 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03'
[V] 3   42.4188MB/s     164102
Collated 500000 readpairs (in 4 sec.)
Thread Worker 4: started
Thread 4 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
[V] 4   43.7799MB/s     169368
Collated 500000 readpairs (in 4 sec.)
An error occurred while running:
        /opt/wtsi-cgp/bin/bamcollate2 outputformat=sam colsbs=268435456 collate=1 classes=F,F2 exclude=DUP,SECONDARY,QCFAIL,SUPPLEMENTARY T=/var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c/tmp1kNw/collate_tmp filename=/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
ERROR: Converter thread error: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''

Perl exited with active threads:
        0 running and unjoined
        3 finished and unjoined
        0 running and detached
Thread 2 terminated abnormally: main=HASH(0x50044b0) at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 115.
Thread error: "/usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz" unexpectedly returned exit value 29 at (eval 410) line 13 thread 2.
 at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 190

Command exited with non-zero status 25
10.23user 8.79system 0:32.33elapsed 58%CPU (0avgtext+0avgdata 10819936maxresident)k
1184inputs+8552outputs (2major+711948minor)pagefaults 0swaps

Please let me know if any of the files on that host would be useful to debug this.



________________________________
From: mikisvaz at gmail.com<redir.aspx?REF=HLi2gsYnkByZIrxw9tkgQ3smNIdi5933-xaaJSjcikiSjIFQXvjTCAFtYWlsdG86bWlraXN2YXpAZ21haWwuY29t> [mikisvaz at gmail.com<redir.aspx?REF=HLi2gsYnkByZIrxw9tkgQ3smNIdi5933-xaaJSjcikiSjIFQXvjTCAFtYWlsdG86bWlraXN2YXpAZ21haWwuY29t>] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es<redir.aspx?REF=82FKQEdg1KYeV7fUIdfKnUibR7K5SoE50-vpnDSw3VqSjIFQXvjTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>]
Sent: October 15, 2016 2:52 AM
To: Denis Yuen
Cc: Adam Struck; Keiran Raine; docktesters at lists.icgc.org<redir.aspx?REF=kid5T9Srz1MPcWdg34ViTlJk22Q3G-C_70CPWVlxSX2SjIFQXvjTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Just to clarify Denis, the BAS file was not present in the download of the donor data, while it was present in the download of the test data. That is as much as I observed, and this matched Keiran comment that a missing BAS file was consistent with the pindel error.I have no idea of what the workflow was doing so as far as I know the BAS could have been created correctly and the error was something else.

Best regards

On Sat, Oct 15, 2016 at 12:20 AM, Denis Yuen <Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>> wrote:
Hi,

Adam, to summarise:
My observations seem to match yours, the bas file and input bams are generated inside the Docker container with the test data. However, Miguel has observed that something else seems to be happening with DO50311 that looks like the bas file being missing. I'm currently running that donor to see if I can extract more information and determine what is occurring.


________________________________
From: Adam Struck [strucka at ohsu.edu<UrlBlockedError.aspx>]
Sent: October 14, 2016 6:10 PM
To: Denis Yuen; Keiran Raine

Cc: docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi Denis,

Sorry, to chime in late.  The bas file and input BAMs should be getting colocalized already (see below). Where are these files ending up when you run the workflow?

Inputs are symlinked to the OUTDIR.
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L1035-L1039<UrlBlockedError.aspx>

Bas files are written to OUTDIR
https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<UrlBlockedError.aspx>

I have now run 25 donors worth of data (from PRAD-UK) through this workflow using the WDL descriptor and the cromwell engine on the CCC platform without an issue.

-Adam

From: <docktesters-bounces+strucka=ohsu.edu at lists.icgc.org<UrlBlockedError.aspx>> on behalf of Denis Yuen <Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>>
Date: Friday, October 14, 2016 at 2:55 PM
To: Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>>
Cc: "docktesters at lists.icgc.org<UrlBlockedError.aspx>" <docktesters at lists.icgc.org<UrlBlockedError.aspx>>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference

Hi,

Just as a heads-up for the end-of-week in this thread.

> RUN cpanm --mirror http://cpan.metacpan.org<UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

This got me on the right track, I actually needed the following syntax

RUN cpanm --mirror https://cpan.metacpan.org<UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \

     rm -rf ~/.cpanm



However, it looks like making the suggested change breaks the workflow when attempting to run with the test data. In short, the bas file is definitely being generated inside the Docker container. Moving it to the suggested location breaks the workflow later.

I'm currently attempting to run the donor DO50311 to see if I can get more insight into what is going on.
________________________________
From: Keiran Raine [kr2 at sanger.ac.uk<UrlBlockedError.aspx>]
Sent: October 12, 2016 2:09 PM
To: Denis Yuen
Cc: docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

You've hit an issue that only has occurred in the last few weeks for us also.

BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.

The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:

RUN cpanm --mirror http://cpan.metacpan.org<UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
     rm -rf ~/.cpanm

to

RUN cpanm --mirror http://cpan.metacpan.org<UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
     rm -rf ~/.cpanm

Thankfully something I could identify immediately.

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>> wrote:

Hi,

Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
I'm attaching the build log from the Dockerfile and the log from inside the container.


________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx>] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>]
Sent: October 12, 2016 10:59 AM
To: Keiran Raine
Cc: docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

While that would have been a good explanation, unfortunately, it doesn't seem to be the case.
In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl<UrlBlockedError.aspx> ) , the bam files are described like

inputs:

  tumor:

    type: File

    inputBinding:

      position: 1

      prefix: --tumor

    secondaryFiles:

    - .bai



  refFrom:

    type: File

    inputBinding:

      position: 3

      prefix: --refFrom

  bbFrom:

    type: File

    inputBinding:

      position: 4

      prefix: --bbFrom

  normal:

    type: File

    inputBinding:

      position: 2

      prefix: --normal

    secondaryFiles:

    - .bai


The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime.

________________________________
From: Keiran Raine [kr2 at sanger.ac.uk<UrlBlockedError.aspx>]
Sent: October 12, 2016 10:49 AM
To: Denis Yuen
Cc: Miguel Vazquez; docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi Denis,

I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca<UrlBlockedError.aspx>> wrote:

Hi,
I can make the modification, I'll run it through the test data and that should finish in roughly a day.
In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?

________________________________
From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org<UrlBlockedError.aspx>] on behalf of Keiran Raine [kr2 at sanger.ac.uk<UrlBlockedError.aspx>]
Sent: October 12, 2016 6:16 AM
To: Miguel Vazquez
Cc: docktesters at lists.icgc.org<UrlBlockedError.aspx>
Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

[The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
Hi Keiran,

Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative?

Miguel


On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
In the original version we didn't do this step, if we have write access it can be made to do that

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Hi Keiran,
If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
Would it not be better if it read

private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);



File f = new File(sampleBam);



thisJob.getCommand()



.addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")



.addArgument(installBase)



.addArgument("bam_stats")



.addArgument("-i " + sampleBam)



.addArgument("-o " + sampleBam + ".bas")



;



return thisJob;


}

Best
Miguel

On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:
Relevant section of code:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780<UrlBlockedError.aspx>

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk<UrlBlockedError.aspx>> wrote:

Hi,

There is a step generating the BAS files:

[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
[2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh

But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.

This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.

Hope this is easier to solve now,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk<UrlBlockedError.aspx>
Tel:+44 (0)1223 834244 Ext: 4983<tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
Office: H104

On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

Keiran,
Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
Best
Miguel

On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es<UrlBlockedError.aspx>> wrote:

4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.


I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check.
Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
Best
Miguel




-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.



-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
<build.log><outer.build.log>


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.

_______________________________________________
docktesters mailing list
docktesters at lists.icgc.org<UrlBlockedError.aspx>
https://lists.icgc.org/mailman/listinfo/docktesters<UrlBlockedError.aspx>


-- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161019/0331f280/attachment-0001.html>

From kr2 at sanger.ac.uk  Thu Oct 20 04:04:18 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Thu, 20 Oct 2016 09:04:18 +0100
Subject: [DOCKTESTERS] Sanger symlinked input file issue
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A19FA@exmb2.ad.oicr.on.ca>
References: <27512884B2D81B41AAB7BB266248F240C09A19FA@exmb2.ad.oicr.on.ca>
Message-ID: <37D04046-ABED-4687-B07A-0DE0845B34BA@sanger.ac.uk>

Hi Denis,

I was afraid of this, but I thought it had been fixed before the release in the docker:

https://github.com/cancerit/cgpPindel/commit/13dea0d2546f932d5c521e5aa612069d2b6226ba <https://github.com/cancerit/cgpPindel/commit/13dea0d2546f932d5c521e5aa612069d2b6226ba>

Unfortunately you can't cleanly upgrade to the release with that as it switched from the legacy Bio::DB::Sam to Bio::DB::HTS which changes the whole stack of tools.

I'll try to create a hotfix pulling that change back in time add a release for it (will have to think about this as hubflow doesn't support that).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 19 Oct 2016, at 21:36, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:
> 
> Hi,
> 
> FYI, breaking this out into a thread so hopefully this renders better in threaded email clients. 
> 
> Keiran, I took a look at running that /usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl command while pointing it at the symlinked version in /var/spool/cwl and surprisingly it works (or at least executes well past the displayed error). 
> 
> Unfortunately, this command is generated and it doesn't seem to be part of the CGP-Somatic-Docker <https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Dockerhttp://> codebase. 
> Basically, the SeqWare code that is in the that repo encodes this command (note that it refers to the version in /var/spool/cwl)
> 
> seqware at 83bd876f1b5d:/datastore/oozie-76d2e11f-9e92-44aa-841e-a7ddf70a4aab/generated-scripts$ cat s58_cgpPindel_input_70.sh
> #!/usr/bin/env bash
> set -o errexit
> set -o pipefail
> 
> export SEQWARE_SETTINGS=/var/spool/cwl/.seqware/settings
> cd /datastore/oozie-76d2e11f-9e92-44aa-841e-a7ddf70a4aab
> /usr/bin/time /usr/bin/time --format="Wall_s %e\nUser_s %U\nSystem_s %S\nMax_kb %M" --output=/var/spool/cwl/timings/0_cgpPindel_input_2 /home/seqware/CGP-Somatic-Docker/target/Workflow_Bundle_CgpSomaticCore_0.0.0_SeqWare_1.1.1/Workflow_Bundle_CgpSomaticCore/0.0.0/bin/wrapper.sh /opt/wtsi-cgp pindel.pl -p input -r /var/spool/cwl/reference_files/genome.fa -e MT,GL%,hs37d5,NC_007605 -st WGS -as GRCh37 -sp human -s /var/spool/cwl/reference_files/pindel/simpleRepeats.bed.gz -f /var/spool/cwl/reference_files/pindel/genomicRules.lst -g /var/spool/cwl/reference_files/pindel/human.GRCh37.indelCoding.bed.gz -u /var/spool/cwl/reference_files/pindel/pindel_np.gff3.gz -sf /var/spool/cwl/reference_files/pindel/softRules.lst -b /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz -o /var/spool/cwl/0/pindel -t /var/spool/cwl/7875b5196f6b8b52847f99bf370aada0.bam -n /var/spool/cwl/fdcb1bd7cffca69d15383ca9566c58e0.bam -i 2 -c 4
> 
> I think /opt/wtsi-cgp pindel.pl must then be generating the failing command (using  /opt/wtsi-cgp/bin/pindel_input_gen.pl  ) that I listed below with the original symlinked location. 
> I believe that the culprit is this section of pindel.pl which must be tracing the input back to the original target of the symlink and using that instead. 
> 
>   # make all things that appear to be paths absolute
>   for (keys %opts) {
>     $opts{$_} = abs_path($opts{$_}) if(defined $opts{$_} && -e $opts{$_});
>   }
> 
> Not entirely sure why this affects this particular donor, but that's what I've found so far. Should we attempt to modify pindel or is there a configuration setting we can take advantage of? 
> 
> 
> 
> From: Keiran Raine [kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>]
> Sent: October 17, 2016 4:25 AM
> To: Denis Yuen
> Cc: Miguel Vazquez; Adam Struck; docktesters at lists.icgc.org <mailto:docktesters at lists.icgc.org>
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi Denis,
> 
> The commands executed by the Pindel step appear to be being handed the original BAM file location rather (/var/lib/cwl) than the symlinks in the output area (/var/spool/cwl).  This would be the problem.
> 
> All the jobs that execute after the BAS generation should use the symlinked BAMs in the output area (although I think it's only important for pindel and brass).
> 
> Regards,
> 
> Keiran Raine
> Principal Bioinformatician
> Cancer Genome Project
> Wellcome Trust Sanger Institute
> 
> kr2 at sanger.ac.uk <x-msg://6/redir.aspx?REF=4zfyWFME5zuNg3Iu2duWBTIs04TZffesqfdqwRC7VeM4Kn9QXvjTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
> Tel:+44 (0)1223 834244 Ext: 4983
> Office: H104
> 
>> On 15 Oct 2016, at 22:10, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://6/redir.aspx?REF=EEPuTl7_Q12Px7_fSgo92oc2O0HCcrAbJ6FakT0TcB04Kn9QXvjTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:
>> 
>> Hi,
>> 
>> Agreed, to sum up:
>> 
>> 1) The donor test set includes bas files. The real donor sets do not. 
>> 2) That said, the way the CWL file is written, regardless of whether a bas file is provided in the test set, they don't actually make it into the docker container. Instead, they get generated inside the container while it is running.
>> 3) The pindel step does indeed fail in DO50311 on a host that successfully ran the test data. 
>> 
>> Keiran, some additional info for debugging.
>> 
>> The CWL file results in this docker invocation:
>> 
>> [job temp8674499429956656923.cwl] /tmp/tmp0NOg7v$ docker \
>>     run \
>>     -i \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam.bai:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/ab975a04-937f-40fc-b3e5-40b41c2295fc/GRCh37d5_CGP_refBundle.tar.gz:/var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/d3ae586e-1251-470b-bbf8-f498e5895312/GRCh37d5_battenberg.tar.gz:/var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz:ro \
>>     --volume=/tmp/tmp0NOg7v:/var/spool/cwl:rw \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/workingQriPMs:/tmp:rw \
>>     --workdir=/var/spool/cwl \
>>     --read-only=true \
>>     --user=1000 \
>>     --env=TMPDIR=/tmp \
>>     --env=HOME=/var/spool/cwl \
>>     quay.io/pancancer/pcawg-sanger-cgp-workflow:2.0.0-cwl1 <x-msg://6/redir.aspx?REF=4xVT1d2OiypnFeCFXosdCvpxbtXo4eyJ-2eROBgvFKOSjIFQXvjTCAFodHRwOi8vcXVheS5pby9wYW5jYW5jZXIvcGNhd2ctc2FuZ2VyLWNncC13b3JrZmxvdzoyLjAuMC1jd2wx> \
>>     python \
>>     /home/seqware/CGP-Somatic-Docker/scripts/run_seqware_workflow.py \
>>     --tumor \
>>     /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam \
>>     --normal \
>>     /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam \
>>     --refFrom \
>>     /var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz \
>>     --bbFrom \
>>     /var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz
>> 
>> The listing of the working directory (/var/spool/cwl) is as follows and does seem to include generated bas files:
>> 
>> ubuntu at sanger-retest:/tmp/tmp0NOg7v$ ls -alhtr
>> total 92K
>> -rw-r--r--  1 ubuntu ubuntu 1.6K Oct 14 22:07 workflow.ini
>> -rw-r--r--  1 ubuntu ubuntu   28 Oct 14 22:07 .Rprofile
>> drwxr-xr-x  3 ubuntu root   4.0K Oct 14 22:07 .seqware
>> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 ngsCounts
>> lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam
>> lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam.bai -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai
>> lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
>> lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam.bai -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai
>> drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 14 22:07 1
>> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 genotype
>> drwxr-xr-x  8 ubuntu ubuntu 4.0K Oct 14 22:19 reference_files
>> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:19 genotype_b02b4bba-6e66-44fb-a48f-38c309aaaac5
>> -rw-r--r--  1 ubuntu ubuntu 2.4K Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz
>> -rw-r--r--  1 ubuntu ubuntu   33 Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz.md5
>> -rw-r--r--  1 ubuntu ubuntu 1.5K Oct 14 22:58 fdcb1bd7cffca69d15383ca9566c58e0.bam.bas
>> -rw-r--r--  1 ubuntu ubuntu 2.3K Oct 14 23:17 7875b5196f6b8b52847f99bf370aada0.bam.bas
>> -rw-r--r--  1 ubuntu ubuntu   33 Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz.md5
>> -rw-r--r--  1 ubuntu ubuntu 2.4K Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz
>> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 15 10:02 timings
>> drwxr-xr-x  5 ubuntu ubuntu 4.0K Oct 15 10:02 0
>> drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 15 10:06 bbCounts
>> drwx------ 11 ubuntu ubuntu 4.0K Oct 15 20:28 .
>> drwxrwxrwt 21 root   root   4.0K Oct 15 20:29 ..
>> 
>> The full output of the failing script is:
>> 
>> Errors from command: /usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz
>> 
>> Unknown sort order field: unknown
>> Collated 500000 readpairs (in 6 sec.)
>> [V] 1   34.4825MB/s     133279
>> Thread Worker 1: started
>> Thread 1 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
>> Collated 500000 readpairs (in 4 sec.)
>> [V] 2   39.9836MB/s     154626
>> Thread Worker 2: started
>> Thread 2 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
>> Collated 500000 readpairs (in 4 sec.)
>> Thread Worker 3: started
>> Thread 3 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03'
>> [V] 3   42.4188MB/s     164102
>> Collated 500000 readpairs (in 4 sec.)
>> Thread Worker 4: started
>> Thread 4 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
>> [V] 4   43.7799MB/s     169368
>> Collated 500000 readpairs (in 4 sec.)
>> An error occurred while running:
>>         /opt/wtsi-cgp/bin/bamcollate2 outputformat=sam colsbs=268435456 collate=1 classes=F,F2 exclude=DUP,SECONDARY,QCFAIL,SUPPLEMENTARY T=/var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c/tmp1kNw/collate_tmp filename=/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
>> ERROR: Converter thread error: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
>> 
>> Perl exited with active threads:
>>         0 running and unjoined
>>         3 finished and unjoined
>>         0 running and detached
>> Thread 2 terminated abnormally: main=HASH(0x50044b0) at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 115.
>> Thread error: "/usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz" unexpectedly returned exit value 29 at (eval 410) line 13 thread 2.
>>  at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 190
>> 
>> Command exited with non-zero status 25
>> 10.23user 8.79system 0:32.33elapsed 58%CPU (0avgtext+0avgdata 10819936maxresident)k
>> 1184inputs+8552outputs (2major+711948minor)pagefaults 0swaps 
>> 
>> Please let me know if any of the files on that host would be useful to debug this.
>> 
>> 
>> From: mikisvaz at gmail.com <x-msg://6/redir.aspx?REF=HLi2gsYnkByZIrxw9tkgQ3smNIdi5933-xaaJSjcikiSjIFQXvjTCAFtYWlsdG86bWlraXN2YXpAZ21haWwuY29t> [mikisvaz at gmail.com <x-msg://6/redir.aspx?REF=HLi2gsYnkByZIrxw9tkgQ3smNIdi5933-xaaJSjcikiSjIFQXvjTCAFtYWlsdG86bWlraXN2YXpAZ21haWwuY29t>] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es <x-msg://6/redir.aspx?REF=82FKQEdg1KYeV7fUIdfKnUibR7K5SoE50-vpnDSw3VqSjIFQXvjTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>]
>> Sent: October 15, 2016 2:52 AM
>> To: Denis Yuen
>> Cc: Adam Struck; Keiran Raine; docktesters at lists.icgc.org <x-msg://6/redir.aspx?REF=kid5T9Srz1MPcWdg34ViTlJk22Q3G-C_70CPWVlxSX2SjIFQXvjTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Just to clarify Denis, the BAS file was not present in the download of the donor data, while it was present in the download of the test data. That is as much as I observed, and this matched Keiran comment that a missing BAS file was consistent with the pindel error.I have no idea of what the workflow was doing so as far as I know the BAS could have been created correctly and the error was something else. 
>> 
>> Best regards
>> 
>> On Sat, Oct 15, 2016 at 12:20 AM, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://6/UrlBlockedError.aspx>> wrote:
>> Hi,
>> 
>> Adam, to summarise:
>> My observations seem to match yours, the bas file and input bams are generated inside the Docker container with the test data. However, Miguel has observed that something else seems to be happening with DO50311 that looks like the bas file being missing. I'm currently running that donor to see if I can extract more information and determine what is occurring. 
>> 
>> 
>> From: Adam Struck [strucka at ohsu.edu <x-msg://6/UrlBlockedError.aspx>]
>> Sent: October 14, 2016 6:10 PM
>> To: Denis Yuen; Keiran Raine
>> 
>> Cc: docktesters at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi Denis,
>>  
>> Sorry, to chime in late.  The bas file and input BAMs should be getting colocalized already (see below). Where are these files ending up when you run the workflow?
>>  
>> Inputs are symlinked to the OUTDIR.
>> https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L1035-L1039 <x-msg://6/UrlBlockedError.aspx>
>>  
>> Bas files are written to OUTDIR
>> https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <x-msg://6/UrlBlockedError.aspx>
>>  
>> I have now run 25 donors worth of data (from PRAD-UK) through this workflow using the WDL descriptor and the cromwell engine on the CCC platform without an issue.
>>  
>> -Adam 
>>  
>> From: <docktesters-bounces+strucka=ohsu.edu at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>> on behalf of Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://6/UrlBlockedError.aspx>>
>> Date: Friday, October 14, 2016 at 2:55 PM
>> To: Keiran Raine <kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>>
>> Cc: "docktesters at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>" <docktesters at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>>  
>> Hi,
>> 
>> Just as a heads-up for the end-of-week in this thread. 
>> 
>> > RUN cpanm --mirror http://cpan.metacpan.org <x-msg://6/UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
>>      rm -rf ~/.cpanm
>> 
>> This got me on the right track, I actually needed the following syntax
>> 
>> RUN cpanm --mirror https://cpan.metacpan.org <x-msg://6/UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \
>>      rm -rf ~/.cpanm
>> 
>> However, it looks like making the suggested change breaks the workflow when attempting to run with the test data. In short, the bas file is definitely being generated inside the Docker container. Moving it to the suggested location breaks the workflow later. 
>> 
>> I'm currently attempting to run the donor DO50311 to see if I can get more insight into what is going on.
>> 
>> From: Keiran Raine [kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>]
>> Sent: October 12, 2016 2:09 PM
>> To: Denis Yuen
>> Cc: docktesters at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi Denis,
>>  
>> You've hit an issue that only has occurred in the last few weeks for us also.
>>  
>> BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.
>>  
>> The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:
>> 
>> RUN cpanm --mirror http://cpan.metacpan.org <x-msg://6/UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
>>      rm -rf ~/.cpanm
>>  
>> to
>>  
>> RUN cpanm --mirror http://cpan.metacpan.org <x-msg://6/UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
>>      rm -rf ~/.cpanm
>>  
>> Thankfully something I could identify immediately.
>>  
>> Regards,
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://6/UrlBlockedError.aspx>> wrote:
>>  
>> Hi, 
>> 
>> Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
>> Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
>> I'm attaching the build log from the Dockerfile and the log from inside the container.
>> 
>> 
>>  
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://6/UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca <x-msg://6/UrlBlockedError.aspx>]
>> Sent: October 12, 2016 10:59 AM
>> To: Keiran Raine
>> Cc: docktesters at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi,
>> 
>> While that would have been a good explanation, unfortunately, it doesn't seem to be the case. 
>> In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl <x-msg://6/UrlBlockedError.aspx> ) , the bam files are described like 
>> 
>> inputs:
>>   tumor:
>>     type: File
>>     inputBinding:
>>       position: 1
>>       prefix: --tumor
>>     secondaryFiles:
>>     - .bai
>>  
>>   refFrom:
>>     type: File
>>     inputBinding:
>>       position: 3
>>       prefix: --refFrom
>>   bbFrom:
>>     type: File
>>     inputBinding:
>>       position: 4
>>       prefix: --bbFrom
>>   normal:
>>     type: File
>>     inputBinding:
>>       position: 2
>>       prefix: --normal
>>     secondaryFiles:
>>     - .bai
>> The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime. 
>>  
>> From: Keiran Raine [kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>]
>> Sent: October 12, 2016 10:49 AM
>> To: Denis Yuen
>> Cc: Miguel Vazquez; docktesters at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi Denis, 
>>  
>> I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://6/UrlBlockedError.aspx>> wrote:
>>  
>> Hi,
>> I can make the modification, I'll run it through the test data and that should finish in roughly a day. 
>> In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?
>> 
>>  
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://6/UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>] on behalf of Keiran Raine [kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>]
>> Sent: October 12, 2016 6:16 AM
>> To: Miguel Vazquez
>> Cc: docktesters at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi, 
>>  
>> This is assuming that it is possible to write to the location the BAM are in.
>>  
>> I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).
>>  
>> Regards,
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://6/UrlBlockedError.aspx>> wrote:
>>  
>> [The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
>> 
>> Hi Keiran,
>> 
>> Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative? 
>> 
>>  
>> Miguel
>> 
>> 
>>  
>> On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>> wrote:
>> In the original version we didn't do this step, if we have write access it can be made to do that
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://6/UrlBlockedError.aspx>> wrote:
>>  
>> Hi Keiran,
>> 
>> If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
>> 
>> Would it not be better if it read
>> 
>> private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) { 
>> Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
>>  
>> File f = new File(sampleBam);
>>  
>> thisJob.getCommand()
>>  
>> .addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
>>  
>> .addArgument(installBase)
>>  
>> .addArgument("bam_stats")
>>  
>> .addArgument("-i " + sampleBam)
>>  
>> .addArgument("-o " + sampleBam + ".bas")
>>  
>> ;
>>  
>> return thisJob;
>> }
>>  
>> Best
>> 
>> Miguel
>>  
>> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>> wrote:
>> Relevant section of code: 
>>  
>> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <x-msg://6/UrlBlockedError.aspx>
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>> wrote:
>>  
>> Hi, 
>>  
>> There is a step generating the BAS files:
>>  
>> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
>> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh
>>  
>> But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.
>>  
>> This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.
>>  
>> Hope this is easier to solve now,
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://6/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://6/UrlBlockedError.aspx>> wrote:
>>  
>> Keiran,
>> 
>> Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
>> 
>> Best
>> 
>> Miguel
>>  
>> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://6/UrlBlockedError.aspx>> wrote:
>>  
>> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.
>>  
>>  
>> I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check. 
>> 
>> Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
>> 
>> Best
>> 
>> Miguel
>>  
>>  
>>  
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>>  
>> 
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>>  
>>  
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
>>  
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>> <build.log><outer.build.log>
>>  
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
>> 
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org <x-msg://6/UrlBlockedError.aspx>
>> https://lists.icgc.org/mailman/listinfo/docktesters <x-msg://6/UrlBlockedError.aspx>
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161020/a3168bb6/attachment-0001.html>

From kr2 at sanger.ac.uk  Thu Oct 20 04:28:12 2016
From: kr2 at sanger.ac.uk (Keiran Raine)
Date: Thu, 20 Oct 2016 09:28:12 +0100
Subject: [DOCKTESTERS] Sanger symlinked input file issue
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A19FA@exmb2.ad.oicr.on.ca>
References: <27512884B2D81B41AAB7BB266248F240C09A19FA@exmb2.ad.oicr.on.ca>
Message-ID: <DF1B9B0F-1659-4E7C-B049-56E52EE387CE@sanger.ac.uk>

Hi Denis,

Less painful than I thought.

Just update line 163 of the dockerfile to pull this version:

https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockerfile <https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockerfile>

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

kr2 at sanger.ac.uk
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

> On 19 Oct 2016, at 21:36, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:
> 
> Hi,
> 
> FYI, breaking this out into a thread so hopefully this renders better in threaded email clients. 
> 
> Keiran, I took a look at running that /usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl command while pointing it at the symlinked version in /var/spool/cwl and surprisingly it works (or at least executes well past the displayed error). 
> 
> Unfortunately, this command is generated and it doesn't seem to be part of the CGP-Somatic-Docker <https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Dockerhttp://> codebase. 
> Basically, the SeqWare code that is in the that repo encodes this command (note that it refers to the version in /var/spool/cwl)
> 
> seqware at 83bd876f1b5d:/datastore/oozie-76d2e11f-9e92-44aa-841e-a7ddf70a4aab/generated-scripts$ cat s58_cgpPindel_input_70.sh
> #!/usr/bin/env bash
> set -o errexit
> set -o pipefail
> 
> export SEQWARE_SETTINGS=/var/spool/cwl/.seqware/settings
> cd /datastore/oozie-76d2e11f-9e92-44aa-841e-a7ddf70a4aab
> /usr/bin/time /usr/bin/time --format="Wall_s %e\nUser_s %U\nSystem_s %S\nMax_kb %M" --output=/var/spool/cwl/timings/0_cgpPindel_input_2 /home/seqware/CGP-Somatic-Docker/target/Workflow_Bundle_CgpSomaticCore_0.0.0_SeqWare_1.1.1/Workflow_Bundle_CgpSomaticCore/0.0.0/bin/wrapper.sh /opt/wtsi-cgp pindel.pl -p input -r /var/spool/cwl/reference_files/genome.fa -e MT,GL%,hs37d5,NC_007605 -st WGS -as GRCh37 -sp human -s /var/spool/cwl/reference_files/pindel/simpleRepeats.bed.gz -f /var/spool/cwl/reference_files/pindel/genomicRules.lst -g /var/spool/cwl/reference_files/pindel/human.GRCh37.indelCoding.bed.gz -u /var/spool/cwl/reference_files/pindel/pindel_np.gff3.gz -sf /var/spool/cwl/reference_files/pindel/softRules.lst -b /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz -o /var/spool/cwl/0/pindel -t /var/spool/cwl/7875b5196f6b8b52847f99bf370aada0.bam -n /var/spool/cwl/fdcb1bd7cffca69d15383ca9566c58e0.bam -i 2 -c 4
> 
> I think /opt/wtsi-cgp pindel.pl must then be generating the failing command (using  /opt/wtsi-cgp/bin/pindel_input_gen.pl  ) that I listed below with the original symlinked location. 
> I believe that the culprit is this section of pindel.pl which must be tracing the input back to the original target of the symlink and using that instead. 
> 
>   # make all things that appear to be paths absolute
>   for (keys %opts) {
>     $opts{$_} = abs_path($opts{$_}) if(defined $opts{$_} && -e $opts{$_});
>   }
> 
> Not entirely sure why this affects this particular donor, but that's what I've found so far. Should we attempt to modify pindel or is there a configuration setting we can take advantage of? 
> 
> 
> 
> From: Keiran Raine [kr2 at sanger.ac.uk <mailto:kr2 at sanger.ac.uk>]
> Sent: October 17, 2016 4:25 AM
> To: Denis Yuen
> Cc: Miguel Vazquez; Adam Struck; docktesters at lists.icgc.org <mailto:docktesters at lists.icgc.org>
> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
> 
> Hi Denis,
> 
> The commands executed by the Pindel step appear to be being handed the original BAM file location rather (/var/lib/cwl) than the symlinks in the output area (/var/spool/cwl).  This would be the problem.
> 
> All the jobs that execute after the BAS generation should use the symlinked BAMs in the output area (although I think it's only important for pindel and brass).
> 
> Regards,
> 
> Keiran Raine
> Principal Bioinformatician
> Cancer Genome Project
> Wellcome Trust Sanger Institute
> 
> kr2 at sanger.ac.uk <x-msg://7/redir.aspx?REF=4zfyWFME5zuNg3Iu2duWBTIs04TZffesqfdqwRC7VeM4Kn9QXvjTCAFtYWlsdG86a3IyQHNhbmdlci5hYy51aw..>
> Tel:+44 (0)1223 834244 Ext: 4983
> Office: H104
> 
>> On 15 Oct 2016, at 22:10, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://7/redir.aspx?REF=EEPuTl7_Q12Px7_fSgo92oc2O0HCcrAbJ6FakT0TcB04Kn9QXvjTCAFtYWlsdG86RGVuaXMuWXVlbkBvaWNyLm9uLmNh>> wrote:
>> 
>> Hi,
>> 
>> Agreed, to sum up:
>> 
>> 1) The donor test set includes bas files. The real donor sets do not. 
>> 2) That said, the way the CWL file is written, regardless of whether a bas file is provided in the test set, they don't actually make it into the docker container. Instead, they get generated inside the container while it is running.
>> 3) The pindel step does indeed fail in DO50311 on a host that successfully ran the test data. 
>> 
>> Keiran, some additional info for debugging.
>> 
>> The CWL file results in this docker invocation:
>> 
>> [job temp8674499429956656923.cwl] /tmp/tmp0NOg7v$ docker \
>>     run \
>>     -i \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/8bcaff90-24fb-4d61-8898-800a95dce3e0/7875b5196f6b8b52847f99bf370aada0.bam.bai:/var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/ab975a04-937f-40fc-b3e5-40b41c2295fc/GRCh37d5_CGP_refBundle.tar.gz:/var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/70fb518e-42c8-4fdd-b473-d3b380aafbdb/fdcb1bd7cffca69d15383ca9566c58e0.bam:/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam:ro \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/./datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/inputs/d3ae586e-1251-470b-bbf8-f498e5895312/GRCh37d5_battenberg.tar.gz:/var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz:ro \
>>     --volume=/tmp/tmp0NOg7v:/var/spool/cwl:rw \
>>     --volume=/home/ubuntu/CGP-Somatic-Docker-original/datastore/launcher-ba5b9c2f-0b64-473b-8c9f-99e1153ad0de/workingQriPMs:/tmp:rw \
>>     --workdir=/var/spool/cwl \
>>     --read-only=true \
>>     --user=1000 \
>>     --env=TMPDIR=/tmp \
>>     --env=HOME=/var/spool/cwl \
>>     quay.io/pancancer/pcawg-sanger-cgp-workflow:2.0.0-cwl1 <x-msg://7/redir.aspx?REF=4xVT1d2OiypnFeCFXosdCvpxbtXo4eyJ-2eROBgvFKOSjIFQXvjTCAFodHRwOi8vcXVheS5pby9wYW5jYW5jZXIvcGNhd2ctc2FuZ2VyLWNncC13b3JrZmxvdzoyLjAuMC1jd2wx> \
>>     python \
>>     /home/seqware/CGP-Somatic-Docker/scripts/run_seqware_workflow.py \
>>     --tumor \
>>     /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam \
>>     --normal \
>>     /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam \
>>     --refFrom \
>>     /var/lib/cwl/stg218c30fe-3a28-4c3a-9803-253754dae462/GRCh37d5_CGP_refBundle.tar.gz \
>>     --bbFrom \
>>     /var/lib/cwl/stg4e55e3b3-46aa-4c4b-b4d6-3f2749498168/GRCh37d5_battenberg.tar.gz
>> 
>> The listing of the working directory (/var/spool/cwl) is as follows and does seem to include generated bas files:
>> 
>> ubuntu at sanger-retest:/tmp/tmp0NOg7v$ ls -alhtr
>> total 92K
>> -rw-r--r--  1 ubuntu ubuntu 1.6K Oct 14 22:07 workflow.ini
>> -rw-r--r--  1 ubuntu ubuntu   28 Oct 14 22:07 .Rprofile
>> drwxr-xr-x  3 ubuntu root   4.0K Oct 14 22:07 .seqware
>> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 ngsCounts
>> lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam
>> lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam.bai -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam.bai
>> lrwxrwxrwx  1 ubuntu ubuntu   89 Oct 14 22:07 fdcb1bd7cffca69d15383ca9566c58e0.bam -> /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
>> lrwxrwxrwx  1 ubuntu ubuntu   93 Oct 14 22:07 7875b5196f6b8b52847f99bf370aada0.bam.bai -> /var/lib/cwl/stg2e1e9218-4ca7-4cbb-b474-dfdf6ac0b8a6/7875b5196f6b8b52847f99bf370aada0.bam.bai
>> drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 14 22:07 1
>> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:07 genotype
>> drwxr-xr-x  8 ubuntu ubuntu 4.0K Oct 14 22:19 reference_files
>> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 14 22:19 genotype_b02b4bba-6e66-44fb-a48f-38c309aaaac5
>> -rw-r--r--  1 ubuntu ubuntu 2.4K Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz
>> -rw-r--r--  1 ubuntu ubuntu   33 Oct 14 22:19 b02b4bba-6e66-44fb-a48f-38c309aaaac5.genotype.tar.gz.md5
>> -rw-r--r--  1 ubuntu ubuntu 1.5K Oct 14 22:58 fdcb1bd7cffca69d15383ca9566c58e0.bam.bas
>> -rw-r--r--  1 ubuntu ubuntu 2.3K Oct 14 23:17 7875b5196f6b8b52847f99bf370aada0.bam.bas
>> -rw-r--r--  1 ubuntu ubuntu   33 Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz.md5
>> -rw-r--r--  1 ubuntu ubuntu 2.4K Oct 15 08:23 b02b4bba-6e66-44fb-a48f-38c309aaaac5.csc_0-0-0.20161014.somatic.genotype.tar.gz
>> drwxr-xr-x  2 ubuntu ubuntu 4.0K Oct 15 10:02 timings
>> drwxr-xr-x  5 ubuntu ubuntu 4.0K Oct 15 10:02 0
>> drwxr-xr-x  3 ubuntu ubuntu 4.0K Oct 15 10:06 bbCounts
>> drwx------ 11 ubuntu ubuntu 4.0K Oct 15 20:28 .
>> drwxrwxrwt 21 root   root   4.0K Oct 15 20:29 ..
>> 
>> The full output of the failing script is:
>> 
>> Errors from command: /usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz
>> 
>> Unknown sort order field: unknown
>> Collated 500000 readpairs (in 6 sec.)
>> [V] 1   34.4825MB/s     133279
>> Thread Worker 1: started
>> Thread 1 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
>> Collated 500000 readpairs (in 4 sec.)
>> [V] 2   39.9836MB/s     154626
>> Thread Worker 2: started
>> Thread 2 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
>> Collated 500000 readpairs (in 4 sec.)
>> Thread Worker 3: started
>> Thread 3 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03'
>> [V] 3   42.4188MB/s     164102
>> Collated 500000 readpairs (in 4 sec.)
>> Thread Worker 4: started
>> Thread 4 terminated abnormally: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
>> [V] 4   43.7799MB/s     169368
>> Collated 500000 readpairs (in 4 sec.)
>> An error occurred while running:
>>         /opt/wtsi-cgp/bin/bamcollate2 outputformat=sam colsbs=268435456 collate=1 classes=F,F2 exclude=DUP,SECONDARY,QCFAIL,SUPPLEMENTARY T=/var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c/tmp1kNw/collate_tmp filename=/var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam
>> ERROR: Converter thread error: Failed to get insert size for readgroup: 'CRUK-CI:LP6005333-DNA_C03''
>> 
>> Perl exited with active threads:
>>         0 running and unjoined
>>         3 finished and unjoined
>>         0 running and detached
>> Thread 2 terminated abnormally: main=HASH(0x50044b0) at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 115.
>> Thread error: "/usr/bin/perl /opt/wtsi-cgp/bin/pindel_input_gen.pl -b /var/lib/cwl/stge94eb32c-dc0f-4523-a88c-d1e00a322537/fdcb1bd7cffca69d15383ca9566c58e0.bam -o /var/spool/cwl/0/pindel/tmpPindel/8c0354eb-6a3e-4a98-b41c-f8add599884c -t 4 -e /var/spool/cwl/reference_files/brass/ucscHiDepth_0.01_mrg1000_no_exon_coreChrs.bed.gz" unexpectedly returned exit value 29 at (eval 410) line 13 thread 2.
>>  at /opt/wtsi-cgp/lib/perl5/PCAP/Threaded.pm line 190
>> 
>> Command exited with non-zero status 25
>> 10.23user 8.79system 0:32.33elapsed 58%CPU (0avgtext+0avgdata 10819936maxresident)k
>> 1184inputs+8552outputs (2major+711948minor)pagefaults 0swaps 
>> 
>> Please let me know if any of the files on that host would be useful to debug this.
>> 
>> 
>> From: mikisvaz at gmail.com <x-msg://7/redir.aspx?REF=HLi2gsYnkByZIrxw9tkgQ3smNIdi5933-xaaJSjcikiSjIFQXvjTCAFtYWlsdG86bWlraXN2YXpAZ21haWwuY29t> [mikisvaz at gmail.com <x-msg://7/redir.aspx?REF=HLi2gsYnkByZIrxw9tkgQ3smNIdi5933-xaaJSjcikiSjIFQXvjTCAFtYWlsdG86bWlraXN2YXpAZ21haWwuY29t>] on behalf of Miguel Vazquez [miguel.vazquez at cnio.es <x-msg://7/redir.aspx?REF=82FKQEdg1KYeV7fUIdfKnUibR7K5SoE50-vpnDSw3VqSjIFQXvjTCAFtYWlsdG86bWlndWVsLnZhenF1ZXpAY25pby5lcw..>]
>> Sent: October 15, 2016 2:52 AM
>> To: Denis Yuen
>> Cc: Adam Struck; Keiran Raine; docktesters at lists.icgc.org <x-msg://7/redir.aspx?REF=kid5T9Srz1MPcWdg34ViTlJk22Q3G-C_70CPWVlxSX2SjIFQXvjTCAFtYWlsdG86ZG9ja3Rlc3RlcnNAbGlzdHMuaWNnYy5vcmc.>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Just to clarify Denis, the BAS file was not present in the download of the donor data, while it was present in the download of the test data. That is as much as I observed, and this matched Keiran comment that a missing BAS file was consistent with the pindel error.I have no idea of what the workflow was doing so as far as I know the BAS could have been created correctly and the error was something else. 
>> 
>> Best regards
>> 
>> On Sat, Oct 15, 2016 at 12:20 AM, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://7/UrlBlockedError.aspx>> wrote:
>> Hi,
>> 
>> Adam, to summarise:
>> My observations seem to match yours, the bas file and input bams are generated inside the Docker container with the test data. However, Miguel has observed that something else seems to be happening with DO50311 that looks like the bas file being missing. I'm currently running that donor to see if I can extract more information and determine what is occurring. 
>> 
>> 
>> From: Adam Struck [strucka at ohsu.edu <x-msg://7/UrlBlockedError.aspx>]
>> Sent: October 14, 2016 6:10 PM
>> To: Denis Yuen; Keiran Raine
>> 
>> Cc: docktesters at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi Denis,
>>  
>> Sorry, to chime in late.  The bas file and input BAMs should be getting colocalized already (see below). Where are these files ending up when you run the workflow?
>>  
>> Inputs are symlinked to the OUTDIR.
>> https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L1035-L1039 <x-msg://7/UrlBlockedError.aspx>
>>  
>> Bas files are written to OUTDIR
>> https://github.com/adamstruck/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <x-msg://7/UrlBlockedError.aspx>
>>  
>> I have now run 25 donors worth of data (from PRAD-UK) through this workflow using the WDL descriptor and the cromwell engine on the CCC platform without an issue.
>>  
>> -Adam 
>>  
>> From: <docktesters-bounces+strucka=ohsu.edu at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>> on behalf of Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://7/UrlBlockedError.aspx>>
>> Date: Friday, October 14, 2016 at 2:55 PM
>> To: Keiran Raine <kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>>
>> Cc: "docktesters at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>" <docktesters at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>>  
>> Hi,
>> 
>> Just as a heads-up for the end-of-week in this thread. 
>> 
>> > RUN cpanm --mirror http://cpan.metacpan.org <x-msg://7/UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
>>      rm -rf ~/.cpanm
>> 
>> This got me on the right track, I actually needed the following syntax
>> 
>> RUN cpanm --mirror https://cpan.metacpan.org <x-msg://7/UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install CJFIELDS/BioPerl-1.6.924.tar.gz Const::Fast Graph && \
>>      rm -rf ~/.cpanm
>> 
>> However, it looks like making the suggested change breaks the workflow when attempting to run with the test data. In short, the bas file is definitely being generated inside the Docker container. Moving it to the suggested location breaks the workflow later. 
>> 
>> I'm currently attempting to run the donor DO50311 to see if I can get more insight into what is going on.
>> 
>> From: Keiran Raine [kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>]
>> Sent: October 12, 2016 2:09 PM
>> To: Denis Yuen
>> Cc: docktesters at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi Denis,
>>  
>> You've hit an issue that only has occurred in the last few weeks for us also.
>>  
>> BioPerl released a new version (first in ~20 months) that split the repository moving a whole section into a different package.
>>  
>> The fix would be to force the first install of BioPerl to a specific version.  Modify line 25/26 of the Dockerfile from:
>> 
>> RUN cpanm --mirror http://cpan.metacpan.org <x-msg://7/UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version Const::Fast Graph && \
>>      rm -rf ~/.cpanm
>>  
>> to
>>  
>> RUN cpanm --mirror http://cpan.metacpan.org <x-msg://7/UrlBlockedError.aspx> -l $OPT File::ShareDir File::ShareDir::Install Bio::Root::Version at 1.006924 Const::Fast Graph && \
>>      rm -rf ~/.cpanm
>>  
>> Thankfully something I could identify immediately.
>>  
>> Regards,
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 12 Oct 2016, at 17:04, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://7/UrlBlockedError.aspx>> wrote:
>>  
>> Hi, 
>> 
>> Keiran, I'm having trouble rebuilding the Sanger docker container in what I think is an unrelated section.
>> Has anything changed about the build dependencies (for example, if there is a floating version that changed over time)?
>> I'm attaching the build log from the Dockerfile and the log from inside the container.
>> 
>> 
>>  
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://7/UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>] on behalf of Denis Yuen [Denis.Yuen at oicr.on.ca <x-msg://7/UrlBlockedError.aspx>]
>> Sent: October 12, 2016 10:59 AM
>> To: Keiran Raine
>> Cc: docktesters at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi,
>> 
>> While that would have been a good explanation, unfortunately, it doesn't seem to be the case. 
>> In the CWL file ( https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/Dockstore.cwl <x-msg://7/UrlBlockedError.aspx> ) , the bam files are described like 
>> 
>> inputs:
>>   tumor:
>>     type: File
>>     inputBinding:
>>       position: 1
>>       prefix: --tumor
>>     secondaryFiles:
>>     - .bai
>>  
>>   refFrom:
>>     type: File
>>     inputBinding:
>>       position: 3
>>       prefix: --refFrom
>>   bbFrom:
>>     type: File
>>     inputBinding:
>>       position: 4
>>       prefix: --bbFrom
>>   normal:
>>     type: File
>>     inputBinding:
>>       position: 2
>>       prefix: --normal
>>     secondaryFiles:
>>     - .bai
>> The type of File (as opposed to directory) means that while the bam and bai files are individually mounted into the docker container while it runs, the bas files never were. If Miguel has the "docker run" output from the run (should just be in the stdout of the run), we should be able to verify this by looking at what gets mounted into the container at runtime. 
>>  
>> From: Keiran Raine [kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>]
>> Sent: October 12, 2016 10:49 AM
>> To: Denis Yuen
>> Cc: Miguel Vazquez; docktesters at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi Denis, 
>>  
>> I expect when you unpack the the test data the BAS files exist in the archive in that area so the fact it runs the out of that step to a different location isn't detected.
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 12 Oct 2016, at 15:36, Denis Yuen <Denis.Yuen at oicr.on.ca <x-msg://7/UrlBlockedError.aspx>> wrote:
>>  
>> Hi,
>> I can make the modification, I'll run it through the test data and that should finish in roughly a day. 
>> In the meantime though, I am puzzled. Why would an issue like this affect a donor dataset, but not the test data?
>> 
>>  
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://7/UrlBlockedError.aspx> [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>] on behalf of Keiran Raine [kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>]
>> Sent: October 12, 2016 6:16 AM
>> To: Miguel Vazquez
>> Cc: docktesters at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>
>> Subject: Re: [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH teleconference
>> 
>> Hi, 
>>  
>> This is assuming that it is possible to write to the location the BAM are in.
>>  
>> I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).
>>  
>> Regards,
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 12 Oct 2016, at 10:37, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://7/UrlBlockedError.aspx>> wrote:
>>  
>> [The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
>> 
>> Hi Keiran,
>> 
>> Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative? 
>> 
>>  
>> Miguel
>> 
>> 
>>  
>> On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>> wrote:
>> In the original version we didn't do this step, if we have write access it can be made to do that
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 11 Oct 2016, at 13:49, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://7/UrlBlockedError.aspx>> wrote:
>>  
>> Hi Keiran,
>> 
>> If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
>> 
>> Would it not be better if it read
>> 
>> private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) { 
>> Job thisJob = prepTimedJob(tumourCount, "basFileGenerate", process, index);
>>  
>> File f = new File(sampleBam);
>>  
>> thisJob.getCommand()
>>  
>> .addArgument(getWorkflowBaseDir()+ "/bin/wrapper.sh")
>>  
>> .addArgument(installBase)
>>  
>> .addArgument("bam_stats")
>>  
>> .addArgument("-i " + sampleBam)
>>  
>> .addArgument("-o " + sampleBam + ".bas")
>>  
>> ;
>>  
>> return thisJob;
>> }
>>  
>> Best
>> 
>> Miguel
>>  
>> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine <kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>> wrote:
>> Relevant section of code: 
>>  
>> https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780 <x-msg://7/UrlBlockedError.aspx>
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 11 Oct 2016, at 13:40, Keiran Raine <kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>> wrote:
>>  
>> Hi, 
>>  
>> There is a step generating the BAS files:
>>  
>> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
>> [2016/10/10 07:28:37] |  Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh
>>  
>> But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.
>>  
>> This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.
>>  
>> Hope this is easier to solve now,
>> 
>> Keiran Raine
>> Principal Bioinformatician
>> Cancer Genome Project
>> Wellcome Trust Sanger Institute
>>  
>> kr2 at sanger.ac.uk <x-msg://7/UrlBlockedError.aspx>
>> Tel:+44 (0)1223 834244 Ext: 4983 <tel:%2B44%20%280%291223%20834244%20Ext%3A%204983>
>> Office: H104
>>  
>> On 11 Oct 2016, at 13:31, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://7/UrlBlockedError.aspx>> wrote:
>>  
>> Keiran,
>> 
>> Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
>> 
>> Best
>> 
>> Miguel
>>  
>> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez <miguel.vazquez at cnio.es <x-msg://7/UrlBlockedError.aspx>> wrote:
>>  
>> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.
>>  
>>  
>> I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check. 
>> 
>> Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
>> 
>> Best
>> 
>> Miguel
>>  
>>  
>>  
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>>  
>> 
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>>  
>>  
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
>>  
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
>> <build.log><outer.build.log>
>>  
>> 
>> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.
>> 
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org <x-msg://7/UrlBlockedError.aspx>
>> https://lists.icgc.org/mailman/listinfo/docktesters <x-msg://7/UrlBlockedError.aspx>
> 
> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE.




-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161020/c9182da9/attachment-0001.html>

From i.buchhalter at dkfz-heidelberg.de  Thu Oct 20 09:48:05 2016
From: i.buchhalter at dkfz-heidelberg.de (Ivo Buchhalter)
Date: Thu, 20 Oct 2016 15:48:05 +0200
Subject: [DOCKTESTERS] DKFZ bias filter docker
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A19D9@exmb2.ad.oicr.on.ca>
References: <8b96b9c2-d0a4-d8ea-b2ca-7dabfc3a785d@dkfz.de>
 <27512884B2D81B41AAB7BB266248F240C09A1875@exmb2.ad.oicr.on.ca>
 <95c07a22-98c6-8602-a6ce-f17ca178ec9b@dkfz.de>
 <27512884B2D81B41AAB7BB266248F240C09A19D9@exmb2.ad.oicr.on.ca>
Message-ID: <cba57c98-138e-88c7-5b4d-ec3d51c4890c@dkfz.de>

Hi Denis,

I just talked to Manuel. He told me that there is/was some architectural 
problem with the Docker I made. He and Johannes already fixed most of 
it. If it works out for you we will provide you with a CWL by the end of 
next week. I suppose it is better not to work on it in parallel and I am 
sure you have enough on your plate.

I hope that works for you!

Best,
Ivo


On 10/19/2016 09:33 PM, Denis Yuen wrote:
> Hi,
>
> Thanks, this definitely helps to make it more clear.
> I think this will give us enough information for us to start working on a CWL descriptor or to assist one being written.
>
> ________________________________________
> From: Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
> Sent: October 19, 2016 2:19 AM
> To: Denis Yuen; Ivo Buchhalter; docktesters at lists.icgc.org
> Cc: Werner, Johannes; prinz; Schlesner, Matthias
> Subject: Re: [DOCKTESTERS] DKFZ bias filter docker
>
> Hi Denis,
>
> Sorry for the missing information. I updated the README in the
> repository. I hope things are more clear now.
>> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
> The filter is part of the DKFZ workflow. Since the other workflows don't
> use similar filters the DKFZ stand alone filter was run on the complete
> data set after merging the calls (only somatic SNV calls).
>> 2) Could we get a readme that describes how to use this?
> I updated the README. I hope it's more clear now.
>> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
> I will check if we can provide this later but the filter generally runs
> only a couple of minutes (on a normal somatic "PASS" vcf with <= 10 000
> variants).
>
> Best,
> Ivo
>
>
>> Thanks!
>>
>> ________________________________________
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
>> Sent: October 18, 2016 3:06 AM
>> To: docktesters at lists.icgc.org
>> Cc: Werner, Johannes; prinz; Schlesner, Matthias
>> Subject: [DOCKTESTERS] DKFZ bias filter docker
>>
>> Dear dockertesters,
>>
>> I was told to contact you regarding the DKFZ bias filter docker. The
>> docker is basically ready and it also passed internal testing. The
>> scripts and Dockerfile can be found here:
>> https://github.com/eilslabs/DKFZBiasFilter
>> Johannes and Manuel (CCed) have been working on bringing it into
>> Dockstore (they ran into a NFS problem). Johannes is currently on
>> vacation (until October 23rd).
>> Please let me know if it is sufficient to have the docker available on
>> Dockstore some time next week. Alternatively it might be possible that
>> you work with the scripts and Dockerfile on GitHub. If none of this
>> works I (or probably Manuel) can also try to get it running on Dockstore
>> some time later this week.
>>
>> Best,
>> Ivo
>>
>> PS: Sorry to the DKFZ people the email before bounced back because the
>> link of the email address on the Wiki had a typo.
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters
> On 10/18/2016 05:38 PM, Denis Yuen wrote:
>> Hi,
>>
>> Thanks for the heads-up, we can probably help out with writing the CWL descriptor for this, but I do have a few questions.
>>
>> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
>> 2) Could we get a readme that describes how to use this?
>> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
>>
>> Thanks!
>>
>> ________________________________________
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
>> Sent: October 18, 2016 3:06 AM
>> To: docktesters at lists.icgc.org
>> Cc: Werner, Johannes; prinz; Schlesner, Matthias
>> Subject: [DOCKTESTERS] DKFZ bias filter docker
>>
>> Dear dockertesters,
>>
>> I was told to contact you regarding the DKFZ bias filter docker. The
>> docker is basically ready and it also passed internal testing. The
>> scripts and Dockerfile can be found here:
>> https://github.com/eilslabs/DKFZBiasFilter
>> Johannes and Manuel (CCed) have been working on bringing it into
>> Dockstore (they ran into a NFS problem). Johannes is currently on
>> vacation (until October 23rd).
>> Please let me know if it is sufficient to have the docker available on
>> Dockstore some time next week. Alternatively it might be possible that
>> you work with the scripts and Dockerfile on GitHub. If none of this
>> works I (or probably Manuel) can also try to get it running on Dockstore
>> some time later this week.
>>
>> Best,
>> Ivo
>>
>> PS: Sorry to the DKFZ people the email before bounced back because the
>> link of the email address on the Wiki had a typo.
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters


From buchanae at ohsu.edu  Thu Oct 20 16:08:21 2016
From: buchanae at ohsu.edu (Alexander Buchanan)
Date: Thu, 20 Oct 2016 20:08:21 +0000
Subject: [DOCKTESTERS] Broad PCAWG Tokens definition?
Message-ID: <4F0774A8-E3A5-4C3E-AABE-5117523E87FE@ohsu.edu>

Hey Gordon,

I?m new here so maybe I missed this, but what is the tokens task? How would you describe what it does and the results it produces?

Thanks!
Alex Buchanan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161020/7722b767/attachment.html>

From gsaksena at broadinstitute.org  Thu Oct 20 17:03:42 2016
From: gsaksena at broadinstitute.org (Gordon Saksena)
Date: Thu, 20 Oct 2016 17:03:42 -0400
Subject: [DOCKTESTERS] Broad PCAWG Tokens definition?
In-Reply-To: <4F0774A8-E3A5-4C3E-AABE-5117523E87FE@ohsu.edu>
References: <4F0774A8-E3A5-4C3E-AABE-5117523E87FE@ohsu.edu>
Message-ID: <CAJkv8nANUpiejxtL9zE1qTmyYEW7xDhnBggGKkCARd7+oO8Jpw@mail.gmail.com>

The tokens task is part of the PoN (Panel of Normals) filter.  It is a Java
program that collects stats on the Normal BAM for the current donor.  These
stats are later aggregated with stats from the other samples (in another
docker), and then used to flag certain variants in a VCF as suspect (in a
third docker).  The overall algorithm is in the process of being published.


It should be one of the more straightforward algorithms to test - it has
very predictable CPU time and RAM usage, and should produce outputs that
can be tested via an exact binary match.  It accepts just the normal BAM
for its input.

I'm planning later dockers to have a similar structure, though with
increased memory and core requirements.  The .wdl file will continue to
contain a single task, with the bulk of the pipeline wiring embedded inside
the docker.  The dockers will either accept the source BAMs (for callers)
or VCFs (for filters) as inputs.  If you have feedback I can incorporate it
into the other dockers.

Gordon

On Thu, Oct 20, 2016 at 4:08 PM, Alexander Buchanan <buchanae at ohsu.edu>
wrote:

> Hey Gordon,
>
>
>
> I?m new here so maybe I missed this, but what is the tokens task? How
> would you describe what it does and the results it produces?
>
>
>
> Thanks!
>
> Alex Buchanan
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161020/d4676f4d/attachment.html>

From buchanae at ohsu.edu  Thu Oct 20 17:18:55 2016
From: buchanae at ohsu.edu (Alexander Buchanan)
Date: Thu, 20 Oct 2016 21:18:55 +0000
Subject: [DOCKTESTERS] Broad PCAWG Tokens definition?
In-Reply-To: <CAJkv8nANUpiejxtL9zE1qTmyYEW7xDhnBggGKkCARd7+oO8Jpw@mail.gmail.com>
References: <4F0774A8-E3A5-4C3E-AABE-5117523E87FE@ohsu.edu>
 <CAJkv8nANUpiejxtL9zE1qTmyYEW7xDhnBggGKkCARd7+oO8Jpw@mail.gmail.com>
Message-ID: <D416E883-52AD-41BE-A7B1-A36F5AD9A112@ohsu.edu>

Great, thanks Gordon.

Fyi, I just finished a successful run of the tokens wdl with a relatively small BAM file. I had to rebuild the docker image, because the one hosted on Dockerhub was missing a source file. I filed a github issue for that here: https://github.com/broadinstitute/pcawg/issues/10

A rebuild of the image seemed to do the trick. I had some issues building it (now resolved), probably because my build environment was different (Mac) and/or broken (mysterious network issues with Bioconductor.org).

Is there some expected input/output pair I should be using to validate that it?s working as expected?

I don?t have any feedback on the internals of the docker images necessarily (pipette, single wdl task, etc). I think my first impression was just being a little confused looking at the repo and not knowing where to start. The docs mention Firecloud, GCE, make, etc. which doesn?t match my environment, so I didn?t easily know where to start. But, after a day or poking around I figured it out. I guess that?s to be expected when opening up a new codebase on an unfamiliar and unreleased project.

Thanks again,
Alex Buchanan

From: Gordon Saksena <gsaksena at broadinstitute.org>
Date: Thursday, October 20, 2016 at 2:03 PM
To: Alexander Buchanan <buchanae at ohsu.edu>
Cc: "docktesters at lists.icgc.org" <docktesters at lists.icgc.org>
Subject: Re: Broad PCAWG Tokens definition?

The tokens task is part of the PoN (Panel of Normals) filter.  It is a Java program that collects stats on the Normal BAM for the current donor.  These stats are later aggregated with stats from the other samples (in another docker), and then used to flag certain variants in a VCF as suspect (in a third docker).  The overall algorithm is in the process of being published.

It should be one of the more straightforward algorithms to test - it has very predictable CPU time and RAM usage, and should produce outputs that can be tested via an exact binary match.  It accepts just the normal BAM for its input.

I'm planning later dockers to have a similar structure, though with increased memory and core requirements.  The .wdl file will continue to contain a single task, with the bulk of the pipeline wiring embedded inside the docker.  The dockers will either accept the source BAMs (for callers) or VCFs (for filters) as inputs.  If you have feedback I can incorporate it into the other dockers.

Gordon

On Thu, Oct 20, 2016 at 4:08 PM, Alexander Buchanan <buchanae at ohsu.edu<mailto:buchanae at ohsu.edu>> wrote:
Hey Gordon,

I?m new here so maybe I missed this, but what is the tokens task? How would you describe what it does and the results it produces?

Thanks!
Alex Buchanan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161020/2910fd2f/attachment-0001.html>

From buchanae at ohsu.edu  Thu Oct 20 17:19:56 2016
From: buchanae at ohsu.edu (Alexander Buchanan)
Date: Thu, 20 Oct 2016 21:19:56 +0000
Subject: [DOCKTESTERS] Broad PCAWG Tokens definition?
Message-ID: <17A0C9DA-616E-4D47-90C7-982F2A937783@ohsu.edu>

I forgot to add: the tokens task is the only part that?s ready for testing, correct?

From: <docktesters-bounces+buchanae=ohsu.edu at lists.icgc.org> on behalf of Alexander Buchanan <buchanae at ohsu.edu>
Date: Thursday, October 20, 2016 at 2:18 PM
To: Gordon Saksena <gsaksena at broadinstitute.org>
Cc: "docktesters at lists.icgc.org" <docktesters at lists.icgc.org>
Subject: Re: [DOCKTESTERS] Broad PCAWG Tokens definition?

Great, thanks Gordon.

Fyi, I just finished a successful run of the tokens wdl with a relatively small BAM file. I had to rebuild the docker image, because the one hosted on Dockerhub was missing a source file. I filed a github issue for that here: https://github.com/broadinstitute/pcawg/issues/10

A rebuild of the image seemed to do the trick. I had some issues building it (now resolved), probably because my build environment was different (Mac) and/or broken (mysterious network issues with Bioconductor.org).

Is there some expected input/output pair I should be using to validate that it?s working as expected?

I don?t have any feedback on the internals of the docker images necessarily (pipette, single wdl task, etc). I think my first impression was just being a little confused looking at the repo and not knowing where to start. The docs mention Firecloud, GCE, make, etc. which doesn?t match my environment, so I didn?t easily know where to start. But, after a day or poking around I figured it out. I guess that?s to be expected when opening up a new codebase on an unfamiliar and unreleased project.

Thanks again,
Alex Buchanan

From: Gordon Saksena <gsaksena at broadinstitute.org>
Date: Thursday, October 20, 2016 at 2:03 PM
To: Alexander Buchanan <buchanae at ohsu.edu>
Cc: "docktesters at lists.icgc.org" <docktesters at lists.icgc.org>
Subject: Re: Broad PCAWG Tokens definition?

The tokens task is part of the PoN (Panel of Normals) filter.  It is a Java program that collects stats on the Normal BAM for the current donor.  These stats are later aggregated with stats from the other samples (in another docker), and then used to flag certain variants in a VCF as suspect (in a third docker).  The overall algorithm is in the process of being published.

It should be one of the more straightforward algorithms to test - it has very predictable CPU time and RAM usage, and should produce outputs that can be tested via an exact binary match.  It accepts just the normal BAM for its input.

I'm planning later dockers to have a similar structure, though with increased memory and core requirements.  The .wdl file will continue to contain a single task, with the bulk of the pipeline wiring embedded inside the docker.  The dockers will either accept the source BAMs (for callers) or VCFs (for filters) as inputs.  If you have feedback I can incorporate it into the other dockers.

Gordon

On Thu, Oct 20, 2016 at 4:08 PM, Alexander Buchanan <buchanae at ohsu.edu<mailto:buchanae at ohsu.edu>> wrote:
Hey Gordon,

I?m new here so maybe I missed this, but what is the tokens task? How would you describe what it does and the results it produces?

Thanks!
Alex Buchanan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161020/2bf3b3c5/attachment.html>

From gsaksena at broadinstitute.org  Thu Oct 20 17:32:50 2016
From: gsaksena at broadinstitute.org (Gordon Saksena)
Date: Thu, 20 Oct 2016 17:32:50 -0400
Subject: [DOCKTESTERS] Broad PCAWG Tokens definition?
In-Reply-To: <17A0C9DA-616E-4D47-90C7-982F2A937783@ohsu.edu>
References: <17A0C9DA-616E-4D47-90C7-982F2A937783@ohsu.edu>
Message-ID: <CAJkv8nBZHUDzBuh+18asJDCaNc=L8caM4-PE49os+hQpMBKbcg@mail.gmail.com>

Tokens is the only one ready for testing.

Yes, I need to sync the Dockerhub repo with the code updates from GIT.

I am using a debian7bp environment for my builds and testing.

The readme is for creating and debugging new tasks.  Your test environment
is probably going to be quite different.

There is a .tok.gz file included in the Broad intermediate files for each
donor.  The intermediate files currently live on GNOS, in the form of one
tarfile per donor.  Either you can pull it from there, or I could post one
to Jamboree for some donor.

Gordon

On Thu, Oct 20, 2016 at 5:19 PM, Alexander Buchanan <buchanae at ohsu.edu>
wrote:

> I forgot to add: the tokens task is the only part that?s ready for
> testing, correct?
>
>
>
> *From: *<docktesters-bounces+buchanae=ohsu.edu at lists.icgc.org> on behalf
> of Alexander Buchanan <buchanae at ohsu.edu>
> *Date: *Thursday, October 20, 2016 at 2:18 PM
> *To: *Gordon Saksena <gsaksena at broadinstitute.org>
> *Cc: *"docktesters at lists.icgc.org" <docktesters at lists.icgc.org>
> *Subject: *Re: [DOCKTESTERS] Broad PCAWG Tokens definition?
>
>
>
> Great, thanks Gordon.
>
>
>
> Fyi, I just finished a successful run of the tokens wdl with a relatively
> small BAM file. I had to rebuild the docker image, because the one hosted
> on Dockerhub was missing a source file. I filed a github issue for that
> here: https://github.com/broadinstitute/pcawg/issues/10
>
>
>
> A rebuild of the image seemed to do the trick. I had some issues building
> it (now resolved), probably because my build environment was different
> (Mac) and/or broken (mysterious network issues with Bioconductor.org).
>
>
>
> Is there some expected input/output pair I should be using to validate
> that it?s working as expected?
>
>
>
> I don?t have any feedback on the internals of the docker images
> necessarily (pipette, single wdl task, etc). I think my first impression
> was just being a little confused looking at the repo and not knowing where
> to start. The docs mention Firecloud, GCE, make, etc. which doesn?t match
> my environment, so I didn?t easily know where to start. But, after a day or
> poking around I figured it out. I guess that?s to be expected when opening
> up a new codebase on an unfamiliar and unreleased project.
>
>
>
> Thanks again,
>
> Alex Buchanan
>
>
>
> *From: *Gordon Saksena <gsaksena at broadinstitute.org>
> *Date: *Thursday, October 20, 2016 at 2:03 PM
> *To: *Alexander Buchanan <buchanae at ohsu.edu>
> *Cc: *"docktesters at lists.icgc.org" <docktesters at lists.icgc.org>
> *Subject: *Re: Broad PCAWG Tokens definition?
>
>
>
> The tokens task is part of the PoN (Panel of Normals) filter.  It is a
> Java program that collects stats on the Normal BAM for the current donor.
> These stats are later aggregated with stats from the other samples (in
> another docker), and then used to flag certain variants in a VCF as suspect
> (in a third docker).  The overall algorithm is in the process of being
> published.
>
>
>
> It should be one of the more straightforward algorithms to test - it has
> very predictable CPU time and RAM usage, and should produce outputs that
> can be tested via an exact binary match.  It accepts just the normal BAM
> for its input.
>
>
>
> I'm planning later dockers to have a similar structure, though with
> increased memory and core requirements.  The .wdl file will continue to
> contain a single task, with the bulk of the pipeline wiring embedded inside
> the docker.  The dockers will either accept the source BAMs (for callers)
> or VCFs (for filters) as inputs.  If you have feedback I can incorporate it
> into the other dockers.
>
>
>
> Gordon
>
>
>
> On Thu, Oct 20, 2016 at 4:08 PM, Alexander Buchanan <buchanae at ohsu.edu>
> wrote:
>
> Hey Gordon,
>
>
>
> I?m new here so maybe I missed this, but what is the tokens task? How
> would you describe what it does and the results it produces?
>
>
>
> Thanks!
>
> Alex Buchanan
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.icgc.org/mailman/private/docktesters/attachments/20161020/120b34d9/attachment-0001.html>

From i.buchhalter at Dkfz-Heidelberg.de  Wed Oct 26 09:32:52 2016
From: i.buchhalter at Dkfz-Heidelberg.de (Buchhalter, Ivo)
Date: Wed, 26 Oct 2016 13:32:52 +0000
Subject: [DOCKTESTERS] DKFZ bias filter docker
In-Reply-To: <27512884B2D81B41AAB7BB266248F240C09A19D9@exmb2.ad.oicr.on.ca>
References: <8b96b9c2-d0a4-d8ea-b2ca-7dabfc3a785d@dkfz.de>
 <27512884B2D81B41AAB7BB266248F240C09A1875@exmb2.ad.oicr.on.ca>
 <95c07a22-98c6-8602-a6ce-f17ca178ec9b@dkfz.de>
 <27512884B2D81B41AAB7BB266248F240C09A19D9@exmb2.ad.oicr.on.ca>
Message-ID: <DC4E5B09-AD3F-4F85-8310-5EE76B17FD01@dkfz.de>

Hi Denis,

Unfortunately Manuel, who was supposed to help us to fix the docker fell sick. He will be back by the mid of next week. Will it be sufficient it we submit our docker by the end of next week or should we try to start working on it (probably with your help?).

Thanks,
Ivo



> On 19 Oct 2016, at 21:33, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:
> 
> Hi,
> 
> Thanks, this definitely helps to make it more clear. 
> I think this will give us enough information for us to start working on a CWL descriptor or to assist one being written. 
> 
> ________________________________________
> From: Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
> Sent: October 19, 2016 2:19 AM
> To: Denis Yuen; Ivo Buchhalter; docktesters at lists.icgc.org
> Cc: Werner, Johannes; prinz; Schlesner, Matthias
> Subject: Re: [DOCKTESTERS] DKFZ bias filter docker
> 
> Hi Denis,
> 
> Sorry for the missing information. I updated the README in the
> repository. I hope things are more clear now.
>> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
> The filter is part of the DKFZ workflow. Since the other workflows don't
> use similar filters the DKFZ stand alone filter was run on the complete
> data set after merging the calls (only somatic SNV calls).
>> 2) Could we get a readme that describes how to use this?
> I updated the README. I hope it's more clear now.
>> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
> I will check if we can provide this later but the filter generally runs
> only a couple of minutes (on a normal somatic "PASS" vcf with <= 10 000
> variants).
> 
> Best,
> Ivo
> 
> 
>> Thanks!
>> 
>> ________________________________________
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
>> Sent: October 18, 2016 3:06 AM
>> To: docktesters at lists.icgc.org
>> Cc: Werner, Johannes; prinz; Schlesner, Matthias
>> Subject: [DOCKTESTERS] DKFZ bias filter docker
>> 
>> Dear dockertesters,
>> 
>> I was told to contact you regarding the DKFZ bias filter docker. The
>> docker is basically ready and it also passed internal testing. The
>> scripts and Dockerfile can be found here:
>> https://github.com/eilslabs/DKFZBiasFilter
>> Johannes and Manuel (CCed) have been working on bringing it into
>> Dockstore (they ran into a NFS problem). Johannes is currently on
>> vacation (until October 23rd).
>> Please let me know if it is sufficient to have the docker available on
>> Dockstore some time next week. Alternatively it might be possible that
>> you work with the scripts and Dockerfile on GitHub. If none of this
>> works I (or probably Manuel) can also try to get it running on Dockstore
>> some time later this week.
>> 
>> Best,
>> Ivo
>> 
>> PS: Sorry to the DKFZ people the email before bounced back because the
>> link of the email address on the Wiki had a typo.
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters
> On 10/18/2016 05:38 PM, Denis Yuen wrote:
>> Hi,
>> 
>> Thanks for the heads-up, we can probably help out with writing the CWL descriptor for this, but I do have a few questions.
>> 
>> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
>> 2) Could we get a readme that describes how to use this?
>> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
>> 
>> Thanks!
>> 
>> ________________________________________
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
>> Sent: October 18, 2016 3:06 AM
>> To: docktesters at lists.icgc.org
>> Cc: Werner, Johannes; prinz; Schlesner, Matthias
>> Subject: [DOCKTESTERS] DKFZ bias filter docker
>> 
>> Dear dockertesters,
>> 
>> I was told to contact you regarding the DKFZ bias filter docker. The
>> docker is basically ready and it also passed internal testing. The
>> scripts and Dockerfile can be found here:
>> https://github.com/eilslabs/DKFZBiasFilter
>> Johannes and Manuel (CCed) have been working on bringing it into
>> Dockstore (they ran into a NFS problem). Johannes is currently on
>> vacation (until October 23rd).
>> Please let me know if it is sufficient to have the docker available on
>> Dockstore some time next week. Alternatively it might be possible that
>> you work with the scripts and Dockerfile on GitHub. If none of this
>> works I (or probably Manuel) can also try to get it running on Dockstore
>> some time later this week.
>> 
>> Best,
>> Ivo
>> 
>> PS: Sorry to the DKFZ people the email before bounced back because the
>> link of the email address on the Wiki had a typo.
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters
> 


From Denis.Yuen at oicr.on.ca  Wed Oct 26 11:04:58 2016
From: Denis.Yuen at oicr.on.ca (Denis Yuen)
Date: Wed, 26 Oct 2016 15:04:58 +0000
Subject: [DOCKTESTERS] DKFZ bias filter docker
In-Reply-To: <DC4E5B09-AD3F-4F85-8310-5EE76B17FD01@dkfz.de>
References: <8b96b9c2-d0a4-d8ea-b2ca-7dabfc3a785d@dkfz.de>
 <27512884B2D81B41AAB7BB266248F240C09A1875@exmb2.ad.oicr.on.ca>
 <95c07a22-98c6-8602-a6ce-f17ca178ec9b@dkfz.de>
 <27512884B2D81B41AAB7BB266248F240C09A19D9@exmb2.ad.oicr.on.ca>,
 <DC4E5B09-AD3F-4F85-8310-5EE76B17FD01@dkfz.de>
Message-ID: <27512884B2D81B41AAB7BB266248F240C09A2111@exmb2.ad.oicr.on.ca>

Hi,
I think next week should be sufficient, thanks for the update!

________________________________________
From: Buchhalter, Ivo [i.buchhalter at Dkfz-Heidelberg.de]
Sent: October 26, 2016 9:32 AM
To: Denis Yuen
Cc: Buchhalter, Ivo; docktesters at lists.icgc.org; Werner, Johannes; Prinz, Manuel; Schlesner, Matthias
Subject: Re: [DOCKTESTERS] DKFZ bias filter docker

Hi Denis,

Unfortunately Manuel, who was supposed to help us to fix the docker fell sick. He will be back by the mid of next week. Will it be sufficient it we submit our docker by the end of next week or should we try to start working on it (probably with your help?).

Thanks,
Ivo



> On 19 Oct 2016, at 21:33, Denis Yuen <Denis.Yuen at oicr.on.ca> wrote:
>
> Hi,
>
> Thanks, this definitely helps to make it more clear.
> I think this will give us enough information for us to start working on a CWL descriptor or to assist one being written.
>
> ________________________________________
> From: Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
> Sent: October 19, 2016 2:19 AM
> To: Denis Yuen; Ivo Buchhalter; docktesters at lists.icgc.org
> Cc: Werner, Johannes; prinz; Schlesner, Matthias
> Subject: Re: [DOCKTESTERS] DKFZ bias filter docker
>
> Hi Denis,
>
> Sorry for the missing information. I updated the README in the
> repository. I hope things are more clear now.
>> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
> The filter is part of the DKFZ workflow. Since the other workflows don't
> use similar filters the DKFZ stand alone filter was run on the complete
> data set after merging the calls (only somatic SNV calls).
>> 2) Could we get a readme that describes how to use this?
> I updated the README. I hope it's more clear now.
>> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
> I will check if we can provide this later but the filter generally runs
> only a couple of minutes (on a normal somatic "PASS" vcf with <= 10 000
> variants).
>
> Best,
> Ivo
>
>
>> Thanks!
>>
>> ________________________________________
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
>> Sent: October 18, 2016 3:06 AM
>> To: docktesters at lists.icgc.org
>> Cc: Werner, Johannes; prinz; Schlesner, Matthias
>> Subject: [DOCKTESTERS] DKFZ bias filter docker
>>
>> Dear dockertesters,
>>
>> I was told to contact you regarding the DKFZ bias filter docker. The
>> docker is basically ready and it also passed internal testing. The
>> scripts and Dockerfile can be found here:
>> https://github.com/eilslabs/DKFZBiasFilter
>> Johannes and Manuel (CCed) have been working on bringing it into
>> Dockstore (they ran into a NFS problem). Johannes is currently on
>> vacation (until October 23rd).
>> Please let me know if it is sufficient to have the docker available on
>> Dockstore some time next week. Alternatively it might be possible that
>> you work with the scripts and Dockerfile on GitHub. If none of this
>> works I (or probably Manuel) can also try to get it running on Dockstore
>> some time later this week.
>>
>> Best,
>> Ivo
>>
>> PS: Sorry to the DKFZ people the email before bounced back because the
>> link of the email address on the Wiki had a typo.
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters
> On 10/18/2016 05:38 PM, Denis Yuen wrote:
>> Hi,
>>
>> Thanks for the heads-up, we can probably help out with writing the CWL descriptor for this, but I do have a few questions.
>>
>> 1) How does this relate to the existing dkfz workflow? ( https://github.com/ICGC-TCGA-PanCancer/dkfz_dockered_workflows ) Is this a step that follows that workflow or is this a portion of that workflow that has been split out?
>> 2) Could we get a readme that describes how to use this?
>> 3) Do you have some non-confidential small test data that we can use to run/test this quickly before running a real donor through this?
>>
>> Thanks!
>>
>> ________________________________________
>> From: docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org [docktesters-bounces+denis.yuen=oicr.on.ca at lists.icgc.org] on behalf of Ivo Buchhalter [i.buchhalter at dkfz-heidelberg.de]
>> Sent: October 18, 2016 3:06 AM
>> To: docktesters at lists.icgc.org
>> Cc: Werner, Johannes; prinz; Schlesner, Matthias
>> Subject: [DOCKTESTERS] DKFZ bias filter docker
>>
>> Dear dockertesters,
>>
>> I was told to contact you regarding the DKFZ bias filter docker. The
>> docker is basically ready and it also passed internal testing. The
>> scripts and Dockerfile can be found here:
>> https://github.com/eilslabs/DKFZBiasFilter
>> Johannes and Manuel (CCed) have been working on bringing it into
>> Dockstore (they ran into a NFS problem). Johannes is currently on
>> vacation (until October 23rd).
>> Please let me know if it is sufficient to have the docker available on
>> Dockstore some time next week. Alternatively it might be possible that
>> you work with the scripts and Dockerfile on GitHub. If none of this
>> works I (or probably Manuel) can also try to get it running on Dockstore
>> some time later this week.
>>
>> Best,
>> Ivo
>>
>> PS: Sorry to the DKFZ people the email before bounced back because the
>> link of the email address on the Wiki had a typo.
>> _______________________________________________
>> docktesters mailing list
>> docktesters at lists.icgc.org
>> https://lists.icgc.org/mailman/listinfo/docktesters
>


