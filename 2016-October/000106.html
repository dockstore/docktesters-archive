<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH	teleconference
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:docktesters%40lists.icgc.org?Subject=Re%3A%20%5BDOCKTESTERS%5D%20%5BPAWG-TECH%5D%20Draft%20agenda%20for%20PCAWG-TECH%0A%09teleconference&In-Reply-To=%3C689D9C27-0DC6-4FAF-A8BB-4885477E6AC9%40sanger.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000105.html">
   <LINK REL="Next"  HREF="000107.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH	teleconference</H1>
    <B>Keiran Raine</B> 
    <A HREF="mailto:docktesters%40lists.icgc.org?Subject=Re%3A%20%5BDOCKTESTERS%5D%20%5BPAWG-TECH%5D%20Draft%20agenda%20for%20PCAWG-TECH%0A%09teleconference&In-Reply-To=%3C689D9C27-0DC6-4FAF-A8BB-4885477E6AC9%40sanger.ac.uk%3E"
       TITLE="[DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH	teleconference">kr2 at sanger.ac.uk
       </A><BR>
    <I>Wed Oct 12 06:16:57 EDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="000105.html">[DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH	teleconference
</A></li>
        <LI>Next message: <A HREF="000107.html">[DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH	teleconference
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106">[ date ]</a>
              <a href="thread.html#106">[ thread ]</a>
              <a href="subject.html#106">[ subject ]</a>
              <a href="author.html#106">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

This is assuming that it is possible to write to the location the BAM are in.

I think Denis would be best placed to make the minor modification as I don't know the process they are using for build and deploy of the images (I made modifications and then handed over for CWL).

Regards,

Keiran Raine
Principal Bioinformatician
Cancer Genome Project
Wellcome Trust Sanger Institute

<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A>
Tel:+44 (0)1223 834244 Ext: 4983
Office: H104

&gt;<i> On 12 Oct 2016, at 10:37, Miguel Vazquez &lt;<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">miguel.vazquez at cnio.es</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> [The rest of the list where out of the loop for this part of the conversation, I'm putting them back in. In short, the Sanger pipeline produces the BAS file but not co-located with the BAM]
</I>&gt;<i> 
</I>&gt;<i> Hi Keiran,
</I>&gt;<i> 
</I>&gt;<i> Would it be possible then to change this and try again? what needs to happen? I guess you'll need to change the code and a new docker image be produced. Would this be our best alternative? 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Miguel
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On Tue, Oct 11, 2016 at 4:07 PM, Keiran Raine &lt;<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A> &lt;mailto:<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A>&gt;&gt; wrote:
</I>&gt;<i> In the original version we didn't do this step, if we have write access it can be made to do that
</I>&gt;<i> 
</I>&gt;<i> Keiran Raine
</I>&gt;<i> Principal Bioinformatician
</I>&gt;<i> Cancer Genome Project
</I>&gt;<i> Wellcome Trust Sanger Institute
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A> &lt;mailto:<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A>&gt;
</I>&gt;<i> Tel:+44 (0)1223 834244 Ext: 4983 &lt;tel:%2B44%20%280%291223%20834244%20Ext%3A%204983&gt;
</I>&gt;<i> Office: H104
</I>&gt;<i> 
</I>&gt;&gt;<i> On 11 Oct 2016, at 13:49, Miguel Vazquez &lt;<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">miguel.vazquez at cnio.es</A> &lt;mailto:<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">miguel.vazquez at cnio.es</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Hi Keiran,
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> If the BAS and BAM files need to be collocated, why is it not created next to the BAM file?
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Would it not be better if it read
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> private Job basFileBaseJob(int tumourCount, String sampleBam, String process, int index) {
</I>&gt;&gt;<i> Job thisJob = prepTimedJob(tumourCount, &quot;basFileGenerate&quot;, process, index);
</I>&gt;&gt;<i> File f = new File(sampleBam);
</I>&gt;&gt;<i> thisJob.getCommand()
</I>&gt;&gt;<i> .addArgument(getWorkflowBaseDir()+ &quot;/bin/wrapper.sh&quot;)
</I>&gt;&gt;<i> .addArgument(installBase)
</I>&gt;&gt;<i> .addArgument(&quot;bam_stats&quot;)
</I>&gt;&gt;<i> .addArgument(&quot;-i &quot; + sampleBam)
</I>&gt;&gt;<i> .addArgument(&quot;-o &quot; + sampleBam + &quot;.bas&quot;)
</I>&gt;&gt;<i> ;
</I>&gt;&gt;<i> return thisJob;
</I>&gt;&gt;<i> }
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Best
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Miguel
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> On Tue, Oct 11, 2016 at 2:44 PM, Keiran Raine &lt;<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A> &lt;mailto:<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A>&gt;&gt; wrote:
</I>&gt;&gt;<i> Relevant section of code:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> <A HREF="https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780">https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780</A> &lt;<A HREF="https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780">https://github.com/ICGC-TCGA-PanCancer/CGP-Somatic-Docker/blob/develop/src/main/java/io/seqware/pancancer/CgpSomaticCore.java#L769-L780</A>&gt;
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> Keiran Raine
</I>&gt;&gt;<i> Principal Bioinformatician
</I>&gt;&gt;<i> Cancer Genome Project
</I>&gt;&gt;<i> Wellcome Trust Sanger Institute
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> <A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A> &lt;mailto:<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A>&gt;
</I>&gt;&gt;<i> Tel:+44 (0)1223 834244 Ext: 4983 &lt;tel:%2B44%20%280%291223%20834244%20Ext%3A%204983&gt;
</I>&gt;&gt;<i> Office: H104
</I>&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> On 11 Oct 2016, at 13:40, Keiran Raine &lt;<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A> &lt;mailto:<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> There is a step generating the BAS files:
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> [2016/10/10 07:28:37] | 	Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_control_11-runner.sh
</I>&gt;&gt;&gt;<i> [2016/10/10 07:28:37] | 	Running command: bash /datastore/oozie-6599f0b9-8af7-44ca-a608-03c5bbc159c6/generated-scripts/s58_basFileGenerate_tumours_12-runner.sh
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> But if the BAM files and BAS aren't co-located then you have a problem.  You could symlink the BAM files into the work space and have all tools work from that path instead, deleting the symlinks at the end.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> This is one of the changes we had to implement differently as the BAS file data was being held in the GNOS xml data structures during the initial processing.  Moving to this means that any BAM input is sufficient.
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Hope this is easier to solve now,
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> Keiran Raine
</I>&gt;&gt;&gt;<i> Principal Bioinformatician
</I>&gt;&gt;&gt;<i> Cancer Genome Project
</I>&gt;&gt;&gt;<i> Wellcome Trust Sanger Institute
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A> &lt;mailto:<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">kr2 at sanger.ac.uk</A>&gt;
</I>&gt;&gt;&gt;<i> Tel:+44 (0)1223 834244 Ext: 4983 &lt;tel:%2B44%20%280%291223%20834244%20Ext%3A%204983&gt;
</I>&gt;&gt;&gt;<i> Office: H104
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> On 11 Oct 2016, at 13:31, Miguel Vazquez &lt;<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">miguel.vazquez at cnio.es</A> &lt;mailto:<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">miguel.vazquez at cnio.es</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Keiran,
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Its downloading the files still but in fact it does not seem to download any BAS file. Could you please educate me a bit on what are these and how I can create them?
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Best
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Miguel
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> On Tue, Oct 11, 2016 at 2:22 PM, Miguel Vazquez &lt;<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">miguel.vazquez at cnio.es</A> &lt;mailto:<A HREF="https://lists.icgc.org/mailman/listinfo/docktesters">miguel.vazquez at cnio.es</A>&gt;&gt; wrote:
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 4. It looks like the *_pindel_input_* steps run for only 22-23 seconds which could indicate a problem with either the headers or the absence of the BAS file from the expected location.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> I think that you just revealed the problem. There is in fact no BAS files only BAM and BAI. There where BAS files for the test data HCC1143 which is the one that in fact work. It seems like BAS files are not gathered by gnos, could that be? or that my script fails to copy them. I'll try to gather a different sample with my client and check. 
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Not knowing a thing about these files explains why I didn't notice. I'll get back to you when I know more.
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Best
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;&gt;<i> Miguel
</I>&gt;&gt;&gt;&gt;<i> 
</I>&gt;&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
</I>&gt;&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -- The Wellcome Trust Sanger Institute is operated by Genome Research Limited, a charity registered in England with number 1021457 and a company registered in England with number 2742969, whose registered office is 215 Euston Road, London, NW1 2BE. 
</I>&gt;<i> 
</I>



-- 
 The Wellcome Trust Sanger Institute is operated by Genome Research 
 Limited, a charity registered in England with number 1021457 and a 
 company registered in England with number 2742969, whose registered 
 office is 215 Euston Road, London, NW1 2BE. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/6f250a69/attachment-0001.html">https://lists.icgc.org/mailman/private/docktesters/attachments/20161012/6f250a69/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000105.html">[DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH	teleconference
</A></li>
	<LI>Next message: <A HREF="000107.html">[DOCKTESTERS] [PAWG-TECH] Draft agenda for PCAWG-TECH	teleconference
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#106">[ date ]</a>
              <a href="thread.html#106">[ thread ]</a>
              <a href="subject.html#106">[ subject ]</a>
              <a href="author.html#106">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.icgc.org/mailman/listinfo/docktesters">More information about the docktesters
mailing list</a><br>
</body></html>
